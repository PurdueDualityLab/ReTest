{"custom_id": "k-takata_Onigmo_issue_4", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"4\", \"title\": \"Regex matching errors when using \\\\W character class and /i option\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"see: http://bugs.ruby-lang.org/issues/4044\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Also related:\\nhttp://bugs.ruby-lang.org/issues/7533\\nhttp://bugs.ruby-lang.org/issues/7534\\n\"}, {\"author\": \"k-takata\", \"body\": \"I tested several patterns with Perl 5.14 and 5.16:\\n\\n```\\n                                    Perl 5.14  Perl 5.16\\n\\\"\\\\x{17f}\\\" =~ /(?iu)\\\\w/            → match\\n\\\"\\\\x{17f}\\\" =~ /(?iu)[\\\\w]/          → match\\n\\\"\\\\x{17f}\\\" =~ /(?iu)\\\\W/            → unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?iu)[\\\\W]/          → unmatch\\n\\n\\\"\\\\x{17f}\\\" =~ /(?ia)\\\\w/            → unmatch ★\\n\\\"\\\\x{17f}\\\" =~ /(?ia)[\\\\w]/          → match ★   unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?ia)\\\\W/            → match\\n\\\"\\\\x{17f}\\\" =~ /(?ia)[\\\\W]/          → match\\n\\n\\\"s\\\" =~ /(?ia)\\\\w/                  → match\\n\\\"s\\\" =~ /(?ia)[\\\\w]/                → match\\n\\\"s\\\" =~ /(?ia)\\\\W/                  → unmatch\\n\\\"s\\\" =~ /(?ia)[\\\\W]/                → unmatch\\n\\n\\\"\\\\x{17f}\\\" =~ /(?ia)\\\\p{ASCII}/     → unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?ia)[\\\\p{ASCII}]/   → unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?ia)\\\\P{ASCII}/     → match\\n\\\"\\\\x{17f}\\\" =~ /(?ia)[\\\\P{ASCII}]/   → match\\n\\n\\\"s\\\" =~ /(?ia)\\\\p{ASCII}/           → match\\n\\\"s\\\" =~ /(?ia)[\\\\p{ASCII}]/         → match\\n\\\"s\\\" =~ /(?ia)\\\\P{ASCII}/           → unmatch\\n\\\"s\\\" =~ /(?ia)[\\\\P{ASCII}]/         → unmatch\\n\\n\\\"\\\\x{17f}\\\" =~ /(?iaa)\\\\w/           → unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?iaa)[\\\\w]/         → unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?iaa)\\\\W/           → match\\n\\\"\\\\x{17f}\\\" =~ /(?iaa)[\\\\W]/         → match\\n```\\n\\n★: Be careful with these results.\\n\"}, {\"author\": \"k-takata\", \"body\": \"Other test patterns:\\n\\n```\\n                                    Perl 5.14  Perl 5.16\\n# LATIN SMALL LETTER LONG S\\n\\\"\\\\x{17f}\\\" =~ /(?u)[[:lower:]]/    → match\\n\\\"\\\\x{17f}\\\" =~ /(?a)[[:lower:]]/    → unmatch ★\\n\\\"\\\\x{17f}\\\" =~ /(?aa)[[:lower:]]/   → unmatch\\n\\n\\\"\\\\x{17f}\\\" =~ /(?iu)[[:lower:]]/   → match\\n\\\"\\\\x{17f}\\\" =~ /(?ia)[[:lower:]]/   → match ★   unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?iaa)[[:lower:]]/  → unmatch\\n\\n# KELVIN SIGN\\n\\\"\\\\x{212a}\\\" =~ /(?u)[[:upper:]]/   → match\\n\\\"\\\\x{212a}\\\" =~ /(?a)[[:upper:]]/   → unmatch ★\\n\\\"\\\\x{212a}\\\" =~ /(?aa)[[:upper:]]/  → unmatch\\n\\n\\\"\\\\x{212a}\\\" =~ /(?iu)[[:upper:]]/  → match\\n\\\"\\\\x{212a}\\\" =~ /(?ia)[[:upper:]]/  → match ★   unmatch\\n\\\"\\\\x{212a}\\\" =~ /(?iaa)[[:upper:]]/ → unmatch\\n\\n# LATIN SMALL LETTER SHARP S (eszett)\\n\\\"\\\\x{df}\\\" =~ /(?u)[[:lower:]]/     → match\\n\\\"\\\\x{df}\\\" =~ /(?a)[[:lower:]]/     → unmatch ★\\n\\\"\\\\x{df}\\\" =~ /(?aa)[[:lower:]]/    → unmatch\\n\\n\\\"\\\\x{df}\\\" =~ /(?iu)[[:lower:]]/    → match\\n\\\"\\\\x{df}\\\" =~ /(?ia)[[:lower:]]/    → unmatch ★\\n\\\"\\\\x{df}\\\" =~ /(?iaa)[[:lower:]]/   → unmatch\\n```\\n\"}, {\"author\": \"k-takata\", \"body\": \"Perl 5.14 has some inconsistency, but they are fixed with Perl 5.16.\\nMaybe, it is better to use Perl 5.16 or later as a reference.\\n\"}, {\"author\": \"k-takata\", \"body\": \"test script for onigmo:\\nhttps://gist.github.com/k-takata/85cf4de23d8194b2da34\\n\"}, {\"author\": \"k-takata\", \"body\": \"More test patterns with Perl 5.16:\\n\\n```\\n\\\"\\\\x{17f}\\\" =~ /(?iu)[^\\\\w]/    → unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?ia)[^\\\\w]/    → match\\n\\\"\\\\x{17f}\\\" =~ /(?iaa)[^\\\\w]/   → match\\n\\n\\\"\\\\x{17f}\\\" =~ /(?iu)[^s]/     → unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?ia)[^s]/     → unmatch\\n\\\"\\\\x{17f}\\\" =~ /(?iaa)[^s]/    → match\\n\\n\\\"\\\\x{212a}\\\" =~ /(?iu)[^\\\\w]/   → unmatch\\n\\\"\\\\x{212a}\\\" =~ /(?ia)[^\\\\w]/   → match\\n\\\"\\\\x{212a}\\\" =~ /(?iaa)[^\\\\w]/  → match\\n\\n\\\"\\\\x{212a}\\\" =~ /(?iu)[^k]/    → unmatch\\n\\\"\\\\x{212a}\\\" =~ /(?ia)[^k]/    → unmatch\\n\\\"\\\\x{212a}\\\" =~ /(?iaa)[^k]/   → match\\n```\\n\"}, {\"author\": \"k-takata\", \"body\": \"Details of this bug in Japanese.\\n\\n# 現象\\n\\n`(?ia)\\\\w` と `(?ia)[\\\\w]` の動作が異なる。\\n前者は ASCII の範囲内にしかマッチしないのに対し、後者は U+017F (\\\"ſ\\\" , LATIN SMALL LETTER LONG S), U+212a (\\\"K\\\", KELVIN SIGN) にもマッチしてしまう。\\nASCII フラグ `(?a)` が指定されている場合、`\\\\w` は ASCII の範囲内にしかマッチすべきではないが、文字クラスの中に入れると ASCII の範囲外にもマッチしてしまっている。\\n他に同様のものとしては、`\\\\p{ASCII}`, `[[:ascii:]]` (`(?a)` に非依存) や、それ以外の POSIX クラス (`(?a)` 指定時のみ) がある。\\n\\n## 影響するバージョン\\n- Ruby 1.9.1 ~ 1.9.3 に組み込みの Oniguruma 5.9.x  \\n  （オリジナルの Oniguruma 5.9.x は、`\\\\w` は Unicode の範囲でマッチするため、U+017F, U+212a は元々マッチする。）\\n- Onigmo 5.10.0 ~ 5.14.2\\n\\n# 原因\\n\\nignore case フラグ `(?i)` が指定されている場合、文字クラスをパースする際に、文字プロパティーやPOSIXクラスを個々の文字に展開し、次に case fold を行い、大文字小文字を展開した文字クラスを作成する。(E.g. `(?ia)[[:upper:]]` → `(?i)[A-Z]` → `[A-Za-z]`)\\nその際、一部の文字プロパティーなどは ASCII の範囲を超えて case fold を行ってはいけないにもかかわらず、それを行ってしまっている。\\n\\n# 対策\\n\\n文字クラスをパースして、文字プロパティーやPOSIXクラスを個々の文字に展開する際、ASCII の範囲を超えて case fold を行ってよいかを判定し、行ってよい文字だけを集めた文字クラス(`asc_cc`)を別に用意する。\\n元の文字クラスを case fold する際に、個々の文字が `asc_cc` に含まれているかを判定し、含まれていなければ ASCII の範囲を超えた case fold は行わないようにする。\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_7", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"7\", \"title\": \"Case-insensitive group doesn't work\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"see: http://bugs.ruby-lang.org/issues/7974\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_9", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"9\", \"title\": \"Regex Posix space class seems location-sensitive\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"see:\\nhttp://bugs.ruby-lang.org/issues/7972\\nhttp://stackoverflow.com/questions/15076507/regex-slightly-different-in-ruby-2/\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_11", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"11\", \"title\": \"Reduce the size of Unicode Character Data\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Onigmo-5.13.3's UCD size is about 200 KB and the size becomes larger and larger when Unicode is updated. The size of UCD should be reduced.\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_12", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"12\", \"title\": \"Support for Unicode 7.0\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Onigmo 5.13.3 supports only Unicode 6.1.\\nSupport for Unicode ~~6.2~~ ~~6.3~~ 7.0 is needed.\\n\\nRelated: #11\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Unicode 6.3 has been released.\\nhttp://unicode-inc.blogspot.com/2013/09/announcing-unicode-standard-version-63.html\\nhttp://www.unicode.org/versions/Unicode6.3.0/\\n\"}, {\"author\": \"k-takata\", \"body\": \"Related: https://bugs.ruby-lang.org/issues/9092\\n\"}, {\"author\": \"k-takata\", \"body\": \"Unicode 7.0 has been released.\\nhttp://unicode-inc.blogspot.jp/2014/06/announcing-unicode-standard-version-70.html\\nhttp://www.unicode.org/versions/Unicode7.0.0/\\n\"}, {\"author\": \"k-takata\", \"body\": \"Fixed.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_13", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"13\", \"title\": \"Support for (?|...)\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Currently, Onigmo doesn't support the branch reset pattern (?|...).\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_14", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"14\", \"title\": \"\\\\Z matches where it shouldn't\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"see: http://bugs.ruby-lang.org/issues/8001\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_15", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"15\", \"title\": \"Lookbehind assertion fails with /m mode enabled\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"see: http://bugs.ruby-lang.org/issues/8023\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_16", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"16\", \"title\": \"Multibyte character interfering with end-line character within a regex\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"see: http://bugs.ruby-lang.org/issues/8210\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"It seems that Oniguruma 5.9.2 also has this bug.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_18", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"18\", \"title\": \"look-behind does not take Unicode case-folding into account\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"Originally reported in https://github.com/k-takata/Onigmo/pull/17#issuecomment-18537525 .\\n\\n```\\n>> /(?:\\\\u{149})a/ui =~ \\\"[\\\\u{2bc}na]\\\"  # Unicode case-folding match is in effect.\\n=> 1\\n>> /(?<=\\\\u{149})a/ui =~ \\\"[\\\\u{2bc}na]\\\"  # But look-behind does not take account of it.\\n=> nil\\n```\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Fixed in `devel-6.0` branch. Closing.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_19", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"19\", \"title\": \"Merge Oniguruma 5.9.4\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Oniguruma 5.9.4 was released on 2013/04/04.\\nsee: http://www.geocities.jp/kosako3/oniguruma/\\n\\nI have already imported Oniguruma 5.9.4 into the [oniguruma branch](https://github.com/k-takata/Onigmo/tree/oniguruma), but not merged into the master branch.\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_22", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"22\", \"title\": \"Backwards search not respecting range\", \"author\": \"sorbits\", \"labels\": [\"bug\"], \"description\": \"## Summary\\n\\nIf I call `onig_search` with a start/range of `3-0` then it may still return a match outside this range.\\n## Steps to Reproduce\\n\\nBuild the following source:\\n\\n``` C\\n#include <string.h>\\n#include <stdio.h>\\n#include \\\"oniguruma.h\\\"\\n\\nint main (int argc, char const* argv[])\\n{\\n    char const* ptrn = \\\"\\\\\\\\h+\\\";\\n    char const* data = \\\"abcdef\\\";\\n\\n    OnigErrorInfo einfo;\\n    OnigRegex regex = NULL;\\n    if(ONIG_NORMAL == onig_new(&regex, (OnigUChar const*)ptrn, (OnigUChar const*)ptrn + strlen(ptrn), ONIG_OPTION_CAPTURE_GROUP, ONIG_ENCODING_UTF8, ONIG_SYNTAX_RUBY, &einfo))\\n    {\\n        OnigRegion* res = onig_region_new();\\n        if(ONIG_MISMATCH != onig_search(regex, (OnigUChar const*)data, (OnigUChar const*)data + strlen(data), (OnigUChar const*)data + 3, (OnigUChar const*)data, res, 0))\\n            fprintf(stderr, \\\"%td-%td\\\\n\\\", res->beg[0], res->end[0]);\\n    }\\n    return 0;\\n}\\n```\\n## Expected Result\\n\\nI would expect the output to be `0-3`.\\n## Actual Result\\n\\nThe program outputs `3-4`.\\n## Notes\\n\\nThis was tested with current master (9cd4fa124a76baacdf929a9b1bdb943781317836) but problem has existed for as long as I know.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"It seems to be caused by this #ifdef block: https://github.com/k-takata/Onigmo/blob/754f936272289460555c783211211ffda7857302/regexec.c#L4176\\nI don't know why this block is needed. I'll look into it more closely.\\n\\nBTW, I think the expected result is `2-3`.\\n\"}, {\"author\": \"k-takata\", \"body\": \"Hmm, the #ifdef block was added with Oniguruma 5.7.0.\\n\\nCopied from the HISTORY:\\n\\n```\\n2007/04/27: Version 5.7.0\\n\\n2007/04/20: [spec] add config USE_MATCH_RANGE_IS_COMPLETE_RANGE.\\n2007/04/20: [impl] refactoring in match_at().\\n```\\n\\nNote: `USE_MATCH_RANGE_IS_COMPLETE_RANGE` was changed to `USE_MATCH_RANGE_MUST_BE_INSIDE_OF_SPECIFIED_RANGE` with Oniguruma 5.9.0.\\n\"}, {\"author\": \"sorbits\", \"body\": \"Thanks for looking into this.\\n\\nDoes this mean that defining `USE_MATCH_RANGE_MUST_BE_INSIDE_OF_SPECIFIED_RANGE` should return a match of `2-3`?\\n\\nI tried to define it in `regexec.c:33` but got unchanged result.\\n\"}, {\"author\": \"k-takata\", \"body\": \"> Does this mean that defining `USE_MATCH_RANGE_MUST_BE_INSIDE_OF_SPECIFIED_RANGE` should return a match of `2-3`?\\n\\nYes, I think so. But currently the result is `3-4` as you reported.\\n\\nAfter applying the following patch, the result becomes `2-3` when `USE_MATCH_RANGE_MUST_BE_INSIDE_OF_SPECIFIED_RANGE` is defined.\\n(If it is not defined, the result becomes `3-6`.)\\n\\n``` diff\\n--- a/regexec.c\\n+++ b/regexec.c\\n@@ -4173,11 +4173,6 @@ onig_search_gpos(regex_t* reg, const UChar* str, const UChar* end,\\n     }\\n   }\\n   else {  /* backward search */\\n-#ifdef USE_MATCH_RANGE_MUST_BE_INSIDE_OF_SPECIFIED_RANGE\\n-    if (orig_start < end)\\n-      orig_start += enclen(reg->enc, orig_start); /* is upper range */\\n-#endif\\n-\\n     if (reg->optimize != ONIG_OPTIMIZE_NONE) {\\n       UChar *low, *high, *adjrange, *sch_start;\\n\\n```\\n\\nI'm concerning about side effects caused by this patch. More tests are needed.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_24", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"24\", \"title\": \"segmation fault occurs when many groups are used \", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"see: https://bugs.ruby-lang.org/issues/8716\\n\\n> WindowsとOS Xで検証しました。\\n> - 再現手順 ruby 2.0.0p247 (2013-06-27) [x64-mingw32]\\n\\n``` Ruby\\na=\\\"()\\\"\\n(32767.times{a<<'()'}\\neval \\\"/#{a}/=~''\\\"\\n```\\n\\n> - 再現手順 ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.2.1]\\n\\n``` Ruby\\na=\\\"()\\\"\\n(1<<21).times{a<<'()'}\\neval \\\"/#{a}/=~''\\\"\\n```\\n\\n> regexec.c:match_at()で呼ばれるSTACK_INITがサイズを考慮せずにxallocaしているため、スタックオーバーフローしています。\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"It seems that b9fba1d causes random crashes with multithread settings.\\n\"}, {\"author\": \"k-takata\", \"body\": \"Oops, still SEGV occurs.\\nThere were two causes with this issue.\\n1. Using `alloca()` may cause stack overflow when allocating very large area. (Already fixed.)\\n2. Group number is managed by `MemNumType` which is `short int`. Thus, the number become negative if the number of group exceeds 32767. It may cause access errors. (Not fixed yet.)\\n\\nShould Onigmo support more than 32767 groups?\\n\"}, {\"author\": \"k-takata\", \"body\": \"Now the maximum number of capture groups is explicitly limited to 32767 (`ONIG_MAX_CAPTURE_GROUP_NUM`).\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_25", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"25\", \"title\": \"Use Volnitsky's substring search algorithm?\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"see: http://volnitsky.com/project/str_search/\\n\\nVolnitsky's algorithm seems about 2x-4x faster than BMH or Sunday's quick search algorithm.\\n- Can it support Unicode (UTF-8, UTF-16 and UTF-32)?\\n- Can it support multibyte encoding like Shift_JIS? The same byte can be appear in leading byte and trailing byte.\\n- Can it support case insensitive search?\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_26", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"26\", \"title\": \"Add tests for backward search\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Currently we don't have any tests for backward search.\\n\\nRelated: #22\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"I have added some tests in `devel-6.0` branch.\\nhttps://github.com/k-takata/Onigmo/blob/2cb0bec3e7ffe05c5eaad5d3f4b49e06dac48161/testpy.py#L1411-L1422\\n\"}, {\"author\": \"k-takata\", \"body\": \"Actually the test might not be sufficient, but minimal tests are available. So closing.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_28", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"28\", \"title\": \"Trivial typo in RE.ja\", \"author\": \"scivola\", \"labels\": [], \"description\": \"多バイト符合 → 多バイト符号\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"ありがとうございます。\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_29", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"29\", \"title\": \"Support Perl 5.18's (?[])\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Perl 5.18 supports extended bracketed character classes.\\nsee: http://perldoc.perl.org/perlrecharclass.html#Extended-Bracketed-Character-Classes\\n\\nIt's better to support this expression only with ONIG_SYNTAX_PERL.\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_30", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"30\", \"title\": \"Merge Oniguruma 5.9.5\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Oniguruma 5.9.5 was released on 2013/10/21.\\nsee: http://www.geocities.jp/kosako3/oniguruma/\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_31", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"31\", \"title\": \"Two warnings use incorrect source file and line when found in instance_eval\", \"author\": \"srawlins\", \"labels\": [], \"description\": \"This is ruby bug [#9344](https://bugs.ruby-lang.org/issues/9344):\\n\\n```\\n$ cat 9344.rb\\ncode = <<-RUBY\\nx = /]]/\\ny = /[a-z]+*/\\nz = /[a-z]**/\\nRUBY\\ninstance_eval code, 'foo.rb'\\n$ ruby 9344.rb\\nfoo.rb:1: warning: regular expression has ']' without escape: /]]/\\n9344.rb:6: warning: nested repeat operator + and * was replaced with '*': /[a-z]+*/\\n9344.rb:6: warning: redundant nested repeat operator: /[a-z]**/\\n```\\n\\nMy solution was to stop using `onig_verb_warn` and instead use `onig_syntax_warn`. These are the last two references to `onig_verb_warn`, so then that function can be deleted too.\\n\\nI attached a patch to the ruby bug. Should I open a pull request here?\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Ruby uses customized version of Onigmo. Currently, the customized version is stored in the branch `tmp/ruby-2.0.x`.\\n(You can see the differences between the branches `master` and `tmp/ruby-2.0.x` here: https://github.com/k-takata/Onigmo/compare/master...tmp;ruby-2.0.x#files_bucket )\\n\\nWarning functions are also customized for Ruby. Your patch is only needed for the branch `tmp/ruby-2.0.x`.\\n`onig_verb_warn` is still used in the master branch. So, it is not a good idea to remove `onig_verb_warn` and related codes. Isn't it enough to change inside the function `set_quantifier`?\\n\"}, {\"author\": \"srawlins\", \"body\": \"On your master branch, I only see the following uses:\\n\\n```\\n$ git branch\\n* master\\n$ git  grep -n -C 1 \\\"onig_verb_warn\\\"\\nregparse.c-90-#ifdef DEFAULT_VERB_WARN_FUNCTION\\nregparse.c:91:static OnigWarnFunc onig_verb_warn = (OnigWarnFunc )DEFAULT_VERB_WARN_FUNCTION;\\nregparse.c-92-#else\\nregparse.c:93:static OnigWarnFunc onig_verb_warn = onig_null_warn;\\nregparse.c-94-#endif\\n--\\nregparse.c-102-{\\nregparse.c:103:  onig_verb_warn = f;\\nregparse.c-104-}\\n--\\nregparse.c-5217-        case RQ_DEL:\\nregparse.c:5218:          if (onig_verb_warn != onig_null_warn) {\\nregparse.c-5219-            onig_snprintf_with_pattern(buf, WARN_BUFSIZE, env->enc,\\n--\\nregparse.c-5221-                                 (UChar* )\\\"redundant nested repeat operator\\\");\\nregparse.c:5222:            (*onig_verb_warn)((char* )buf);\\nregparse.c-5223-          }\\n--\\nregparse.c-5227-        default:\\nregparse.c:5228:          if (onig_verb_warn != onig_null_warn) {\\nregparse.c-5229-            onig_snprintf_with_pattern(buf, WARN_BUFSIZE, env->enc,\\n--\\nregparse.c-5233-            ReduceQStr[ReduceTypeTable[targetq_num][nestq_num]]);\\nregparse.c:5234:            (*onig_verb_warn)((char* )buf);\\nregparse.c-5235-          }\\n```\\n\\nSo once `onig_verb_warn` is no longer used in lines 5222 and 5234, it is no longer used anywhere.\\n\"}, {\"author\": \"k-takata\", \"body\": \"`onig_verb_warn` is used for [verbose warning function](https://github.com/k-takata/Onigmo/blob/master/doc/API#L40).\\nRemoving them cause API incompatibility.\\n\"}, {\"author\": \"srawlins\", \"body\": \"Ah, I understand! Both `onig_set_verb_warn_func` and `onig_verb_warn` are part of the public API, so we should not delete them. Thanks for the analysis.\\n\\nI just opened #32 that is a smaller fix, only changing those two references to instead use `onig_syntax_warn`.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_34", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"34\", \"title\": \"onig_init() is not thread safe\", \"author\": \"k-takata\", \"labels\": [\"spec\"], \"description\": \"[`onig_init()`](https://github.com/k-takata/Onigmo/blob/8bd7e1863ff0f5b80353f3cc3d8944a6dfb6f44d/regcomp.c#L5960) is not thread safe.\\n\\n``` c\\nextern int\\nonig_init(void)\\n{\\n  if (onig_inited != 0)\\n    return 0;\\n\\n  THREAD_SYSTEM_INIT;\\n  THREAD_ATOMIC_START;\\n\\n  onig_inited = 1;\\n```\\n\\nThe above block is not an atomic block, so `THREAD_SYSTEM_INIT` might be called more than once.\\n\\nThis may cause problems when calling `onig_new()` from multiple threads without calling `onig_init()` explicitly. [doc/API](https://github.com/k-takata/Onigmo/blob/8bd7e1863ff0f5b80353f3cc3d8944a6dfb6f44d/doc/API#L10) says:\\n\\n> You don't have to call it explicitly, because it is called in onig_new().\\n\\nBut it's not true when calling `onig_new()` from multiple threads.\\nA workaround is calling `onig_init()` explicitly (from the main thread) before calling `onig_new()`.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"This is already [documented](https://github.com/k-takata/Onigmo/blob/a745c0bee28391032f22d3d06ea17fad69869023/doc/API#L21-L27). So closing.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_35", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"35\", \"title\": \"warnings occur when compile with MinGW\", \"author\": \"k-takata\", \"labels\": [], \"description\": \"```\\nregcomp.c: In function 'disable_noname_group_capture':\\nregcomp.c:2020:3: warning: implicit declaration of function 'alloca' [-Wimplicit-function-declaration]\\n   map = (GroupNumRemap* )xalloca(sizeof(GroupNumRemap) * (env->num_mem + 1));\\n   ^\\nIn file included from regparse.h:33:0,\\n                 from regcomp.c:31:\\nregint.h:195:21: warning: incompatible implicit declaration of built-in function 'alloca' [enabled by default]\\n #define xalloca     alloca\\n                     ^\\nregcomp.c:2020:26: note: in expansion of macro 'xalloca'\\n   map = (GroupNumRemap* )xalloca(sizeof(GroupNumRemap) * (env->num_mem + 1));\\n                          ^\\n```\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"`alloca` is declared in `malloc.h` on major Win32 compilers (VC, MinGW, BCC), but currently `regint.h` includes `malloc.h` only when BCC is used. Maybe, it's better to include `malloc.h` always on Win32.\\nActually, it seems that VC doesn't need to include `malloc.h` when using `_alloca` (not `alloca`), because it's a built-in function.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_36", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"36\", \"title\": \"Use Travis CI\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"I want to enable Travis CI.\\n\\nA good Japanese post about Travis CI:\\nhttp://sue445.hatenablog.com/entry/2013/06/01/170607\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Now the result can be checked at here: https://travis-ci.org/k-takata/Onigmo\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_37", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"37\", \"title\": \"LTVERSION was totally wrong\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"LTVERSION was not updated with v5.14.0 by mistake.\\nMoreover, versioning of LTVERSION was totally wrong since the first release.\\nHere are some sites which describe the rules for updating the library version:\\n- 7.3 Updating library version information  \\n  http://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html\\n- [Namazu-devel-ja 1585] --version-info LTVERSION について (Japanese)  \\n  http://www.namazu.org/pipermail/namazu-devel-ja/2007-May/001584.html\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"LTVERSION = <B>C</B>urrent:<B>R</B>evision:<B>A</B>ge\\n\\nThe library name is lib<i>foo</i>.so.X.Y.Z where:\\n X = C - A\\n Y = A\\n Z = R\\n\"}, {\"author\": \"k-takata\", \"body\": \"Fixed with 5.14.1.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_38", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"38\", \"title\": \"Merge Ruby's casefold.h\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"The latest Ruby's `enc/unicode/casefold.h` uses perfect hash.\\nMaybe it is faster than the current implementation.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"https://github.com/ruby/ruby/blob/trunk/enc/unicode/casefold.h\\nhttps://github.com/ruby/ruby/blob/trunk/enc/unicode/case-folding.rb\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_40", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"40\", \"title\": \"/(?i)\\\\u0149\\\\u0149/ =~ \\\"\\\\u0149\\\\u0149\\\" doesn't match\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"How to reproduce:\\n\\n```\\n$ LD_LIBRARY_PATH=.libs python\\n\\n>>> from testpy import *\\n>>> set_encoding('UTF-8')\\n>>> set_output_encoding('UTF-8')\\n>>> x2(u\\\"(?i)\\\\u0149\\\\u0149\\\", u\\\"\\\\u0149\\\\u0149\\\", 0, 2)\\nFAIL: /(?i)ŉŉ/ 'ŉŉ'\\n```\\n\\nIt seems that Oniguruma 5.9.5 also has this bug.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"`\\\\u0149` is casefolded into `\\\\u02bc` + `n`, then it is compiled into `exactn-ic:\\\\xca\\\\xbc` + `exact1-ic:n`.\\nOne character is divided into two opcodes, so it couldn't match to a character `\\\\u0149`.\\n\"}, {\"author\": \"k-takata\", \"body\": \"Hmm, some tests failed.\\n\\nhttps://travis-ci.org/k-takata/Onigmo/jobs/31143460\\n\\n> 3115 FAIL: /(?i)ΐ/ 'ΐ'\\n\\n`x2(\\\"(?i)\\\\u03b9\\\\u0308\\\\u0301\\\", \\\"\\\\u0390\\\", 0, 1)`\\n\\n> 3458 search fail (ISO-8859-2)\\n> 3459 search fail (ISO-8859-2)\\n> 3515 search fail (UTF-16BE)\\n> 3518 search fail (UTF-32BE)\\n> 3537 search fail (UTF-16BE)\\n> 3538 search fail (UTF-16BE)\\n\"}, {\"author\": \"k-takata\", \"body\": \"https://travis-ci.org/k-takata/Onigmo/jobs/31236650\\nRebased and forcedly pushed. \\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_41", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"41\", \"title\": \"Character properties ignore the ignore case flag\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"```\\n/(?i)\\\\p{lower}\\\\p{upper}/ =~ \\\"Ab\\\"       → unmatch\\n/(?i)[\\\\p{lower}][\\\\p{upper}/] =~ \\\"Ab\\\"   → match\\n```\\n\\nIf they are in character class, the flag is not ignored. It is inconsistent.\\nOniguruma 5.9.5 also behaves like this.\\n\\nPerl 5.16 doesn't ignore the flag.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Fixed with 020d218001079dee2fb3c2ef9f3127365ece5a37.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_42", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"42\", \"title\": \"[[:punct:]] and \\\\p{Punct}\", \"author\": \"k-takata\", \"labels\": [\"spec\"], \"description\": \"Perl's document ([perlrecharclass](http://perldoc.perl.org/perlrecharclass.html#POSIX-Character-Classes)) says that:\\n\\n> `\\\\p{PosixPunct}` and `[[:punct:]]` in the ASCII range match all non-controls, non-alphanumeric, non-space characters: `[-!\\\"#$%&'()*+,./:;<=>?@[\\\\\\\\\\\\]^_`{|}~]`\\n> \\n> The similarly named property, `\\\\p{Punct}` , matches a somewhat different set in the ASCII range, namely `[-!\\\"#%&'()*,./:;?@[\\\\\\\\\\\\]_{}]`. That is, it is missing the nine characters `[$+<=>^`|~]`.\\n\\nIn current Onigmo, `[[:punct:]]` and `\\\\p{Punct}` is the same in the ASCII range and they depend on the encoding.\\nIf the encoding is Unicode encoding, `[[:punct:]]` and `\\\\p{Punct}` don't match the nine characters.\\nIf the encoding is not Unicode encoding, `[[:punct:]]` and `\\\\p{Punct}` match the nine characters.\\n\\nIs it OK?\\n\", \"comments\": [{\"author\": \"tom-lord\", \"body\": \"I think this is wrong; both Unicode and non-Unicode should match the nine characters.\\n\\nhttp://search.cpan.org/~shay/perl-5.20.2/pod/perlreref.pod\\n\\nI believe the difference should actually be that under Unicode enoding, `[[:punct:]]` should additionally match non-ASCII punctuation. The \\\"symbols\\\" (`$+<=>^`|~`) should always be matched.\\n\"}, {\"author\": \"k-takata\", \"body\": \"I have decided to change the behavior of `[[:punct:]]` on Unicode encodings, and already committed into `devel-6.0` branch.\\r\\nNow `[[:punct:]]` matches the nine characters ```$+<=>^`|~``` on all encodings.\\r\\nNew property `\\\\p{XPosixPunct}` can be used on Unicode encodings. This is the same as `(?u)[[:punct:]]`.\\r\\nHowever `\\\\p{Punct}` still works differently on Unicode encodings and non-Unicode encodings. It matches the nine characters on non-Unicode encodings, and doesn't match on Unicode encodings.\\r\\n\"}, {\"author\": \"k-takata\", \"body\": \"Closing.\\n\"}, {\"author\": \"k-takata\", \"body\": \"Related: https://bugs.ruby-lang.org/issues/12577\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_43", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"43\", \"title\": \"Whitespace in /[...]/x\", \"author\": \"k-takata\", \"labels\": [\"spec\", \"wontfix\"], \"description\": \"http://www.kt.rim.or.jp/~kbk/zakkicho/14/zakkicho1408b.html#D20140820-3\\nSee: [[ruby-list:49923] whitespace in /[...]/x](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-list/49923)\\n\\n> 正規表現を x オプションで記述すると、空白を無視するとのことですが、\\n> 文字クラス内に記述した空白は無視されないようです。\\n> これは仕様でしょうか？\\n\\nCurrently, Onigmo doesn't ignore whitespace in a char class even if `ONIG_OPTION_EXTEND` option is specified.\\n\\nPerl ignores it.\\nhttp://perldoc.perl.org/perlre.html#/x\\n\\nPython doesn't ignore it.\\nhttps://docs.python.org/3.3/library/re.html#re.X\\n\\nIs it better to add an option?\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Related: https://bugs.ruby-lang.org/issues/12477\\n\"}, {\"author\": \"k-takata\", \"body\": \"> Perl ignores it.\\n\\nWas this wrong?\\nPerl 5.24.0's document says: \\\"... ignore most whitespace that is neither backslashed nor within a bracketed character class.\\\"\\n\\n`/[ ]/x` matches to a space:\\n\\n```\\n> perl -e \\\"if (' ' =~ /[ ]/x){ print '<', $&, '>';}\\\"\\n< >\\n```\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_44", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"44\", \"title\": \"\\\"ab\\\" =~ /(?!^a).*b/ doesn't match\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"See: https://bugs.ruby-lang.org/issues/9728\\nRelated: https://bugs.ruby-lang.org/issues/3568\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Fixed.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_46", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"46\", \"title\": \"Support \\\"true\\\" extended grapheme cluster\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Currently `\\\\X` is defined as `(?>\\\\P{M}\\\\p{M}*)`. This definition is the same as [Perl 5.10](http://perldoc.perl.org/5.10.1/perlrebackslash.html#Misc). However the definition was changed as of [Perl 5.12](http://perldoc.perl.org/5.12.4/perlrebackslash.html#Misc).\\n\\nSee pp.15-18 of [this slide](https://speakerdeck.com/patch/unicode-regular-expression-engines). The slide says Onigmo supports legacy grapheme clusters.\\n\\nSee also: [UAX #29: Unicode Text Segmentation](http://unicode.org/reports/tr29/)\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Related: [/\\\\X/ (extended grapheme cluster) can't pass unicode.org's GraphemeBreakTest](https://bugs.ruby-lang.org/issues/12831)\\n\"}, {\"author\": \"k-takata\", \"body\": \"Fixed.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_48", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"48\", \"title\": \"Irregal capture after recursive match\", \"author\": \"osamutake\", \"labels\": [\"bug\"], \"description\": \"Thank you very much for maintaining the excellent library.\\n\\nI found the latest version of Onigmo suffers from the following incorrect behavior when used with a recursive expression.\\n\\n`/\\\\(((?:[^(]|\\\\g<0>)*)\\\\)/`  matches  `\\\"(abc)(abc)\\\"` => OK :green_heart:\\n`matches[0] == (0, 5)` corresponding to `\\\"(abc)\\\"` => OK :green_heart:\\n`matches[1] == (6, 4)` corresponding to _a string with negative length_ => NG :broken_heart:\\n\\n`/\\\\(((?:[^()]|\\\\g<0>)*)\\\\)/`  matches  `\\\"((abc)(abc))\\\"` => OK :green_heart:\\n`matches[0] == (0, 12)` corresponding to `\\\"((abc)(abc))\\\"` => OK :green_heart:\\n`matches[1] == (7, 11)` corresponding to `\\\"abc)\\\"` => NG :broken_heart:\\n\\nIt seems that `matches[].rm_so` refers to the _last capture_ while `matches[].rm_eo` refers to to the _top level capture_. I believe the users will be happier if both of them refers to the top level capture. When tested in ruby, the former example returns an invalid string for $2 that causes ArgumentError when given to a function as described at [ruby/正規表現](http://dora.bk.tsukuba.ac.jp/~takeuchi/index.php?%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%2Fruby%2F%C0%B5%B5%AC%C9%BD%B8%BD#q2562085).\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Sorry for the very late response.\\r\\nI think this is a bug of oniguruma/onigmo, but it seems difficult to fix.\\r\\n\\r\\nI'm trying to investigate this, but I haven't found the cause yet.\\r\\nDebug log: https://gist.github.com/k-takata/833f4ef7c4f94428e8de938103e97d5f\"}, {\"author\": \"k-takata\", \"body\": \"The first one has been fixed in the `devel-6.0` branch.\\r\\nThe second one is still under investigation.\"}, {\"author\": \"k-takata\", \"body\": \"I think I understand what happens with the second example.\\r\\n\\r\\nCapturing happens three times: \\r\\n\\r\\n1. `(abc)(abc)`: position 1 to 11, nest level 1\\r\\n2. the first `abc`: position 2 to 5, nest level 2\\r\\n3. the second `abc`: position 7 to 10, nest level 2\\r\\n\\r\\nMatching sequence is the following:\\r\\n\\r\\n1. Start of the 1st one captures position 1.\\r\\n2. Start of the 2nd one captures position 2.\\r\\n3. End of the 2nd one captures position 5.\\r\\n4. Start of the 3rd one captures position 7.\\r\\n5. End of the 3rd one captures position 10.\\r\\n6. End of the 1st one captures position 11.\\r\\n\\r\\nFinally, the last captured position of start and end will be returned.\\r\\nSo the start of `\\\\1` becomes 7 (No.4) and the end of `\\\\1` becomes 11 (No.6).\\r\\nThe nest level is not considered here.\\r\\n\\r\\n> I believe the users will be happier if both of them refers to the top level capture.\\r\\n\\r\\nI'm not sure this can be easily implemented. Also not sure this doesn't break existing behavior for non-nested capturing.\\r\\nNeed more investigation...\"}, {\"author\": \"osamutake\", \"body\": \"Thank you very much for your detailed investigation.\\r\\n\\r\\nI imagine that if we push the start and end positions on the nest-level stack and pop them from it at the nest-level switching, the problem will be solved. Note that it does not affect non-nested capturing.\\r\\n\\r\\nI'm afraid the first one should have been fixed in the same manner.\\r\\n\\r\\nI do not know how difficult to implement it though...\"}, {\"author\": \"k-takata\", \"body\": \"I think this is fixed by the latest commit.\"}, {\"author\": \"osamutake\", \"body\": \"Thank you very much for the fix.\\r\\n\\r\\nI wonder if the commit dd4638c was really needed independently from 7591b3c.\\r\\nDoesn't 7591b3c fix the first example?\\r\\n\\r\\nI can't follow the logic precisely but, I imagine the two failed tests originate from a same origin.\\r\\n\"}, {\"author\": \"k-takata\", \"body\": \"dd4638c9235381aa2363484a869628d71e8eea68 is needed to store the start/end position of each capturing to a stack.\\r\\nWithout this, the position will be overwritten by the latest one.\"}, {\"author\": \"osamutake\", \"body\": \"I thought even if it is overwritten, it is recovered at level switching but it seems my imagination.\\r\\nSorry for bothering and thank you again for your labor.\\r\\n\"}, {\"author\": \"k-takata\", \"body\": \"I found a better solution for this.\\r\\nEven without my fixes, [a pattern](https://github.com/k-takata/Onigmo/blob/0979a9f8d7d2b79769a397722519596a77f6471a/sample/listcap.c#L111) in `sample/listcap.c` captured as expected with recursive match. This meant that Onigmo had a mechanism to handle nested captures.\\r\\n\\r\\n1. `\\\\g<p>(?@<p>\\\\(\\\\g<s>\\\\)){0}(?@<s>(?:\\\\g<p>)*|){0}`\\r\\n2. `\\\\(((?:[^(]|\\\\g<0>)*)\\\\)`\\r\\n\\r\\nDifference between 1 and 2 is whether captured groups are directly called or not.\\r\\nIn 1, both `<p>` and `<s>` are directly referenced by `\\\\g<p>` and `\\\\g<s>`.\\r\\nIn 2, the whole pattern is referenced by `\\\\g<0>` but `\\\\1` is not referenced. It is indirectly called via `\\\\g<0>`.\\r\\n\\r\\nNow, with the commit 4bd79e2d0039a44d3f736ede00baf81820a290fc, captured groups which are called indirectly are also handled as if they are called directly.\\r\\n\\r\\nBTW, I'm not sure both `IN_CALL` and `IN_RECCALL` in the commit are really needed.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_51", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"51\", \"title\": \"Use Direct Threaded Code\", \"author\": \"k-takata\", \"labels\": [], \"description\": \"Direct threaded code can make a VM faster, but GCC extension is needed to implement it. (Of cause VC doesn't support the extension.)\\nHowever, there is a way to support both GCC-compatible and non-GCC-compatible compiler in one code base.\\nE.g. [picrin](https://github.com/picrin-scheme/picrin) supports both direct threaded code and normal swich-case based code. (https://github.com/picrin-scheme/picrin/blob/master/extlib/benz/vm.c#L583)\\n\\nSee also: [Rubyist Magazine - YARV Maniacs 【第 3 回】 命令ディスパッチの高速化](http://magazine.rubyist.net/?0008-YarvManiacs)\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Implemented in #52 by @KeenS. Thank you.\\nClosing.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_53", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"53\", \"title\": \"question about the \\\\G anchor and onig_search_gpos\", \"author\": \"dahakawang\", \"labels\": [\"bug\"], \"description\": \"hi, \\n\\nlet's say we have a regex `/\\\\Gabc/` and target string is \\\"123abcdef\\\", if we set gpos at offset 3 in the target string, then the regex is supposed to match \\\"abc\\\" in the target string, right?\\n\\ncan someone please advise why below code not work as my expected?\\n\\n``` c\\n    UChar* pattern = (UChar*) \\\"\\\\\\\\Gabc\\\";\\n    UChar* pattern_end = (UChar*) (pattern + strlen(pattern));\\n    OnigErrorInfo oni_error;\\n    regex_t* regex;\\n    int code = onig_new(&regex, pattern, pattern_end, ONIG_OPTION_CAPTURE_GROUP, ONIG_ENCODING_UTF8, ONIG_SYNTAX_DEFAULT,&oni_error);\\n    if (code != ONIG_NORMAL) printf(\\\"error create regex\\\\n\\\");\\n\\n    UChar* str = (UChar*)\\\"123abcdef\\\";\\n    UChar* end = str + strlen(str);\\n    UChar* gpos = str + 3;\\n    UChar* start = str;\\n    OnigRegion* region = onig_region_new();\\n    code = onig_search_gpos(regex, str, end, gpos, start, end, region, ONIG_OPTION_NONE);\\n    if (code == ONIG_MISMATCH) {\\n        printf(\\\"can't match\\\\n\\\");   // output this, why???\\n    }else {\\n        printf(\\\"matched\\\\n\\\");\\n    }\\n\\n```\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Sorry for the very late response.\\nThis was a bug, and I committed the fix to `devel-6.0` branch.\\nThank you.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_59", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"59\", \"title\": \"Update Unicode Version from 7.0.0 to 8.0.0\", \"author\": \"duerst\", \"labels\": [], \"description\": \"Unicode Version 8.0.0 came out in the middle of this year. Onigmo should be updated to Unicode Version 8.0.0. I already submitted a pull request (https://github.com/k-takata/Onigmo/pull/58) that implements this.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Thank you for submitting the issue.\\nAlready updated to 9.0.0 in `devel-6.0` branch. Closing.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_60", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"60\", \"title\": \"Regexp matching with \\\\p{Upper} and \\\\p{Lower} for EUC-JP doesn’t work.\", \"author\": \"Jin-chan\", \"labels\": [\"spec\", \"wontfix\"], \"description\": \"U+FF21 (Ａ, FULLWIDTH LATIN CAPITAL LETTER A) and U+00c0 (À, LATIN CAPITAL LETTER A WITH GRAVE) is `Uppercase_Letter` so it should match and return 0 in following cases but this returns 1.\\n\\n``` Ruby\\nruby -e 'puts \\\"\\\\uFF21A\\\".encode(\\\"EUC-JP\\\") =~ Regexp.compile(\\\"\\\\\\\\\\\\p{Upper}\\\".encode(\\\"EUC-JP”))' # => 1\\nruby -e 'puts \\\"\\\\u00C0A\\\".encode(\\\"EUC-JP\\\") =~ Regexp.compile(\\\"\\\\\\\\\\\\p{Upper}\\\".encode(\\\"EUC-JP\\\"))' # => 1\\n```\\n\\nThis also happens in lower case matching.\\n\\n``` Ruby\\nruby -e 'puts \\\"\\\\uFF41a\\\".encode(\\\"EUC-JP\\\") =~ Regexp.compile(\\\"\\\\\\\\\\\\p{Lower}\\\".encode(\\\"EUC-JP\\\"))' ＃=> 1\\n```\\n\\nIn Unicode encoding it works as follows.\\n\\n``` Ruby\\nruby -e 'puts \\\"\\\\uFF21A\\\" =~ Regexp.compile(\\\"\\\\\\\\\\\\p{Upper}\\\")'  # => 0\\n```\\n\\nLooks like EUC-JP `\\\\p{Upper}` and `\\\\p{Lower}` regex is limited to ASCII characters.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"https://bugs.ruby-lang.org/issues/11859#change-59185\\n\\n> Ruby doesn't have case tables for non Unicode encodings.\\n> \\n> And EUC-JP is legacy encoding, I don't think such encoding should be extended.\\n\\nI have the same opinion. Closing.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_61", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"61\", \"title\": \"Please update outdated config.guess because it causes FTBFS on ppc64el\", \"author\": \"kenhys\", \"labels\": [], \"description\": \"On ppc64el, configure script fails due to outdated config.guess.\\n\\nHere is the output log of configure:\\n\\n```\\nchecking dependency style of gcc... gcc3\\nchecking build system type... ./config.guess: unable to guess system type\\n\\nThis script, last modified 2009-12-30, has failed to recognize\\nthe operating system you are using. It is advised that you\\ndownload the most up to date version of the config scripts from\\n\\n  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD\\nand\\n  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD\\n\\nIf the version you run (./config.guess) is already up to date, please\\nsend the following data and any information you think might be\\npertinent to <config-patches@gnu.org> in order to provide the needed\\ninformation to handle your system.\\n\\nconfig.guess timestamp = 2009-12-30\\n```\\n\\nFYI: there is a workaround when building deb package (dh --with autotools-dev) because it updates config.(guess|sub), but it is better to be fixed in upstream.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Sorry for the very late response. Fixed with 8f2b7c5dcf7cd3e1ec54ab8f23376d2ccd77c896.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_63", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"63\", \"title\": \"Thread safety of onig_search and onig_match.\", \"author\": \"peterhuene\", \"labels\": [\"bug\", \"spec\"], \"description\": \"Forgive me if I'm working from incorrect assumptions as I've just begun integrating Onigmo into one of my projects. My understanding is that these functions are intended to be thread-safe.\\n\\nLooking at the implementation of these `onig_search` and `onig_match`, I notice the following code attempting some synchronization at the start:\\n\\n``` C\\n#if defined(USE_RECOMPILE_API) && defined(USE_MULTI_THREAD_SYSTEM)\\nstart:\\nTHREAD_ATOMIC_START;\\n...\\n```\\n\\nThis seems to be part of a (perhaps defunct?) feature, hidden behind `USE_RECOMPILE_API` that isn't set anywhere, that would recompile the regular expression from within `onig_search` and `onig_match`, something that's obviously not thread safe and needs to be protected (although a global lock would kill throughput).\\n\\nGiven that there appears to be no other synchronization in use other than this (dead?) code, I thought I would try changing the functions to take `const regex_t*` instead of `regex_t*` to at least signal thread safety with respect to the regular expression struct.\\n\\n[Here is a comparison of a commit that adds const where needed](https://github.com/k-takata/Onigmo/compare/master...peterhuene:thread-safety).\\n\\nWell, that wasn't that bad of a change, but unfortunately it won't build because [set_bm_backward_skip is used to modify the int_map_backward field of regex_t](https://github.com/peterhuene/Onigmo/blob/51a3b9d1021a00b35705ff4371a64feae3150631/regexec.c#L3834).  At first glance, this does not appear to be a thread safe mutation of `regex_t` state.\\n\\nIs that the case or is this not a problem?\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Sorry for the very late response.\\nNow I'm thinking that removing all `THREAD_*` macro and making Onigmo thread-safe as Oniguruma 6.0 did.\\n\"}, {\"author\": \"k-takata\", \"body\": \"Now the all `THREAD_*` macros are removed in `devel-6.0` branch.\\n`set_bm_backward_skip()` is also disabled now.\\n\"}, {\"author\": \"peterhuene\", \"body\": \"Thanks!\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_65", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"65\", \"title\": \"crashes from onig_new\", \"author\": \"skomski\", \"labels\": [\"bug\"], \"description\": \"```\\n  r = onig_new(&reg, data, data + size,\\n    ONIG_OPTION_DEFAULT, ONIG_ENCODING_ASCII, ONIG_SYNTAX_DEFAULT, &einfo);\\n```\\n\\n```\\n(\\\\2)(\\\\1)\\n```\\n\\n```\\nstack-overflow on address 0x7fffca3d5ff8 (pc 0x000000574964 bp 0x7fffca3d6110 sp 0x7fffca3d6000 T0)\\n    #0 0x574963 in get_min_match_length /home/skomski/Code/Onigmo/regcomp.c:2152:3\\n    #1 0x574dc5 in get_min_match_length /home/skomski/Code/Onigmo/regcomp.c:2188:11\\n    #2 0x574d1d in get_min_match_length /home/skomski/Code/Onigmo/regcomp.c:2244:8\\n    #3 0x57520a in get_min_match_length /home/skomski/Code/Onigmo/regcomp.c:2163:11\\n    #4 0x574d1d in get_min_match_length /home/skomski/Code/Onigmo/regcomp.c:2244:8\\n    #5 0x57520a in get_min_match_length /home/skomski/Code/Onigmo/regcomp.c:2163:11\\n\\n   ...\\n```\\n\\n```\\n(((?(700000))(?<y>)(())))\\n```\\n\\n```\\nSEGV on unknown address 0x7ffcea194a00 (pc 0x000000572f74 bp 0x7ffcea194a00 sp 0x7ffce9ee8f80 T0)\\n==27959==The signal is caused by a READ memory access.\\n    #0 0x572f73 in renumber_by_map /home/skomski/Code/Onigmo/regcomp.c:1953:38\\n    #1 0x57325d in renumber_by_map /home/skomski/Code/Onigmo/regcomp.c:1943:11\\n    #2 0x54bf34 in disable_noname_group_capture /home/skomski/Code/Onigmo/regcomp.c:2030:7\\n    #3 0x5489c6 in onig_compile /home/skomski/Code/Onigmo/regcomp.c:5740:11\\n    #4 0x5718c4 in onig_new /home/skomski/Code/Onigmo/regcomp.c:5976:7\\n```\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Sorry for the very late response.\\nThe first problem is fixed in `devel-6.0` branch.\\nThe second one is still being investigated.\\n\"}, {\"author\": \"k-takata\", \"body\": \"The second one is also fixed in `devel-6.0` branch. Closing.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_66", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"66\", \"title\": \"Plan for Onigmo 6.0\", \"author\": \"k-takata\", \"labels\": [\"todo\", \"spec\"], \"description\": \"About one year ago [Oniguruma](https://github.com/kkos/oniguruma) restarted on GitHub, and Oniguruma 6.0 was released about five months ago. Unfortunately new syntax I implemented in Onigmo like `\\\\K`, `\\\\X` and etc. were not merged in Oniguruma, and I don't think K.Kosako is going to merge them.\\nI think Ongimo and Oniguruma are now diverged and won't be merged again.\\n\\nCurrently Onigmo and Oniguruma cannot be installed in the same system, because Onigmo still uses the same header/library filenames. They should be changed now.\\n\\nI'm planing that:\\n- Rename the header and library filenames: `onigmo.h`, `libonigmo.so`, `onigmo.dll`, etc.\\n- Import the latest Ruby's source code. This includes support for Unicode 9.0 and improvement of case folding. (Already merged into the `ruby-2.x` branch.)\\n- Merge the `ruby-2.x` branch into `master`. Ruby specific codes should be surrounded by `#ifdef RUBY`.\\n- Change some APIs. (Some of them come from the side effect of merging the `ruby-2.x` branch.)\\n  - Encoding structs and syntax structs will become const.\\n  - Change some encoding name. E.g. `ONIG_ENCODING_UTF8` -> `ONIG_ENCODING_UTF_8`. However the old names still can be used, because I will define aliases for backward compatibility. (But the old structure names like `OnigEncodingUTF8` will not be used. They are not considered as a part of public API.)\\n  - (Import Oniguruma 6.x's new APIs?)\\n    - `onig_scan`: Maybe useful and easy to import.\\n    - `onig_unicode_define_user_property`: Not sure how this is useful.\\n    - `onig_initialize`: Not sure why this is needed. Related to thread safe?\\n- (Make Onigmo thread safe and remove all `THREAD_*` macros like Oniguruma did?)\\n- Merge bug fixes done in Oniguruma 6.x. Need to check if they are already fixed in Onigmo.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"> `onig_unicode_define_user_property`: Not sure how this is useful.\\r\\n\\r\\nI have decided to skip this in Onigmo 6.0.\\r\\nI wonder why this API is limited to Unicode encodings only.\"}, {\"author\": \"k-takata\", \"body\": \"Onigmo 6.0.0 has been released: https://github.com/k-takata/Onigmo/releases/tag/Onigmo-6.0.0\\r\\nClosing.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_67", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"67\", \"title\": \"[Win32] Use separate build directories for x86 and x64\", \"author\": \"k-takata\", \"labels\": [], \"description\": \"Currently Onigmo cannot be build both for x86 and x64 in the same source directory at the same time.\\nIt's better to use separate build directories. E.g. `build_x86` and `build_x64`.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Now available on the `devel-6.0` branch.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_68", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"68\", \"title\": \"Deeply nested capture groups cause stack overflow\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"How to reproduce:\\r\\n\\r\\n``` python\\r\\nfrom testpy import *\\r\\n# import onigmo\\r\\n# set_encoding(\\\"UTF-8\\\")\\r\\n# set_output_encoding()\\r\\nx2(\\\"(\\\" * 32767 + \\\"a\\\" + \\\")\\\" * 32767, \\\"a\\\", 0, 1)\\r\\n```\\r\\n\\r\\nRelated: ~~#18~~ #24\\r\\n\\r\\nThis also occurs on Oniguruma 6.1.1.\\r\\nCc: @kkos\\r\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Fixed in `devel-6.0` branch with the commit e7a614b0f55a3176d94cc96b706a74f93bf59ee0.\\r\\nClosing.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_69", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"69\", \"title\": \"Backward search with .*\", \"author\": \"k-takata\", \"labels\": [\"bug\"], \"description\": \"https://github.com/k-takata/Onigmo/blob/2cb0bec3e7ffe05c5eaad5d3f4b49e06dac48161/testpy.py#L1419-L1422\\n\\n`/.*[a-z]bc/` and `/.+[a-z]bc/` both match to 0-6 (`abcabc`),\\nbut `/.{1,3}[a-z]bc/` matches to 2-6 (`cabc`).\\n\\nShouldn't be as follows?\\n`/.*[a-z]bc/`: 3-6\\n`/.+[a-z]bc/`: 2-6\\n`/.{1,3}[a-z]bc/`: 2-6\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"I need to check with oniguruma.\\n\"}, {\"author\": \"k-takata\", \"body\": \"It turns out that this is a bug of Onigmo. Oniguruma doesn't have this bug.\"}, {\"author\": \"k-takata\", \"body\": \"Fixed.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_70", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"70\", \"title\": \"Import the latest version of st.c from Ruby?\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Now Ruby's st.c uses `ccan/list/list.h` from [ccan](https://ccodearchive.net/info/list.html).\\nI'm not sure this is useful for Onigmo.\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Today, Ruby's st.c was drastically changed with r56650.\\nhttps://bugs.ruby-lang.org/issues/12142\\nccan/list/list.h is not used anymore, so it might be easier to import.\\n\"}, {\"author\": \"k-takata\", \"body\": \"Imported the latest st.c into `devel-6.0` branch from Ruby r56793 with some modifications.\\r\\nClosing.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_71", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"71\", \"title\": \"Support Perl's \\\\h and \\\\v\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"The following two should be supported on Perl syntax:\\n\\n`\\\\h`: horizontal white space\\n`\\\\v`: vertical white space\\n\\nThey conflict with Ruby syntax, so they will not be supported on Ruby syntax.\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_72", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"72\", \"title\": \"Drop support for very old compilers\", \"author\": \"k-takata\", \"labels\": [\"spec\"], \"description\": \"Remove `HAVE_STDARG_PROTOTYPES`, `HAVE_PROTOTYPES` and drop support for very old compilers which don't support `stdarg.h`.\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Also drop support for old compilers which don't have `stdlib.h` and `string.h`.\\n\"}, {\"author\": \"k-takata\", \"body\": \"Fixed in `devel-6.0` branch. Closing.\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_73", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"73\", \"title\": \"Named backrefs in conditional expressions behave differently\", \"author\": \"k-takata\", \"labels\": [\"bug\", \"spec\"], \"description\": \"Named backrefs in conditional expressions (`(?(<name>)yes|no)`) behave differently from normal named backrefs (`\\\\k<name>`) in Ruby syntax.\\r\\n`\\\\k<name>` checks the last group with the name, if not matched then the previous one, and so on, until there is a match. (https://github.com/k-takata/Onigmo/blob/b33408146c093f1a35bb8b85e2237329d749e8ef/doc/RE#L321-L323)\\r\\nHowever `(?(<name>)yes|no)` only checks the left most group with the name. This behavior of the conditional expressions is the same as Perl, but inconsistent for Ruby.\\r\\nThe same strategy with `\\\\k<name>` should be used for Ruby syntax.\\r\\n\\r\\nRelated: #74\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_74", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"74\", \"title\": \"Named backrefs behave differently in Perl syntax\", \"author\": \"k-takata\", \"labels\": [\"bug\", \"spec\"], \"description\": \"Named backrefs (`\\\\k<name>`, `\\\\g{name}`) refer only the left most group with the name in Perl.\\r\\nHowever they behave differently in Onigmo with Perl syntax. (https://github.com/k-takata/Onigmo/blob/b33408146c093f1a35bb8b85e2237329d749e8ef/doc/RE#L321-L323)\\r\\nThey should refer only the left most group in Perl syntax.\\r\\n\\r\\nRelated: #73\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Fixed in `devel-6.0` branch. Closing.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_75", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"75\", \"title\": \"Remove ONIG_OPTION_POSIX_REGION\", \"author\": \"k-takata\", \"labels\": [\"todo\", \"spec\"], \"description\": \"The option [`ONIG_OPTION_POSIX_REGION`](https://github.com/k-takata/Onigmo/blob/e7a614b0f55a3176d94cc96b706a74f93bf59ee0/doc/API#L289) is currently used for implementing a POSIX compatible API `regexec()`. However this causes [duplication of code](https://github.com/k-takata/Onigmo/blob/f4b06ccee342b0c51aaff94822565245f0e4138f/regexec.c#L1710-L1751) in `regexec.c`.\\r\\nI don't think `regexec.c` should handle `regmatch_t` directly. It should be handled inside `regposix.c`.\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Removed.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_76", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"76\", \"title\": \"Regex matching errors when using \\\\W character class and /i option (contd.)\", \"author\": \"k-takata\", \"labels\": [\"bug\", \"spec\"], \"description\": \"It seems that #4 still has problems.\\r\\nSee: https://bugs.ruby-lang.org/issues/4044#note-29\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_81", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"81\", \"title\": \"Out-of-bounds read in set_bm_skip()\", \"author\": \"rhenium\", \"labels\": [\"bug\"], \"description\": \"The following code\\r\\n\\r\\n~~~c\\r\\n#include <stdio.h>\\r\\n#include <string.h>\\r\\n#include \\\"onigmo.h\\\"\\r\\n\\r\\nint main(int argc, char* argv[])\\r\\n{\\r\\n\\tint r;\\r\\n\\tregex_t* reg;\\r\\n\\tOnigErrorInfo einfo;\\r\\n\\r\\n\\tUChar* pattern = (UChar* )\\\"\\\\\\\\\\\\xD3\\\\xD5\\\\xBE\\\\x1E+\\\";\\r\\n\\tr = onig_new(&reg, pattern, pattern + strlen((char* )pattern),\\r\\n\\t\\t     ONIG_OPTION_DEFAULT, ONIG_ENCODING_EUC_JP, ONIG_SYNTAX_DEFAULT, &einfo);\\r\\n\\tif (r != ONIG_NORMAL) {\\r\\n\\t\\tOnigUChar s[ONIG_MAX_ERROR_MESSAGE_LEN];\\r\\n\\t\\tonig_error_code_to_str(s, r, &einfo);\\r\\n\\t\\tfprintf(stderr, \\\"ERROR: %s\\\\n\\\", s);\\r\\n\\t\\treturn -1;\\r\\n\\t}\\r\\n\\tonig_free(reg);\\r\\n\\tonig_end();\\r\\n}\\r\\n~~~\\r\\n\\r\\ncauses out-of-bounds heap read:\\r\\n\\r\\n~~~\\r\\n=================================================================\\r\\n==13981==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x60200000efd3 at pc 0x7f898811550c bp 0x7ffd279fb1c0 sp 0x7ffd279fb1b0\\r\\nREAD of size 1 at 0x60200000efd3 thread T0\\r\\n    #0 0x7f898811550b in set_bm_skip /work/ref/Onigmo/regcomp.c:4252\\r\\n    #1 0x7f898811c341 in set_optimize_exact_info /work/ref/Onigmo/regcomp.c:5294\\r\\n    #2 0x7f898811cce5 in set_optimize_info_from_tree /work/ref/Onigmo/regcomp.c:5386\\r\\n    #3 0x7f898811db90 in onig_compile /work/ref/Onigmo/regcomp.c:5798\\r\\n    #4 0x7f898811e553 in onig_new /work/ref/Onigmo/regcomp.c:5938\\r\\n    #5 0x400be1 in main /work/ref/Onigmo/sample/simple.c:12\\r\\n    #6 0x7f8987d2d290 in __libc_start_main (/usr/lib/libc.so.6+0x20290)\\r\\n    #7 0x4009d9 in _start (/work/ref/Onigmo/sample/.libs/simple+0x4009d9)\\r\\n\\r\\n0x60200000efd3 is located 0 bytes to the right of 3-byte region [0x60200000efd0,0x60200000efd3)\\r\\nallocated by thread T0 here:\\r\\n    #0 0x7f89884aee60 in __interceptor_malloc /build/gcc-multilib/src/gcc/libsanitizer/asan/asan_malloc_linux.cc:62\\r\\n    #1 0x7f898811be9e in set_optimize_exact_info /work/ref/Onigmo/regcomp.c:5268\\r\\n    #2 0x7f898811cce5 in set_optimize_info_from_tree /work/ref/Onigmo/regcomp.c:5386\\r\\n    #3 0x7f898811db90 in onig_compile /work/ref/Onigmo/regcomp.c:5798\\r\\n    #4 0x7f898811e553 in onig_new /work/ref/Onigmo/regcomp.c:5938\\r\\n    #5 0x400be1 in main /work/ref/Onigmo/sample/simple.c:12\\r\\n    #6 0x7f8987d2d290 in __libc_start_main (/usr/lib/libc.so.6+0x20290)\\r\\n\\r\\nSUMMARY: AddressSanitizer: heap-buffer-overflow /work/ref/Onigmo/regcomp.c:4252 in set_bm_skip\\r\\nShadow bytes around the buggy address:\\r\\n  0x0c047fff9da0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\n  0x0c047fff9db0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\n  0x0c047fff9dc0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\n  0x0c047fff9dd0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\n  0x0c047fff9de0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\n=>0x0c047fff9df0: fa fa fa fa fa fa fa fa fa fa[03]fa fa fa 00 04\\r\\n  0x0c047fff9e00: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\n  0x0c047fff9e10: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\n  0x0c047fff9e20: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\n  0x0c047fff9e30: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\n  0x0c047fff9e40: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\\r\\nShadow byte legend (one shadow byte represents 8 application bytes):\\r\\n  Addressable:           00\\r\\n  Partially addressable: 01 02 03 04 05 06 07 \\r\\n  Heap left redzone:       fa\\r\\n  Heap right redzone:      fb\\r\\n  Freed heap region:       fd\\r\\n  Stack left redzone:      f1\\r\\n  Stack mid redzone:       f2\\r\\n  Stack right redzone:     f3\\r\\n  Stack partial redzone:   f4\\r\\n  Stack after return:      f5\\r\\n  Stack use after scope:   f8\\r\\n  Global redzone:          f9\\r\\n  Global init order:       f6\\r\\n  Poisoned by user:        f7\\r\\n  Container overflow:      fc\\r\\n  Array cookie:            ac\\r\\n  Intra object redzone:    bb\\r\\n  ASan internal:           fe\\r\\n  Left alloca redzone:     ca\\r\\n  Right alloca redzone:    cb\\r\\n==13981==ABORTING\\r\\n~~~\\r\\n\\r\\n(originally reported at https://bugs.ruby-lang.org/issues/12997)\\r\\n\\r\\n<blockquote>\\r\\nValgrind reports out-of-bounds memory access while creating a Regexp object with an invalid byte sequence:\\r\\n\\r\\n~~~\\r\\n$ valgrind ruby -e'Regexp.new(\\\"\\\\\\\\\\\\xD3\\\\xD5\\\\xBE\\\\x1E+\\\".force_encoding(\\\"euc-jp\\\"))'\\r\\n==21986== Memcheck, a memory error detector\\r\\n==21986== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\\r\\n==21986== Using Valgrind-3.12.0 and LibVEX; rerun with -h for copyright info\\r\\n==21986== Command: ruby -eRegexp.new(\\\"\\\\\\\\\\\\\\\\\\\\\\\\xD3\\\\\\\\xD5\\\\\\\\xBE\\\\\\\\x1E+\\\".force_encoding(\\\"euc-jp\\\"))\\r\\n==21986== \\r\\n==21986== Invalid read of size 1\\r\\n==21986==    at 0x1EF7D0: set_bm_skip.isra.17 (regcomp.c:4271)\\r\\n==21986==    by 0x1FC1FB: set_optimize_exact_info (regcomp.c:5310)\\r\\n==21986==    by 0x1FC1FB: set_optimize_info_from_tree (regcomp.c:5396)\\r\\n==21986==    by 0x1FC1FB: onig_compile (regcomp.c:5824)\\r\\n==21986==    by 0x1E7C0C: onig_new_with_source (re.c:850)\\r\\n==21986==    by 0x1E7C0C: make_regexp (re.c:874)\\r\\n==21986==    by 0x1E7C0C: rb_reg_initialize (re.c:2681)\\r\\n==21986==    by 0x1E7DEE: rb_reg_initialize_str (re.c:2715)\\r\\n==21986==    by 0x1E8021: rb_reg_init_str (re.c:2751)\\r\\n==21986==    by 0x1E8021: rb_reg_initialize_m (re.c:3293)\\r\\n==21986==    by 0x2981AA: vm_call0_cfunc_with_frame (vm_eval.c:131)\\r\\n==21986==    by 0x2981AA: vm_call0_cfunc (vm_eval.c:148)\\r\\n==21986==    by 0x2981AA: vm_call0_body.constprop.142 (vm_eval.c:180)\\r\\n==21986==    by 0x29897C: vm_call0 (vm_eval.c:61)\\r\\n==21986==    by 0x29897C: rb_call0 (vm_eval.c:342)\\r\\n==21986==    by 0x19BFA0: rb_class_new_instance (object.c:1895)\\r\\n==21986==    by 0x2891D6: vm_call_cfunc_with_frame (vm_insnhelper.c:1752)\\r\\n==21986==    by 0x2891D6: vm_call_cfunc (vm_insnhelper.c:1847)\\r\\n==21986==    by 0x296A8D: vm_call_method_each_type (vm_insnhelper.c:2138)\\r\\n==21986==    by 0x296FC2: vm_call_method (vm_insnhelper.c:2288)\\r\\n==21986==    by 0x28FEC8: vm_exec_core (insns.def:1066)\\r\\n==21986==  Address 0x73f7333 is 0 bytes after a block of size 3 alloc'd\\r\\n==21986==    at 0x4C2AB8D: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\\r\\n==21986==    by 0x1FC083: set_optimize_exact_info (regcomp.c:5284)\\r\\n==21986==    by 0x1FC083: set_optimize_info_from_tree (regcomp.c:5396)\\r\\n==21986==    by 0x1FC083: onig_compile (regcomp.c:5824)\\r\\n==21986==    by 0x1E7C0C: onig_new_with_source (re.c:850)\\r\\n==21986==    by 0x1E7C0C: make_regexp (re.c:874)\\r\\n==21986==    by 0x1E7C0C: rb_reg_initialize (re.c:2681)\\r\\n==21986==    by 0x1E7DEE: rb_reg_initialize_str (re.c:2715)\\r\\n==21986==    by 0x1E8021: rb_reg_init_str (re.c:2751)\\r\\n==21986==    by 0x1E8021: rb_reg_initialize_m (re.c:3293)\\r\\n==21986==    by 0x2981AA: vm_call0_cfunc_with_frame (vm_eval.c:131)\\r\\n==21986==    by 0x2981AA: vm_call0_cfunc (vm_eval.c:148)\\r\\n==21986==    by 0x2981AA: vm_call0_body.constprop.142 (vm_eval.c:180)\\r\\n==21986==    by 0x29897C: vm_call0 (vm_eval.c:61)\\r\\n==21986==    by 0x29897C: rb_call0 (vm_eval.c:342)\\r\\n==21986==    by 0x19BFA0: rb_class_new_instance (object.c:1895)\\r\\n==21986==    by 0x2891D6: vm_call_cfunc_with_frame (vm_insnhelper.c:1752)\\r\\n==21986==    by 0x2891D6: vm_call_cfunc (vm_insnhelper.c:1847)\\r\\n==21986==    by 0x296A8D: vm_call_method_each_type (vm_insnhelper.c:2138)\\r\\n==21986==    by 0x296FC2: vm_call_method (vm_insnhelper.c:2288)\\r\\n==21986==    by 0x28FEC8: vm_exec_core (insns.def:1066)\\r\\n==21986== \\r\\n==21986== \\r\\n==21986== HEAP SUMMARY:\\r\\n==21986==     in use at exit: 2,538,700 bytes in 17,476 blocks\\r\\n==21986==   total heap usage: 43,758 allocs, 26,282 frees, 10,646,254 bytes allocated\\r\\n==21986== \\r\\n==21986== LEAK SUMMARY:\\r\\n==21986==    definitely lost: 349,991 bytes in 3,886 blocks\\r\\n==21986==    indirectly lost: 474,023 bytes in 5,121 blocks\\r\\n==21986==      possibly lost: 1,441,628 bytes in 7,599 blocks\\r\\n==21986==    still reachable: 273,058 bytes in 870 blocks\\r\\n==21986==         suppressed: 0 bytes in 0 blocks\\r\\n==21986== Rerun with --leak-check=full to see details of leaked memory\\r\\n==21986== \\r\\n==21986== For counts of detected and suppressed errors, rerun with: -v\\r\\n==21986== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\\r\\n~~~\\r\\n</blockquote>\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Thank you for the report.\\r\\nShould be fixed now.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_82", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"82\", \"title\": \"Implement Absent Operator\", \"author\": \"k-takata\", \"labels\": [\"todo\"], \"description\": \"Slide and paper by Akira Tanaka (@akr) (both Japanese):\\r\\n\\r\\n* [正規表現における非包含オペレータの提案](https://staff.aist.go.jp/tanaka-akira/pub/prosym49-akr-presen.pdf)\\r\\n* [Absent Operator for Regular Expression](https://staff.aist.go.jp/tanaka-akira/pub/prosym49-akr-paper.pdf)\\r\\n\\r\\nTODO:\\r\\n\\r\\n* Syntax:\\r\\n  Maybe the form of `(?...)` should be used. For example `(?~...)`?\\r\\n* Implementation:\\r\\n  Is it easy?\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Akira's paper says that look-ahead assertion doesn't have theoretical backgrounds. However @sinya8282 says that look-ahead assertion is a regular expression (in context of formal language theory), and it can be proved by using boolean automaton.\\r\\nThen absent operator can be a syntax sugar of `(?:(?!expr)(?m:.))*`?\"}, {\"author\": \"k-takata\", \"body\": \"It seems that `(?~expr)` is different from `(?:(?!expr).)*`.\\r\\n`\\\\A(?~abc)c` should match `abc` (because `(?~abc)` matches `ab`), but `\\\\A(?:(?!abc).)*c` doesn't match.\\r\\n\\r\\nhttps://twitter.com/nalsh/status/809375869626150912\"}, {\"author\": \"k-takata\", \"body\": \"`topic/absent-operator` branch was merged into the master branch.\\r\\nMaybe more tests are needed, but closing for now.\"}, {\"author\": \"k-takata\", \"body\": \"> However @sinya8282 says that look-ahead assertion is a regular expression\\r\\n\\r\\nThis is discussed in a paper by Akimasa MORIHATA:\\r\\n\\r\\n* [Translation of Regular Expression with Lookahead into Finite State Automaton](https://www.jstage.jst.go.jp/article/jssst/29/1/29_1_1_147/_article/) (PDF in Japanese)\"}, {\"author\": \"k-takata\", \"body\": \"Related?\\r\\n[Feature #5588: add negation flag (v) to Regexp - Ruby trunk - Ruby Issue Tracking System](https://bugs.ruby-lang.org/issues/5588 \\\"Feature #5588: add negation flag (v) to Regexp - Ruby trunk - Ruby Issue Tracking System\\\")\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_83", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"83\", \"title\": \"Matching on streams\", \"author\": \"cpitclaudel\", \"labels\": [], \"description\": \"Hi there,\\r\\n\\r\\nThanks for the cool work on Onigmo!\\r\\n\\r\\nHow hard would it be to extend this library to support matching on arbitrary streams, instead of strings? I'm looking for an equivalent of TRE's [`tre_reguexec`](http://laurikari.net/tre/documentation/reguexec/).\\r\\n\\r\\nThe basic idea is that the caller can pass the equivalent of an iterator over something that may not be a string.  This would make it possible to match over gap buffers, ropes, piece tables, and other string implementations that do not rely on a contiguous char array.\\r\\n\\r\\nThanks!\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"I think this is useful, but unfortunately I don't think it's easy to implement in Onigmo.\"}, {\"author\": \"cpitclaudel\", \"body\": \"Do you think it would be easier to add a limited form of this which supports passing the subject string as an array of strings? Onigmo would consider that as just one string, ignoring the fact that it's split up.  This should provide reasonable efficiently, while being a bit simpler to implement, maybe?\\r\\n\\r\\nEven simpler, how hard would it be to support just two such strings? This would allow Onigmo to work for gap buffers.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_85", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"85\", \"title\": \"Missing const qualifier on syntax parameter of onig_new_without_alloc.\", \"author\": \"peterhuene\", \"labels\": [], \"description\": \"The current (6.1.1) prototype for `onig_new_without_alloc` function is:\\r\\n\\r\\n```c\\r\\nint onig_new_without_alloc(OnigRegex, const OnigUChar* pattern, const OnigUChar* pattern_end, OnigOptionType option, OnigEncoding enc, OnigSyntaxType* syntax, OnigErrorInfo* einfo);\\r\\n```\\r\\n\\r\\nNote that the `syntax` argument is missing a `const` qualifier.\\r\\n\\r\\nAs a result, in C++, we're unable to directly use the `ONIG_SYNTAX_...` macros as an argument because they ultimately use declarations of `ONIG_EXTERN const OnigSyntaxType OnigSyntax...;` and the const-qualifier cannot be cast away without a `const_cast` in C++.\", \"comments\": [{\"author\": \"peterhuene\", \"body\": \"Thanks!\"}, {\"author\": \"k-takata\", \"body\": \"Thank you for the report.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_86", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"86\", \"title\": \"Curious behavior in the new absent operator with Ruby's `match?`\", \"author\": \"hachi8833\", \"labels\": [], \"description\": \"First I'd appreciate the release of Ruby 2.4.1 with the new 'absent operator' that comes from Onigmo. Thank you very much! 🎉🎉🎉 \\r\\n\\r\\nI'd just like to share an amazing/funny behavior of the absent operator `(?~)` on Ruby's `#match?` method. This is just for my interest and I believe it is NOT a bug for now.\\r\\n\\r\\n*Note: using absent operator for \\\"checking existence of string\\\" to get the result `true`/`false` like the following is **VERY BAD** for practical use. \\r\\n\\r\\n```ruby\\r\\n# always return true\\r\\n\\\"\\\".match?(/(?~somestring)/)               #=> true\\r\\n\\\"This is a pen\\\".match?(/(?~somestring)/)  #=> true\\r\\n\\r\\n# always return false if absent operator contains no regex\\r\\n\\\"\\\".match?(/(?~)/)                         #=> false\\r\\n\\\"This is a pen\\\".match?(/(?~)/)            #=> false\\r\\n```\\r\\n\\r\\nAt first I thought this might be a critical bug, but after that I found an interesting point:\\r\\n\\r\\n* According to some elemental set theories, \\\"**empty set is a set**\\\" (Perhaps you learned as that in your elementary school age)\\r\\n* Theoretically, empty strings like **\\\"\\\"** can be found among any kind of strings.\\r\\n  * cf. You can find several empty strings in a string like \\\"abcde\\\": between \\\"a\\\" and \\\"b\\\", \\\"b\\\" and \\\"c\\\" ...etc\\r\\n* If so, the empty string can be found even in an empty string.\\r\\n  * in other words, \\\"\\\" contains \\\"\\\", and \\\"\\\" can be found in \\\"\\\".\\r\\n* As a result, `match?(/(?~somestring)/)` always returns `true` and `match?(/(?~)/)` always returns `false` against any kind of strings including empty string.\\r\\n\\r\\nIf the inference is correct, the behavior that is shown above is consistent in logic. It let me believe that this is not a bug. \\r\\nAnd it suggests again that absent operator should never be used for determining the existence of a string. I think I should be careful when I use absent operators. \\r\\n\\r\\nI'd be glad if you find any problems or misunderstanding on that. \\r\\n\\r\\nThank you, \", \"comments\": [{\"author\": \"nurse\", \"body\": \"absent operator is the one always satisfy following condition.\\r\\n```ruby\\r\\nstr.match?(reg) != str.match?(/\\\\A(?~#{reg})\\\\z/)\\r\\n```\\r\\nThis is come from `String#match?` is slightly different from theoretical regular expression match; it allows partial match. You can create such situation with `\\\\A` and `\\\\z`.\"}, {\"author\": \"k-takata\", \"body\": \"They are expected behavior.\\r\\n`(?~somestring)` matches \\\"\\\", \\\"s\\\", \\\"so\\\", \\\"som\\\", ... , \\\"somestrin\\\" and also any strings that doesn't contain \\\"somestring\\\". Any string contains \\\"\\\", therefore it can match any string.\\r\\n`(?~)` never matches because any string has \\\"\\\" as its substring.\\r\\nUsing absent operator alone might not so useful. You may want to combine with anchors or other strings (prefix and/or suffix).\"}, {\"author\": \"hachi8833\", \"body\": \"Thank you very much for the checks!\\r\\n\\r\\nFYI: I got the question while I wrote the following article regarding absent operator: \\r\\nhttps://techracho.bpsinc.jp/hachi8833/2017_03_23/37689\"}, {\"author\": \"k-takata\", \"body\": \"> https://techracho.bpsinc.jp/hachi8833/2017_03_23/37689\\r\\n\\r\\nThank you for good post.\\r\\nFor Japanese speakers, I also wrote this post: [鬼雲に非包含オペレータを実装した話 - Qiita](http://qiita.com/k-takata/items/4e45121081c83d3d5bfd \\\"鬼雲に非包含オペレータを実装した話 - Qiita\\\").\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_87", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"87\", \"title\": \"Improve document about the absence operator\", \"author\": \"k-takata\", \"labels\": [], \"description\": \"After the release of Ruby 2.4.1, some blog posts about the absent operator were written, and they caused some discussions.\\r\\n\\r\\nBlog posts:\\r\\n\\r\\n* [The New ‘Absent Operator’ in Ruby’s Regular Expressions – Ruby Inside – Medium](https://medium.com/rubyinside/the-new-absent-operator-in-ruby-s-regular-expressions-7c3ef6cd0b99#.qi26jywaz)\\r\\n* [Ruby 2.4.1新機能: Onigmo正規表現の非包含演算子(?~ )をチェック](https://techracho.bpsinc.jp/hachi8833/2017_03_23/37689) (Japanese post)\\r\\n* [鬼雲に非包含オペレータを実装した話 - Qiita](http://qiita.com/k-takata/items/4e45121081c83d3d5bfd) (Japanese post by me)\\r\\n\\r\\nDiscussions:\\r\\n\\r\\n* [The New ‘Absent Operator’ in Ruby’s Regular Expressions | Hacker News](https://news.ycombinator.com/item?id=13939046)\\r\\n* [The New ‘Absent Operator’ in Ruby’s Regular Expressions : ruby](https://www.reddit.com/r/ruby/comments/611pk6/the_new_absent_operator_in_rubys_regular/)\\r\\n* [Thoughts on Ruby's new absent operator?](http://www.perlmonks.org/index.pl?node_id=1185762)\\r\\n\\r\\nUnfortunately, some people might not understand the advantage of the absent operator. Maybe one of the reason is that [the original paper by Tanaka Akira](http://www.a-k-r.org/pub/prosym49-akr-paper.pdf) is written in Japanese. Another reason would be that the document of the operator in Onigmo is not enough.\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"First, I'd like to translate the important points of his paper very very roughly.\\r\\n\\r\\n----\\r\\n\\r\\n1. Introduction\\r\\n\\r\\nComplement sets are useful to express C-style comments, CR LF terminated lines,\\r\\nPython's \\\"\\\"\\\"...\\\"\\\"\\\" strings, HTTP header terminated by CR LF CR LF, SMTP body\\r\\nterminated by CR LF . CR LF, etc.\\r\\nThese can be expressed with the complement set of (any string)(terminator)(any string). However, it it not easy to construct a regex which matches such set.\\r\\nThis proposes the absent operator which is easy to write and fits well to regular language theory.\\r\\n\\r\\n2. Regular expressions\\r\\n\\r\\nRegular expressions consist of:\\r\\n`e`: empty string\\r\\n`c`: character\\r\\n`rr`: concatenation\\r\\n`r|r`: alternation\\r\\n`r*`: Kleene closure\\r\\n\\r\\n3. Implementation of regular expressions engine\\r\\n\\r\\nA regular expressions engine can be implemented with DFA or backtracking.\\r\\nScript languages nowadays like Perl, Python and Ruby uses backtracking,\\r\\nbecause it is not easy to implement capturing with DFA.\\r\\nHe implemented a basic backtracking engine using Ruby.\\r\\n\\r\\n3.1. Abstract Syntax Tree of regular expressions\\r\\n\\r\\n3.2. A basic regular expressions engine\\r\\n\\r\\nA basic implementation by Ruby.\\r\\n\\r\\n```ruby\\r\\n# re: AST of a regex\\r\\n# str: An array of characters\\r\\n# pos: Start position\\r\\n# block: A block executed when it is matched\\r\\n#        (Callback)\\r\\ndef try(re, str, pos, &block)\\r\\n```\\r\\n\\r\\n4. Proposal for the absent operator\\r\\n\\r\\nIf a regex engine uses DFA, complement sets can be handled easily.\\r\\nHowever it is not easy for backtracking engine. (See 7.3 for detail.)\\r\\n\\r\\n5. The absent operator !r\\r\\n\\r\\n(Note: Onigmo actually uses (?~r) instead of !r, because !r is not compatible\\r\\nwith current syntax.)\\r\\nThe language generated by !r can be defined as the following:\\r\\n\\r\\n    L(!r) = \\\\Sigma * - L(.*r.*)\\r\\n\\r\\n`L(!r)` is a complement set of `L(.*r.*)`.\\r\\n\\r\\n\\r\\n6. Implementation of the absent operator\\r\\n\\r\\nThis is also described in pp.26-27 of his slide:\\r\\nhttp://www.a-k-r.org/pub/prosym49-akr-presen.pdf\\r\\nSee also [the next comment](https://github.com/k-takata/Onigmo/issues/87#issuecomment-289460241).\\r\\n\\r\\n\\r\\n7. Advantage of the absent operator\\r\\n\\r\\n7.1. Easy to write\\r\\n\\r\\nC-style comments can be expressed with the following:\\r\\n\\r\\n    ab[^b]*b+(([^ba][^b]*)b+)*a\\r\\n\\r\\n(\\\"a\\\" and \\\"b\\\" are used here instead of \\\"/\\\" and \\\"*\\\" to reduce the complexity of\\r\\nescaping.)\\r\\n\\r\\nIf the absent operator is used, it can be:\\r\\n\\r\\n    ab!(ba)ba\\r\\n\\r\\n\\r\\n7.2. Fit with regular language theory\\r\\n\\r\\n7.2.1. Repetition of lazy match\\r\\n\\r\\n    ab.*?ba\\r\\n\\r\\nThis doesn't work well when concatenated with other regex. E.g.\\r\\n\\r\\n    ab.*?ba\\\\n\\r\\n\\r\\nThis wrongly matches `\\\"/*2*/3/*4*/\\\\n\\\"`.\\r\\nHowever,\\r\\n\\r\\n    ab!(ba)ba\\\\n\\r\\n\\r\\nthis correctly matches `\\\"/*4*/\\\\n\\\"`.\\r\\n\\r\\n\\r\\n\\r\\n7.2.2. No backtracking\\r\\n\\r\\n    ab(?>.*?ba)\\r\\n\\r\\nThis works well when concatenated with `\\\"\\\\n\\\"`:\\r\\n\\r\\n    ab(?>.*?ba)\\\\n\\r\\n\\r\\nHowever this hardly depends on the strategy of backtracking, and it doesn't\\r\\nhave theoretical backgrounds. E.g. it cannot be converted to a DFA.\\r\\n\\r\\n\\r\\n7.2.3. Negative lookahead\\r\\n\\r\\n    ab((?!ba).)*ba\\r\\n\\r\\nThis works well.\\r\\nHowever, it is not possible to define a language `L((?!r))` which is generated\\r\\nby `(?!r)`.\\r\\n\\r\\n\\r\\nNote: I'm not sure that the negative lookahead is regular or not.\\r\\nThere is a paper (in Japanese) which says that it is regular.\\r\\n\\r\\n* [Translation of Regular Expression with Lookahead into Finite State Automaton](https://www.jstage.jst.go.jp/article/jssst/29/1/29_1_1_147/_article/)\\r\\n\\r\\n\\r\\n7.3. Inefficiency of complement sets\\r\\n\\r\\nIt is possible to implement a negation operator which matches the complement\\r\\nset of r. This is, however, inefficient to implement on a backtracking engine. \\r\\nThe absent operator is much efficient than the negation operator.\\r\\n\\r\\n\\r\\n8. Related researches\\r\\n\\r\\n8.1. Ragel\\r\\n\\r\\nRagel has the following operators:\\r\\n\\r\\n* negation operator `!r`\\r\\n  This is the same as the complement set operator discussed in 7.3.\\r\\n* difference operator `r1-r2`\\r\\n  This is the same as the complement set operator when r1 generates all the possible strings.\\r\\n* strong difference operator `r1--r2`\\r\\n  This is the same as the absent operator when r1 generates all the possible strings.\\r\\n\\r\\n8.2. Perl\\r\\n\\r\\n8.3. Grail\\r\\n\\r\\n9. Conclusions\\r\\n\"}, {\"author\": \"k-takata\", \"body\": \"And partial translation of [his slide](http://www.a-k-r.org/pub/prosym49-akr-presen.pdf).\\r\\n\\r\\n----\\r\\n\\r\\np.26\\r\\nBehavior of the absent operator\\r\\n\\r\\n    Search - not match\\r\\n      Move start pos and search\\r\\n        Move again and search\\r\\n          Found\\r\\n          Move again and search\\r\\n            Found another one\\r\\n    \\t  Move and search\\r\\n    \\t    No need to search after this\\r\\n    \\r\\n    The range which matches are not included.\\r\\n\\r\\n----\\r\\n\\r\\np.27\\r\\nBehavior of the absent operator\\r\\n\\r\\n* Search r in the right part of the given start position pos.\\r\\n* Search it starting from pos and go to right one by one character.\\r\\n* If nothing found, all part of the right of pos are the possible points which the absent operator can match.\\r\\n* If one or more found, select one which the right end is most left.\\r\\n* Just one character left before the right end of the selected one is the last possible point which the absent operator can match.\\r\\n* Right part of the found one is not needed to be searched.\"}, {\"author\": \"k-takata\", \"body\": \"BTW, should the name of the operator be \\\"absence operator\\\" instead of \\\"absent operator\\\"?\"}, {\"author\": \"hachi8833\", \"body\": \"Good work! I'd help translate them if needed.\"}, {\"author\": \"jaynetics\", \"body\": \"> BTW, should the name of the operator be \\\"absence operator\\\" instead of \\\"absent operator\\\"?\\r\\n\\r\\nI think so. \\\"absent operator\\\" is a confusing name, because it could just as well refer to an operator that is not there. \\\"absence operator\\\" does not have this problem.\\r\\n\\r\\nOn the other hand, would you say that it is also a group? In the docs you have put it under \\\"7. Extended groups\\\". If so, it might be more consistent to use the adjective form, as with \\\"passive\\\" or \\\"atomic\\\". I'd still choose clarity over consistency, though.\"}, {\"author\": \"k-takata\", \"body\": \"Thank you for the explanation.\\r\\n\\r\\n> would you say that it is also a group?\\r\\n\\r\\nIn Akira's paper, `!` is used for the operator. However, I decided to use `(?~...)` in Onigmo, and yes, it is also a group (unlike `!`). \\r\\nSo \\\"absence operator\\\" or \\\"absence group\\\" seems better than \\\"absent operator\\\".\"}, {\"author\": \"k-takata\", \"body\": \"I have slightly updated the document: 791140951eefcf17db4e762e789eb046ea8a114c\\r\\nI changed the name of the operator to \\\"absence operator\\\".\\r\\n(PR for fixing document (including grammar or typo) is always welcome.)\"}, {\"author\": \"k-takata\", \"body\": \"(Upvoting all comments is meaningless, I think...)\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_88", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"88\", \"title\": \"Directly including shift_jis.c from windows_31j.c isn't very nice and causes some issues\", \"author\": \"gamecreature\", \"labels\": [], \"description\": \"When using CLANG c++11 and directly building the sources of onigmo into a project. \\r\\nThe linker gets linkage errors because it somehow optimizes the c file includes.\\r\\n\\r\\nError: \\r\\n```\\r\\nUndefined symbols for architecture x86_64:\\r\\n  \\\"_OnigEncodingShift_JIS\\\", referenced from:\\r\\n      _re_mbcinit in reggnu.o\\r\\n      _reg_set_encoding in regposix.o\\r\\n```\\r\\n\\r\\nSolution is to:\\r\\n- rename `enc/shift_jis.c` to  `enc/shift_jis.h` \\r\\n- create a new enc/shift_jis.c with the following content:\\r\\n```c\\r\\n#include \\\"shift_jis.h\\\"\\r\\n```\\r\\n- change `enc/windows_31j.c` the  included 'shift_jis.c' to 'shift_jis.h' \\r\\n```c\\r\\n#define ENC_CP932\\r\\n#include \\\"shift_jis.h\\\"\\r\\n\\r\\n// .. etc. .\\r\\n```\\r\\n\\r\\nWould you please consider not to #include a '.c' file directly.\\r\\nBut include a '.h' file\\r\\n\\r\\n(This is causing issues in our project  When somebody directly embeds our library https://github.com/edbee/edbee-lib in a c++11 project.\\r\\nSee issue: https://github.com/edbee/edbee-lib/issues/9)\\r\\n\\r\\nREMARK: This is NOT the standard build-process. It doesn't involve calling the make-files. It a project that embeds the sources. \\r\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Thank you for the report.\\r\\nPlease try the latest commit.\"}, {\"author\": \"gamecreature\", \"body\": \"Thank you very much for your quick response.\\r\\nThis commit solves the issue!  😄 👍  \"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_89", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"89\", \"title\": \"Missing UTS 51 binary properties for Emoji\", \"author\": \"ticky\", \"labels\": [], \"description\": \"[Unicode Technical Standard #51](http://www.unicode.org/reports/tr51/) introduces emoji properties and data, which Onigmo doesn’t yet support.\\r\\n\\r\\nFor instance, one would expect this emoji character-matching regex (borrowed from [Mathias Bynens’ blog](https://mathiasbynens.be/notes/es-unicode-property-escapes#emoji) to be valid, but at this point it is not;\\r\\n```ruby\\r\\n/\\\\p{Emoji_Modifier_Base}\\\\p{Emoji_Modifier}?|\\\\p{Emoji_Presentation}|\\\\p{Emoji}\\\\uFE0F/\\r\\n```\", \"comments\": [{\"author\": \"nurse\", \"body\": \"You can use `/[\\\\u{1F1E6}-\\\\u{1F1FF}]{2}|(?:\\\\p{Grapheme_Cluster_Break=E_Base}|\\\\p{Grapheme_Cluster_Break=E_Base_GAZ})\\\\p{Grapheme_Cluster_Break=Extend}*\\\\p{Grapheme_Cluster_Break=E_Modifier}?(?:\\\\p{Grapheme_Cluster_Break=ZWJ}(?:\\\\p{Grapheme_Cluster_Break=Glue_After_Zwj}|\\\\p{Grapheme_Cluster_Break=E_Base_GAZ}\\\\p{Grapheme_Cluster_Break=Extend}*\\\\p{Grapheme_Cluster_Break=E_Modifier}?))*/` as UTR#51 revision 9's `emoji sequence`.\"}, {\"author\": \"ticky\", \"body\": \"That regex is _not_ an equivalent to the regex I posted! It doesn’t correctly match characters which require U+FE0F to be displayed as emoji!\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_90", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"90\", \"title\": \"Use after free in match_at()\", \"author\": \"mtasaka\", \"labels\": [\"bug\"], \"description\": \"Forwarded from https://github.com/kkos/oniguruma/issues/61 , slightly modified for onigumo.  \\r\\nTest code:\\r\\n```\\r\\n#include <stdio.h>\\r\\n#include \\\"onigmo.h\\\"\\r\\nstatic int\\r\\nscan_callback(OnigPosition n, OnigPosition r, OnigRegion* region, void* arg)\\r\\n{\\r\\n    return 0;\\r\\n}\\r\\n\\r\\nstatic int\\r\\nscan(regex_t* reg, unsigned char* str, unsigned char* end)\\r\\n{\\r\\n  int r;\\r\\n  OnigRegion *region;\\r\\n\\r\\n  region = onig_region_new();\\r\\n\\r\\n  r = onig_scan(reg, str, end, region, ONIG_OPTION_NONE, scan_callback, NULL);\\r\\n  if (r >= 0) {\\r\\n    fprintf(stdout, \\\"total: %d match\\\\n\\\", r);\\r\\n  }\\r\\n  else { /* error */\\r\\n    char s[ONIG_MAX_ERROR_MESSAGE_LEN];\\r\\n    onig_error_code_to_str((OnigUChar* )s, r);\\r\\n    fprintf(stderr, \\\"ERROR: %s\\\\n\\\", s);\\r\\n    return -1;\\r\\n  }\\r\\n\\r\\n  onig_region_free(region, 1 /* 1:free self, 0:free contents only */);\\r\\n  return 0;\\r\\n}\\r\\n\\r\\nstatic int\\r\\nexec(OnigEncoding enc, OnigOptionType options,\\r\\n     char* apattern, char* astr,  int pattern_len,\\r\\n    unsigned char *end, const OnigSyntaxType* sytax)\\r\\n{\\r\\n    int r;\\r\\n    regex_t* reg;\\r\\n    OnigErrorInfo einfo;\\r\\n    UChar* pattern = (UChar* )apattern;\\r\\n    UChar* str     = (UChar* )astr;\\r\\n\\r\\n    onig_initialize(&enc, 1);\\r\\n\\r\\n    r = onig_new(&reg, pattern,\\r\\n                 pattern + pattern_len,\\r\\n                 options, enc, sytax , &einfo);\\r\\n    if (r != ONIG_NORMAL) {\\r\\n        OnigUChar s[ONIG_MAX_ERROR_MESSAGE_LEN];\\r\\n        onig_error_code_to_str(s, r, &einfo);\\r\\n        fprintf(stderr, \\\"ERROR: %s\\\\n\\\", s);\\r\\n        return -1;\\r\\n    }\\r\\n\\r\\n    r = scan(reg, str, end);\\r\\n    onig_free(reg);\\r\\n    onig_end();\\r\\n    return 0;\\r\\n}\\r\\n\\r\\nextern int main(int argc, char* argv[])\\r\\n{\\r\\n    int r;\\r\\n    /* ISO 8859-1 test */\\r\\n    static unsigned char str[] = { 0xc7, 0xd6, 0xfe, 0xea, 0xe0, 0xe2, 0x00 };\\r\\n    char* pattern =\\\"\\\\x28\\\\x7c\\\\x28\\\\x00\\\\x28\\\\x3f\\\\x3a\\\\x5c\\\\x67\\\\x27\\\\x31\\\\x27\\\\x29\\\\x2a\\\\x7c\\\\x7c\\\\x28\\\\x29\\\\x29\\\\x2a\\\\x7c\\\\x28\\\\x28\\\\x28\\\\x28\\\\x29\\\\x29\\\\x29\\\\x5c\\\\x6b\\\\x27\\\\x31\\\\x2d\\\\x30\\\\x27\\\\x29\\\\x29\\\\x30\\\\x7c\\\";\\r\\n    r = exec(ONIG_ENCODING_EUC_JP,ONIG_OPTION_NONE,pattern,(char*) str,39, str + 7, ONIG_SYNTAX_DEFAULT);\\r\\n    return r;\\r\\n}\\r\\n```\\r\\n\\r\\nWith gdb:\\r\\n```\\r\\n[mtasaka@localhost _BUILDDIR]$ LD_LIBRARY_PATH=.libs gdb ./issue61-onigumo \\r\\nGNU gdb (GDB) Fedora 8.0-13.fc26\\r\\nCopyright (C) 2017 Free Software Foundation, Inc.\\r\\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\\r\\nThis is free software: you are free to change and redistribute it.\\r\\nThere is NO WARRANTY, to the extent permitted by law.  Type \\\"show copying\\\"\\r\\nand \\\"show warranty\\\" for details.\\r\\nThis GDB was configured as \\\"x86_64-redhat-linux-gnu\\\".\\r\\nType \\\"show configuration\\\" for configuration details.\\r\\nFor bug reporting instructions, please see:\\r\\n<http://www.gnu.org/software/gdb/bugs/>.\\r\\nFind the GDB manual and other documentation resources online at:\\r\\n<http://www.gnu.org/software/gdb/documentation/>.\\r\\nFor help, type \\\"help\\\".\\r\\nType \\\"apropos word\\\" to search for commands related to \\\"word\\\"...\\r\\nReading symbols from ./issue61-onigumo...done.\\r\\n(gdb) r\\r\\nStarting program: /home/mtasaka/rpmbuild/TEMP/onigumo/GIT/Onigmo/_BUILDDIR/issue61-onigumo \\r\\n\\r\\nProgram received signal SIGSEGV, Segmentation fault.\\r\\n0x00007ffff7b5377f in match_at (reg=0x603010, str=0x602064 <str> \\\"\\\\307\\\\326\\\\376\\\\352\\\\340\\\", <incomplete sequence \\\\342>, end=0x60206b \\\"\\\", \\r\\n    right_range=0x60206b \\\"\\\", sstart=0x60206a <str+6> \\\"\\\", sprev=0x60206a <str+6> \\\"\\\", msa=0x7fffffffd940)\\r\\n    at /home/mtasaka/rpmbuild/TEMP/onigumo/GIT/Onigmo/_BUILDDIR/../regexec.c:2813\\r\\n2813\\t\\tSTACK_NULL_CHECK_MEMST_REC(isnull, mem, s, reg);\\r\\n(gdb) bt\\r\\n#0  0x00007ffff7b5377f in match_at (reg=0x603010, str=0x602064 <str> \\\"\\\\307\\\\326\\\\376\\\\352\\\\340\\\", <incomplete sequence \\\\342>, end=0x60206b \\\"\\\", \\r\\n    right_range=0x60206b \\\"\\\", sstart=0x60206a <str+6> \\\"\\\", sprev=0x60206a <str+6> \\\"\\\", msa=0x7fffffffd940)\\r\\n    at /home/mtasaka/rpmbuild/TEMP/onigumo/GIT/Onigmo/_BUILDDIR/../regexec.c:2813\\r\\n#1  0x00007ffff7b59601 in onig_search_gpos (reg=0x603010, str=0x602064 <str> \\\"\\\\307\\\\326\\\\376\\\\352\\\\340\\\", <incomplete sequence \\\\342>, end=0x60206b \\\"\\\", \\r\\n    global_pos=0x60206a <str+6> \\\"\\\", start=0x60206a <str+6> \\\"\\\", range=0x60206b \\\"\\\", region=0x603be0, option=0)\\r\\n    at /home/mtasaka/rpmbuild/TEMP/onigumo/GIT/Onigmo/_BUILDDIR/../regexec.c:4416\\r\\n#2  0x00007ffff7b5893c in onig_search (reg=0x603010, str=0x602064 <str> \\\"\\\\307\\\\326\\\\376\\\\352\\\\340\\\", <incomplete sequence \\\\342>, end=0x60206b \\\"\\\", \\r\\n    start=0x60206a <str+6> \\\"\\\", range=0x60206b \\\"\\\", region=0x603be0, option=0)\\r\\n    at /home/mtasaka/rpmbuild/TEMP/onigumo/GIT/Onigmo/_BUILDDIR/../regexec.c:4145\\r\\n#3  0x00007ffff7b59cb2 in onig_scan (reg=0x603010, str=0x602064 <str> \\\"\\\\307\\\\326\\\\376\\\\352\\\\340\\\", <incomplete sequence \\\\342>, end=0x60206b \\\"\\\", \\r\\n    region=0x603be0, option=0, scan_callback=0x400937 <scan_callback>, callback_arg=0x0)\\r\\n    at /home/mtasaka/rpmbuild/TEMP/onigumo/GIT/Onigmo/_BUILDDIR/../regexec.c:4535\\r\\n#4  0x00000000004009a2 in scan (reg=0x603010, str=0x602064 <str> \\\"\\\\307\\\\326\\\\376\\\\352\\\\340\\\", <incomplete sequence \\\\342>, end=0x60206b \\\"\\\")\\r\\n    at ./issue61-onigumo.c:17\\r\\n#5  0x0000000000400b2e in exec (enc=0x602080 <OnigEncodingEUC_JP>, options=0, apattern=0x400c60 \\\"(|(\\\", \\r\\n    astr=0x602064 <str> \\\"\\\\307\\\\326\\\\376\\\\352\\\\340\\\", <incomplete sequence \\\\342>, pattern_len=39, end=0x60206b \\\"\\\", sytax=0x7ffff7b69220 <OnigSyntaxRuby>)\\r\\n    at ./issue61-onigumo.c:55\\r\\n#6  0x0000000000400b95 in main (argc=1, argv=0x7fffffffdd18) at ./issue61-onigumo.c:67\\r\\n```\\r\\n\\r\\ngit bisect:\\r\\n```\\r\\n[mtasaka@localhost Onigmo]$ git bisect start 4ec6283275f09f038fd7ca23dce3de8e873e7b2c 7291b8a97c66aea96d74fba35a5e883a09bdf467\\r\\nPrevious HEAD position was 3ddfbfc... Merge branch 'topic/codecov'\\r\\nSwitched to branch 'localwork'\\r\\nBisecting: 39 revisions left to test after this (roughly 5 steps)\\r\\n[8d0f9d3c20134e204e6913b9f1e7779f49f9d58f] Add documents for absent operator (Issue #82)\\r\\n[mtasaka@localhost Onigmo]$ git bisect run ./bysect-onigumo.sh\\r\\n4bd79e2d0039a44d3f736ede00baf81820a290fc is the first bad commit\\r\\ncommit 4bd79e2d0039a44d3f736ede00baf81820a290fc\\r\\nAuthor: K.Takata <kentkt@csc.jp>\\r\\nDate:   Wed Dec 7 21:53:11 2016 +0900\\r\\n\\r\\n    Better fix for Issue #48\\r\\n    \\r\\n    This partly reverts 7591b3ccd88a9dc1a482763a72783ecb2863a754.\\r\\n    Also related: dd4638c9235381aa2363484a869628d71e8eea68\\r\\n\\r\\n:100644 100644 32807be0478459a867c37aaa06371aed0e125bf8 fa27d6434dc27fbea0134df5fa66270bd6bba8aa M\\tregcomp.c\\r\\n:100644 100644 74dade45fc721c3e0f56145a4031c180605b2059 b27884b32c4827d430613577d924e1362cce9748 M\\tregexec.c\\r\\nbisect run success\\r\\n```\\r\\n\\r\\nIt shows 4bd79e2d0039a44d3f736ede00baf81820a290fc is the first bad commit.\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_92", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"92\", \"title\": \"\\\"ss\\\" in look-behind raises syntax error\", \"author\": \"nurse\", \"labels\": [\"bug\"], \"description\": \"\\\"ss\\\" in look-behind may raise syntax error.\\r\\n```\\r\\nirb(main):006:0> /(?<!ss)/iu\\r\\n=> /(?<!ss)/i\\r\\nirb(main):002:0> /(?<!ass)/iu\\r\\nSyntaxError: (irb):2: invalid pattern in look-behind: /(?<!ass)/i\\r\\n```\\r\\nThis seems because \\\"ss\\\" is expanded to \\\"ß\\\".\\r\\nThough Onigmo avoids the issue if there's only \\\"ss\\\", but with another characters it cause error.\", \"comments\": [{\"author\": \"aquach\", \"body\": \"I'm getting a similar error with a non-ascii string:\\r\\n\\r\\n```\\r\\n(/(?<!post)e/i).match?(\\\"\\\\u{a0}\\\")\\r\\nRegexpError: invalid pattern in look-behind: /(?<!post)e/i\\r\\n```\"}, {\"author\": \"aquach\", \"body\": \"Seems like a pretty big deal since it means that lookbehind is now incompatible with non-ascii characters, under certain conditions.\"}, {\"author\": \"kpolitowicz\", \"body\": \"Just upgraded production to 2.4.2 (from 2.3.5) and encountered this problem with regexps like:\\r\\n\\r\\n```ruby\\r\\n/(?<!<strong>)(A\\\\u2014a)(?!<\\\\/strong>)/i # SyntaxError\\r\\n/(?<!<st>)(A\\\\u2014a)(?!<\\\\/st>)/i # SyntaxError\\r\\n/(?<!<s>)(A\\\\u2014a)(?!<\\\\/s>)/i # OK\\r\\n/(?<!<sr>)(A\\\\u2014a)(?!<\\\\/sr>)/i # OK\\r\\n/(?<!<strong>)(Aa)(?!<\\\\/strong>)/i # OK\\r\\n/(?<!<strong>)(A\\\\u2014a)(?!<\\\\/strong>)/ # OK\\r\\n```\\r\\n\\r\\nIt seems the problem goes as far back as 2.4.0 (and even 2.4.0-rc). 2.3.x is okay with all of the above.\"}, {\"author\": \"kpolitowicz\", \"body\": \"I just tested Ruby 2.5 (and Ruby 2.4.3) and no improvement. Is there a chance someone will fix this soon or is it considered a non-breaking bug? Thanks!\"}, {\"author\": \"Mifrill\", \"body\": \"```\\r\\n[/(?<=accessories|ubehör)(.*?\\\\S)\\\\s{3,}/i, 1]\\r\\n```\\r\\nworks fine for ruby 2.3.3\\r\\n\\r\\nFor ruby 2.5.0-preview1\\r\\n```\\r\\nSyntaxError: /filie_name.rb:line: invalid pattern in look-behind: /(?<=accessories|ubehör):(.*?\\\\S)\\\\s{3,}/i\\r\\n```\\r\\n```\\r\\n[/(?<=capacity|ubeh.r)(.*?\\\\S)\\\\s{3,}/i, 1]\\r\\n```\\r\\nJust replace `ö`\\r\\n  \"}, {\"author\": \"BrianOn99\", \"body\": \"As @nurse mentioned, ss in some language is ß or ẞ, so the syntax tree is expanded as\\r\\n```\\r\\nPATTERN: /ss/ (UTF-8)\\r\\n<alt:56006e730450>\\r\\n   <list:56006e7304d0>\\r\\n      <alt:56006e730510>\\r\\n         <string:56006e730550>s\\r\\n         <string:56006e730590>S\\r\\n         <string:56006e730610> 0xc5 0xbf   # This is ſ\\r\\n      <string:56006e730790>s\\r\\n   <string:56006e730690> 0xc3 0x9f  # This is ß\\r\\n   <string:56006e730710> 0xe1 0xba 0x9e  # This is ẞ\\r\\n```\\r\\nequivalent to `(s|S|ſ)s | ß | ẞ`, where the second s is ignore-case `exact1-ic`\\r\\n\\r\\nNow for `(?<!ss)`, regcomp.c `setup_tree` will expand the 3 alternation as `(?<!s|S|ſ)|(?<!ß)(?<!ẞ)`.  It is necessary because the `anchor` node type need a well defined `char_len`.  Now the 3 expanded alternation each has a `char_len` of 1.\\r\\n\\r\\nSo what is the problem of `/(?<!ass)/`? /ass/ has this representation:\\r\\n```\\r\\nPATTERN: /ass/ (UTF-8)\\r\\n<list:5603f54e0450>\\r\\n   <string:5603f54e0490>a\\r\\n   <alt:5603f54e0530>\\r\\n      <list:5603f54e0570>\\r\\n         <alt:5603f54e05b0>\\r\\n            <string:5603f54e05f0>s\\r\\n            <string:5603f54e0630>S\\r\\n            <string:5603f54e06b0> 0xc5 0xbf\\r\\n         <string:5603f54e0870>s\\r\\n      <string:5603f54e0730> 0xc3 0x9f\\r\\n      <string:5603f54e07b0> 0xe1 0xba 0x9e\\r\\n```\\r\\nequivalent to `a((s|S|ſ) | ß | ẞ)`.\\r\\n\\r\\n`setup_look_behind` will not expand the alternatiion to 3 look behind if the alternation is not top level.  I think it is because it is hard to compute the `char_len`.  In this case it is still possible to suck in the `a` and expand the look behind as something like `(?<!a(s|S|ſ)s)|(?<!aß)(?<!aẞ)`, but what if the pattern is `/(?<!assssssssssssss)/`?\"}, {\"author\": \"k-takata\", \"body\": \"Sorry for the very late response, but I haven't look into this yet.\\r\\nDoes this caused by eb666b8067a80839e41f15f233d5cf1edfd22fd9? Does oniguruma have also the same problem?\"}, {\"author\": \"k-takata\", \"body\": \"It seems that oniguruma has fixed the problem in https://github.com/kkos/oniguruma/commit/257082dac8c6019198b56324012f0bd1830ff4ba.\\r\\nMaybe we need a similar change.\"}, {\"author\": \"kpolitowicz\", \"body\": \"@k-takata Late? Not even 2 years old ;) But seriously, big thanks for fixing this issue. :+9000:\\r\\n\\r\\nDo you know how long will it take for Ruby build to pick the fix up? Will it be automatically included in the next, say 2.5 or 2.6 patch?\"}, {\"author\": \"k-takata\", \"body\": \"@nurse Will you include this in Ruby 2.5 and 2.6?\"}, {\"author\": \"nurse\", \"body\": \"This will be included into Ruby 2.7, but I don't have a plan to backport this into 2.6.\"}, {\"author\": \"mauromorales\", \"body\": \"FYI, I applied this changes on top of Ruby 2.6.6 and they effectively fix the issue see https://github.com/mauromorales/ruby/commit/b2e52beeec15039d2f528e8937a510607cd58ff1\\r\\n\\r\\n@nurse Is there a way I could help you backport it to Ruby 2.6.6 or a newer version in 2.6? I also wouldn't mind doing the work for 2.7 (or any other version) I just need some guidance since I've never contributed to the ruby project.\"}, {\"author\": \"mauromorales\", \"body\": \"@nurse I just tried this in Ruby 2.7.2 and the problem persists\"}, {\"author\": \"eliotsykes\", \"body\": \"I'm commenting on this closed issue to hopefully assist other searchers who land here looking for a workaround.\\r\\n\\r\\n[Until Ruby uses the fixed version of Onigmo](https://bugs.ruby-lang.org/issues/13671#note-13), you may find replacing the `ss` with character classes `[s][s]` works, e.g.\\r\\n\\r\\n```diff\\r\\n-/(?<!ass)/i\\r\\n+/(?<!a[s][s])/i\\r\\n```\\r\\n\\r\\nTo test the patterns:\\r\\n```ruby\\r\\nbuggy_pattern = /(?<!ass)/i\\r\\nfixed_pattern = /(?<!a[s][s])/i\\r\\nunicode_str = \\\"😀\\\"\\r\\n\\r\\nunicode_str.match? buggy_pattern\\r\\n# => raises RegexpError (invalid pattern in look-behind: /(?<!ass)/i)\\r\\n\\r\\nunicode_str.match? fixed_pattern\\r\\n# => true\\r\\n```\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_94", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"94\", \"title\": \"Fail to compile when gperf 3.1 is used\", \"author\": \"k-takata\", \"labels\": [], \"description\": \"https://travis-ci.org/k-takata/Onigmo/jobs/254367559#L467\\r\\n> ./enc/unicode/name2ctype.h:36538:1: error: conflicting types for ‘uniname2ctype_p’\\r\\n> ./enc/unicode/name2ctype.h:34759:43: note: previous declaration of ‘uniname2ctype_p’ was here\\r\\n\\r\\ngperf 3.1 uses `size_t`, however gperf 3.0.4 or earlier uses `unsigned int` and `tool/enc-unicode.rb` also uses `unsigned int`. So, they conflict.\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_95", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"95\", \"title\": \"Is Copyight Date range in COPYING file correct given the use of later code from Oniguruma?\", \"author\": \"SlySven\", \"labels\": [], \"description\": \"I.e. the lines in the `COPYING` file currently:\\r\\nhttps://github.com/k-takata/Onigmo/blob/b6c0a6b81cb5c9f8899ab31c21f3c9534bc313d5/COPYING#L5\\r\\nand\\r\\nhttps://github.com/k-takata/Onigmo/blob/b6c0a6b81cb5c9f8899ab31c21f3c9534bc313d5/COPYING#L37\\r\\n\\r\\ndo not reflect the later content in `regversion.c`:\\r\\nhttps://github.com/k-takata/Onigmo/blob/b6c0a6b81cb5c9f8899ab31c21f3c9534bc313d5/regversion.c#L5\\r\\nhttps://github.com/k-takata/Onigmo/blob/b6c0a6b81cb5c9f8899ab31c21f3c9534bc313d5/regversion.c#L51\\r\\nin `win32/onigmo.rc`:\\r\\nhttps://github.com/k-takata/Onigmo/blob/b6c0a6b81cb5c9f8899ab31c21f3c9534bc313d5/win32/onigmo.rc#L76\\r\\nand in `enc/mktable.c`:\\r\\nhttps://github.com/k-takata/Onigmo/blob/b6c0a6b81cb5c9f8899ab31c21f3c9534bc313d5/enc/mktable.c#L5\\r\\nand I was hoping that those lines in the `COPYING` file (and possibly `onigmo.h`) could be fixed (set to range `2002-2016` perhaps, if that is appropriate) to clear this small matter up. 😄\\r\\n\\r\\nI regret if this sounds a bit _picky_ but I am working on a GPL Project that uses a component from a library that itself uses _Onigmo_ and I am checked that we correctly list the details of the non-GPLed code (that we _need to do so to comply with the various MIT/BSD licences terms_ as I understand it) 😇 and, having spotted this inconsistency would like to get it cleared up...\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"I have updated the copyright information in #126 to reflect the latest status.\"}, {\"author\": \"SlySven\", \"body\": \"Ah, just passing by and I think this issue can be closed off now - thanks.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_96", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"96\", \"title\": \"Matching the end of a string followed by an empty greedy regex and a word boundary (.*\\\\b) fails\", \"author\": \"jhriggs\", \"labels\": [\"bug\"], \"description\": \"For context, see https://bugs.ruby-lang.org/issues/13892.\\r\\n\\r\\nThis is a very specific regex failure that occurs when the final character of the string is matched by the end of a pattern that terminates with `.*\\\\b`. For example:\\r\\n\\r\\n```\\r\\n\\\"abc\\\" =~ /c.*\\\\b/\\r\\n\\\"abc\\\" =~ /abc.*\\\\b/\\r\\n\\\"abc\\\" =~ /\\\\b.*abc.*\\\\b/\\r\\n```\\r\\n\\r\\nIn Ruby 1.8.7 and every other language I have tested (perl, pcre, php, javascript, python, go, ...) this matches. With Oniguruma/Onigma, though, it appears that the greedy `.*` causes the `\\\\b` to fail, though it should match. I have tested this with every version of ruby >= 1.9, the included simple.c code, and php's mb_ereg(). The problem only occurs when the pattern matches at the end of the string being matched (i.e. matching against `abcd`  or `xyzabcdef` works, but `abc` or simply `c` does not). Based on my non-exhaustive testing, this only occurs with `.*\\\\b`; other patterns like `.?\\\\b` and specific characters such as `d*\\\\b` work as expected.\\r\\n\\r\\nSee also:\\r\\n* https://regex101.com/r/JBzSic/2 (PHP/PCRE, Javascript, Python, Go)\\r\\n* http://fiddle.re/gkm4ad (Go, Java, Javascript, .Net, Perl, PHP, Python, XRegExp)\\r\\n* http://java-regex-tester.appspot.com/regex/04925044-ca95-46c6-bec5-329057c04ab2 (Java)\", \"comments\": [{\"author\": \"jhriggs\", \"body\": \"Corresponding https://github.com/kkos/oniguruma/issues/70 opened for Oniguruma.\"}, {\"author\": \"k-takata\", \"body\": \"Thank you for the report. I imported the fix from Oniguruma.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_97", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"97\", \"title\": \"Performance problem with /k/i and /s/i\", \"author\": \"k-takata\", \"labels\": [], \"description\": \"Originally reported at kkos/oniguruma#71.\\r\\n\\r\\nIf a pattern is case-insensitive and it contains the letter \\\"k\\\" or \\\"s\\\", the match slows down when encoding is UTF-8.\\r\\nOnigmo uses different optimization methods for fixed strings. It uses Sunday's quick search with support for case-insensitive search instead of Boyer-Moore search (case-sensitive). However, there is a problem with the case-insensitive search. `/s/i` matches `ſ` (U+017F, LATIN SMALL LETTER LONG S) and `/k/i` matches `K` (U+212A, KELVIN SIGN) also. These characters are 2 or 3 bytes in UTF-8, so the lengths are differ from the original characters. Therefore optimization is turned off.\\r\\n\\r\\nThe actual problem is that if the pattern is `/----k/i`, the first 4 characters (`----`) should be used for optimization, however currently Onigmo totally turn of the optimization.\\r\\n\\r\\nI'm preparing a fix for this.\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_98", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"98\", \"title\": \"Add feature:  approximate (fuzzy) matching\", \"author\": \"RaiKoHoff\", \"labels\": [], \"description\": \"We decide to use Onigmo to be the regex search engine for [Notepad3](https://github.com/rizonesoft/Notepad3). It has been the winner among several other candidates.\\r\\nSome of these candidates had a nice feature, called [approximate matching](https://en.wikipedia.org/wiki/Approximate_string_matching). \\r\\nFor example [TRE](https://laurikari.net/tre/about/) or Intel's [Hyperscan](http://intel.github.io/hyperscan/dev-reference/performance.html#approximate-matching).\\r\\n\\r\\nMaybe this might be a nice feature for Onigmo too?\\r\\n\\r\\n(The dark side: There is generally a performance impact associated with approximate matching due to the reduced specificity of the matches. This impact may vary significantly depending on the pattern and edit distance.)\\r\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_100", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"100\", \"title\": \"performance regression if quantifier lower bound is 1\", \"author\": \"lopex\", \"labels\": [], \"description\": \"Commit https://github.com/k-takata/Onigmo/commit/282338f88a8bf0807a7a1d21b06f78abe9de8fac seems to prevent setting exact and map info for cases like:\\r\\n\\r\\n`/x+/ =~\\\"aaaaaaaaaaaaaaaa\\\"`\\r\\n\\r\\nor \\r\\n\\r\\n`/[b-z]+/ =~\\\"aaaaaaaaaaaaaaaa\\\"`\\r\\n\\r\\nresulting ten-fold performance  regression.\\r\\n\\r\\nThe reason is that the else clause in optitmize_node_left (quantifier case) which propagates exact/map info is not triggered.\\r\\n\\r\\nThe simplest fix seems to be to just remove the else clause.\\r\\n\\r\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"It seems that the commit 282338f88a8bf0807a7a1d21b06f78abe9de8fac doesn't improve the performance. I will revert it.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_103", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"103\", \"title\": \"Options (/i, /x, etc.) do not appear to be covered.\", \"author\": \"CaryInVictoria\", \"labels\": [], \"description\": \"Is that intentional (or did I miss that)?\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Those options should be specified with the `onig_new()` API by the `ONIG_OPTION_IGNORECASE` or `ONIG_OPTION_EXTEND` option.\\r\\nAnother way is using the `(?i)` or `(?x)` notation.\\r\\nSee `doc/API` and `doc/RE` for detail.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_106", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"106\", \"title\": \"(?(n) (?: X | Y ) ) have a bug.\", \"author\": \"tonco-miyazawa\", \"labels\": [\"bug\"], \"description\": \"(?(n) (?: X | Y ) )   and   (?(n) X | Y )   behavior is same.\\r\\n(?: ) is left out.\\r\\n\\r\\n(?(n) (?: X | Y ) | )   is nomal behavior.\\r\\nThis is a solution to a this bug problem.\\r\\n\\r\\nruby 2.5.3p105 (2018-10-18 revision 65156) [x64-mingw32] \\r\\nbregonig.dll Ver.4.12 with Onigmo 6.1.2\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"It seems difficult to fix this.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_110", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"110\", \"title\": \"Support 31bit codepoint with UTF-8\", \"author\": \"omochi\", \"labels\": [], \"description\": \"I am using Onigmo with UTF-8.\\r\\nIf I pass regex `\\\\x{7fffffff}`, Onigmo fails to compile and return `ONIGERR_TOO_BIG_WIDE_CHAR_VALUE`.\\r\\n\\r\\nIt is reasonable since UTF-8 support 21bit codepoint at most with 4 bytes.\\r\\n\\r\\nBut there are such regex in the world.\\r\\n\\r\\nhttps://github.com/Microsoft/vscode/blob/772aaf777a2e6b50c5c2e53da1a0955d2cb73a4d/extensions/php/syntaxes/php.tmLanguage.json#L26\\r\\n\\r\\nThis syntax file is problem for me actually now in my project.\\r\\n\\r\\nhttps://github.com/omochi/TMSyntax/blob/857a6fbab4d998946351c98c19d59390cabe7cca/Tests/TMSyntaxTests/TestCase/ParserTests.swift#L213\\r\\n\\r\\nI am using Swift.\\r\\nSwift is optimized for UTF-8 in C interop.\\r\\nSo I don't want to use UTF-16.\\r\\n\\r\\nIf we extend UTF-8 codec to 6 bytes,\\r\\nit can use 31bit codepoint at most.\\r\\n\\r\\nSo I want this improvement.\\r\\nBut this extension is true UTF-8.\\r\\nThere is design problem and need decision here.\\r\\nHow do you think?\\r\\n\\r\\nIf I implement this extension,\\r\\nwill you merge it?\\r\\n\\r\\n\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Oniguruma originally supported 31-bit codepoints, however Ruby limited it to 21-bit codepoints. So this is intentional. If you want to support 31-bit codepoints, some kind of configuration is needed.\"}, {\"author\": \"omochi\", \"body\": \"Thanks to response and information.\\r\\nI will try to implement it configurable by `#define`.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_120", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"120\", \"title\": \"(?i) not works properly\", \"author\": \"tengattack\", \"labels\": [\"bug\"], \"description\": \"`onig_search` failed to match such pattern:\\r\\n\\r\\npattern: `(?i) *(TOOKY)[ _\\\\-]([^;/]+) ?(?:Build|;)`\\r\\ncannot match `Mozilla/5.0 (Linux; Android 4.0.3; TOOKY A9PLUS Build/IML74K) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19`\\r\\nbut can match `Mozilla/5.0 (Linux; U; Android 2.3.4; Zh-tw; TOOKY A9 Build/GRJ22) AppleWebKit/533.1 (KHTML, Like Gecko) Version/4.0 Mobile Safari/533.1`\\r\\n\", \"comments\": [{\"author\": \"tengattack\", \"body\": \"BTW, I'm using `ONIG_ENCODING_UTF8` which caused this problem, and if I change to `ONIG_ENCODING_ASCII` there is no problem.\"}, {\"author\": \"k-takata\", \"body\": \"I found that #113 was broken. I will make a fix.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_122", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"122\", \"title\": \"How about making {n,m}+ as a possessive quantifier?\", \"author\": \"k-takata\", \"labels\": [\"spec\"], \"description\": \"Currently, `{n,m}+` is a possessive quantifier only in Java and Perl syntax.\\r\\nHow about making it as a possessive quantifier also in the default (Ruby) syntax?\", \"comments\": [{\"author\": \"nurse\", \"body\": \"It's hard to migrate because it breaks compatibility.\\r\\n```\\r\\nirb(main):001:0> /a{2,5}+b/\\r\\n=> /a{2,5}+b/\\r\\nirb(main):002:0> /a{2,5}+b/=~\\\"aaaaaaaaaaaaaaaab\\\"\\r\\n=> 0\\r\\nirb(main):003:0> $&\\r\\n=> \\\"aaaaaaaaaaaaaaaab\\\"\\r\\n```\"}, {\"author\": \"jaynetics\", \"body\": \"it would be nice for consistency and avoiding surprises.\\r\\n\\r\\nmaybe a possible route to migration could look like this?\\r\\n\\r\\n1. make it a `SyntaxError`, e.g. `possessive interval qualifiers are not enabled`\\r\\n2. everyone who is still updating will remove the effectless `+` at some point\\r\\n2. after a sufficiently long time, enable the feature\"}, {\"author\": \"patch\", \"body\": \"Here’s an example of how Perl has deprecated regex syntax in the past in order to open the door to new syntax.\\r\\n\\r\\n[perl-5.16.0](https://metacpan.org/pod/release/RJBS/perl-5.16.0/pod/perldelta.pod#Other-Future-Deprecations):\\r\\n> **Unescaped literal `\\\"{\\\"` in regular expressions.**\\r\\n> \\r\\n> Starting with v5.20, it is planned to require a literal `\\\"{\\\"` to be escaped, for example by preceding it with a backslash. In v5.18, a deprecated warning message will be emitted for all such uses. This affects only patterns that are to match a literal `\\\"{\\\"`. Other uses of this character, such as part of a quantifier or sequence as in those below, are completely unaffected:\\r\\n> \\r\\n> ```perl\\r\\n> /foo{3,5}/\\r\\n> /\\\\p{Alphabetic}/\\r\\n> /\\\\N{DIGIT ZERO}\\r\\n> ```\\r\\n> \\r\\n> Removing this will permit extensions to Perl's pattern syntax and better error checking for existing syntax. See [\\\"Quantifiers\\\" in perlre](https://metacpan.org/pod/perlre#Quantifiers) for an example.\\r\\n\\r\\n[perl-5.22.0](https://metacpan.org/pod/release/RJBS/perl-5.22.0/pod/perldelta.pod#A-literal-%22{%22-should-now-be-escaped-in-a-pattern):\\r\\n> **A literal `\\\"{\\\"` should now be escaped in a pattern**\\r\\n> \\r\\n> If you want a literal left curly bracket (also called a left brace) in a regular expression pattern, you should now escape it by either preceding it with a backslash (`\\\"\\\\{\\\"`) or enclosing it within square brackets `\\\"[{]\\\"`, or by using `\\\\Q`; otherwise a deprecation warning will be raised. This was first announced as forthcoming in the v5.16 release; it will allow future extensions to the language to happen.\\r\\n\\r\\n[perl-5.26.0](https://metacpan.org/pod/release/XSAWYERX/perl-5.26.0/pod/perldelta.pod#Unescaped-literal-%22{%22-characters-in-regular-expression-patterns-are-no-longer-permissible):\\r\\n> **Unescaped literal `\\\"{\\\"` characters in regular expression patterns are no longer permissible**\\r\\n> \\r\\n> You have to now say something like `\\\"\\\\{\\\"` or `\\\"[{]\\\"` to specify to match a LEFT CURLY BRACKET; otherwise, it is a fatal pattern compilation error. This change will allow future extensions to the language.\\r\\n> \\r\\n> These have been deprecated since v5.16, with a deprecation message raised for some uses starting in v5.22. Unfortunately, the code added to raise the message was buggy and failed to warn in some cases where it should have. Therefore, enforcement of this ban for these cases is deferred until Perl 5.30, but the code has been fixed to raise a default-on deprecation message for them in the meantime.\\r\\n> \\r\\n> Some uses of literal `\\\"{\\\"` occur in contexts where we do not foresee the meaning ever being anything but the literal, such as the very first character in the pattern, or after a `\\\"|\\\"` meaning alternation. Thus\\r\\n> \\r\\n> ```perl\\r\\n> qr/{fee|{fie/\\r\\n> ```\\r\\n> \\r\\n> matches either of the strings `{fee` or `{fie`. To avoid forcing unnecessary code changes, these uses do not need to be escaped, and no warning is raised about them, and there are no current plans to change this.\\r\\n> \\r\\n> But it is always correct to escape `\\\"{\\\"`, and the simple rule to remember is to always do so.\\r\\n> \\r\\n> See [Unescaped left brace in regex is illegal here](https://metacpan.org/pod/release/XSAWYERX/perl-5.26.0/pod/perldiag.pod#Unescaped-left-brace-in-regex-is-illegal-here-in-regex;-marked-by-%3C-HERE-in-m/%25s/).\"}, {\"author\": \"patch\", \"body\": \"[PCRE](https://www.pcre.org/current/doc/html/pcre2syntax.html#SEC9) and [ICU](http://userguide.icu-project.org/strings/regexp#TOC-Regular-Expression-Operators) also support possessive `{n,m}+`\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_129", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"129\", \"title\": \"invalid pattern compilation /(^*0m\\\\d{2}\\\\:\\\\d{2}\\\\:\\\\d{2})/\", \"author\": \"black-jack-j\", \"labels\": [], \"description\": \"/(^*0m\\\\d{2}\\\\:\\\\d{2}\\\\:\\\\d{2})/ pattern can be compiled successfully\", \"comments\": [{\"author\": \"black-jack-j\", \"body\": \"UPD: any /(^\\\\*)/ is interpreted like /(\\\\\\\\\\\\^\\\\*)/\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_130", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"130\", \"title\": \"'st_check_for_sizeof_st_index_t' declared as array with a negative size\", \"author\": \"vadi2\", \"labels\": [], \"description\": \"I'm trying to compile a library that used Onigmo with Emscripten 1.38.30 and I'm getting the following error:\\r\\n\\r\\n```\\r\\nregcomp.o 3rdparty/edbee-lib/vendor/onig/regcomp.c\\r\\nIn file included from 3rdparty/edbee-lib/vendor/onig/regcomp.c:31:\\r\\nIn file included from 3rdparty/edbee-lib/vendor/onig/regparse.h:33:\\r\\nIn file included from 3rdparty/edbee-lib/vendor/onig/regint.h:923:\\r\\n3rdparty/edbee-lib/vendor/onig/st.h:65:45: error: 'st_check_for_sizeof_st_index_t' declared as an\\r\\n      array with a negative size\\r\\ntypedef char st_check_for_sizeof_st_index_t[SIZEOF_VOIDP == (int)sizeof(st_index_t) ? 1 : -1];\\r\\n                                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\\r\\n3rdparty/edbee-lib/vendor/onig/config.h:109:22: note: expanded from macro 'SIZEOF_VOIDP'\\r\\n#define SIZEOF_VOIDP 8\\r\\n                     ^\\r\\n1 error generated.\\r\\nshared:ERROR: compiler frontend failed to generate LLVM bitcode, halting\\r\\nMakefile:36871: recipe for target 'regcomp.o' failed\\r\\n```\\r\\n\\r\\nAny ideas what could be wrong?\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"What are the definitions of `SIZEOF_LONG` and `SIZEOF_LONG_LONG` in `3rdparty/edbee-lib/vendor/onig/config.h`? Are they defined to `8`?\\r\\n`sizeof(st_index_t)` should be equal to `sizeof(void*)`, and this line (st.h L65) just checks it.\\r\\n\\r\\nIf this error occurs even if the both sizes are the same (maybe because of a compiler problem), you can comment out this line.\"}, {\"author\": \"vadi2\", \"body\": \"Yes, both are 8:\\r\\n\\r\\n```\\r\\nonig$ cat config.h | grep SIZEOF_LONG\\r\\n#define SIZEOF_LONG 8\\r\\n#define SIZEOF_LONG_LONG 8\\r\\n```\\r\\n\\r\\nSo it sounds like an Emscripten compiler problem, I will comment it out.\"}, {\"author\": \"vadi2\", \"body\": \"Is there a chance to add a workaround for it in the source? Would rather not be using a custom fork of the library.\"}, {\"author\": \"k-takata\", \"body\": \"Does Emscripten have its own definition? (like `__GNUC__`, `_MSC_VER`, etc.)\\r\\n\\r\\nActually `st.h` is imported from Ruby, so it would be better if Ruby adds a workaround for it.\"}, {\"author\": \"vadi2\", \"body\": \"`__EMSCRIPTEN__` per https://emscripten.org/docs/compiling/Building-Projects.html#detecting-emscripten-in-preprocessor. Thanks :)\"}, {\"author\": \"vadi2\", \"body\": \"Reported at https://bugs.ruby-lang.org/issues/16025.\"}, {\"author\": \"nobu\", \"body\": \"I tried building by `emcc`, but `SIZEOF_VOIDP` is 4.\\r\\nHow can I run `emcc` for 64bit binary?\"}, {\"author\": \"vadi2\", \"body\": \"`./emsdk install sdk-1.38.16-64bit` and `./emsdk activate --embedded sdk-1.38.16-64bit` (I used instructions [from Qt](https://doc.qt.io/qt-5/wasm.html)).\"}, {\"author\": \"vadi2\", \"body\": \"Sorry I didn't reply in the original bug tracker - I did select the `Watch` option (it was off by default) and yet I still didn't receive any emails about a notification.\\r\\n\\r\\nI don't know how to comment on there because there is no `Reply` button :confused: \\r\\n\\r\\nYes I'm just trying to build Onigmo that is used as part of https://github.com/edbee/edbee-lib using Emscripten.\"}, {\"author\": \"nobu\", \"body\": \"Installed and acrtivated sdk-1.38.16-64bit, then run `emsdk_env.sh`.\\r\\nSeems running the proper version.\\r\\n\\r\\n```\\r\\n$ emcc --version\\r\\nemcc (Emscripten gcc/clang-like replacement) 1.38.16 (commit e2110d88167bc0bd74affe35054d799f90dfa759)\\r\\nCopyright (C) 2014 the Emscripten authors (see AUTHORS.txt)\\r\\nThis is free and open source software under the MIT license.\\r\\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\\r\\n```\\r\\n\\r\\nBut the size of pointer is still 4.\\r\\n```\\r\\n$ emcc -E -dM -xc /dev/null | grep SIZEOF\\r\\n#define __SIZEOF_DOUBLE__ 8\\r\\n#define __SIZEOF_FLOAT__ 4\\r\\n#define __SIZEOF_INT__ 4\\r\\n#define __SIZEOF_LONG_DOUBLE__ 8\\r\\n#define __SIZEOF_LONG_LONG__ 8\\r\\n#define __SIZEOF_LONG__ 4\\r\\n#define __SIZEOF_POINTER__ 4\\r\\n#define __SIZEOF_PTRDIFF_T__ 4\\r\\n#define __SIZEOF_SHORT__ 2\\r\\n#define __SIZEOF_SIZE_T__ 4\\r\\n#define __SIZEOF_WCHAR_T__ 4\\r\\n#define __SIZEOF_WINT_T__ 4\\r\\n```\"}, {\"author\": \"nobu\", \"body\": \"Please elaborate the way to reproduce the issue.\"}, {\"author\": \"vadi2\", \"body\": \"It seems I have the same values:\\r\\n\\r\\n```\\r\\nvadi@volga:~/Programs/emsdk$ emcc --version\\r\\nemcc (Emscripten gcc/clang-like replacement) 1.38.30 (commit a51302ba20697f5251a8185cfdc72e72b14351e4)\\r\\nCopyright (C) 2014 the Emscripten authors (see AUTHORS.txt)\\r\\nThis is free and open source software under the MIT license.\\r\\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\\r\\n  \\r\\nvadi@volga:~/Programs/emsdk$ emcc -E -dM -xc /dev/null | grep SIZEOF\\r\\n#define __SIZEOF_DOUBLE__ 8\\r\\n#define __SIZEOF_FLOAT__ 4\\r\\n#define __SIZEOF_INT__ 4\\r\\n#define __SIZEOF_LONG_DOUBLE__ 8\\r\\n#define __SIZEOF_LONG_LONG__ 8\\r\\n#define __SIZEOF_LONG__ 4\\r\\n#define __SIZEOF_POINTER__ 4\\r\\n#define __SIZEOF_PTRDIFF_T__ 4\\r\\n#define __SIZEOF_SHORT__ 2\\r\\n#define __SIZEOF_SIZE_T__ 4\\r\\n#define __SIZEOF_WCHAR_T__ 4\\r\\n#define __SIZEOF_WINT_T__ 4\\r\\nvadi@volga:~/Programs/emsdk$ \\r\\n```\\r\\n\\r\\nI'm not sure what the issue is now, besides that check failing?\\r\\n\\r\\nMy emcc is newer, sorry I gave the wrong command above - copy/pasted it on autopilot.\"}, {\"author\": \"vadi2\", \"body\": \"@nobu is there anything I can provide to help you with this?\"}, {\"author\": \"vadi2\", \"body\": \"@k-takata Sorry to bother, what can I do to get the library building in Emscripten?\"}, {\"author\": \"raa0121\", \"body\": \"```\\r\\n$ ./configure\\r\\n$ CC=emcc make\\r\\n```\\r\\nThis way I got the same error.\\r\\n\\r\\n```\\r\\n$  CC=emcc ./configure\\r\\n$ make\\r\\n```\\r\\nI had a successful build this way.\\r\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_131", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"131\", \"title\": \"Python packaging\", \"author\": \"jayvdb\", \"labels\": [], \"description\": \"I see this library contains a Python wrapper, but the library isnt registered on PyPI.\\r\\nhttps://pypi.org/search/?q=onigmo\\r\\n\\r\\nWould you be interested in a `setup.py` and other packaging infrastructure to prepare this for being an installable library?\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_132", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"132\", \"title\": \"Memory corruption in onig_error_code_to_str()\", \"author\": \"RKX1209\", \"labels\": [\"bug\"], \"description\": \"When onig_new(ONIG_SYNTAX_PERL) fails with error code -215(ONIGERR_INVALID_GROUP_NAME), onig_error_code_to_str() crashes due to invalid memory access.\\r\\n\\r\\nHere is a POC code based on sample/syntax.c\\r\\n```syntax.c\\r\\n/*\\r\\n * perl_syntax.c\\r\\n */\\r\\n#include <stdio.h>\\r\\n#include <string.h>\\r\\n#include \\\"onigmo.h\\\"\\r\\n\\r\\nextern int exec(const OnigSyntaxType* syntax,\\r\\n\\t\\tchar* apattern, char* astr)\\r\\n{\\r\\n  int r;\\r\\n  unsigned char *start, *range, *end;\\r\\n  regex_t* reg;\\r\\n  OnigErrorInfo einfo;\\r\\n  OnigRegion *region;\\r\\n  UChar* pattern = (UChar* )apattern;\\r\\n  UChar* str     = (UChar* )astr;\\r\\n\\r\\n  fprintf(stderr, \\\"pattern %s (%lu)\\\\n\\\", pattern, strlen((char*)pattern));\\r\\n  r = onig_new(&reg, pattern, pattern + strlen((char* )pattern),\\r\\n\\t       ONIG_OPTION_DEFAULT, ONIG_ENCODING_ASCII, syntax, &einfo);\\r\\n  fprintf(stderr, \\\"RES: %d EINFO.ENC: %p\\\\n\\\", r, (void *)einfo.enc);\\r\\n  if (r != ONIG_NORMAL) {\\r\\n    OnigUChar s[ONIG_MAX_ERROR_MESSAGE_LEN];\\r\\n    onig_error_code_to_str(s, r, &einfo);\\r\\n    fprintf(stderr, \\\"ERROR: %s\\\\n\\\", s);\\r\\n    return -1;\\r\\n  }\\r\\n\\r\\n  region = onig_region_new();\\r\\n\\r\\n  end   = str + strlen((char* )str);\\r\\n  start = str;\\r\\n  range = end;\\r\\n  r = onig_search(reg, str, end, start, range, region, ONIG_OPTION_NONE);\\r\\n  if (r >= 0) {\\r\\n    int i;\\r\\n\\r\\n    fprintf(stderr, \\\"match at %d\\\\n\\\", r);\\r\\n    for (i = 0; i < region->num_regs; i++) {\\r\\n      fprintf(stderr, \\\"%d: (%ld-%ld)\\\\n\\\", i, region->beg[i], region->end[i]);\\r\\n    }\\r\\n    r = 0;\\r\\n  }\\r\\n  else if (r == ONIG_MISMATCH) {\\r\\n    fprintf(stderr, \\\"search fail\\\\n\\\");\\r\\n    r = -1;\\r\\n  }\\r\\n  else { /* error */\\r\\n    OnigUChar s[ONIG_MAX_ERROR_MESSAGE_LEN];\\r\\n    onig_error_code_to_str(s, r);\\r\\n    fprintf(stderr, \\\"ERROR: %s\\\\n\\\", s);\\r\\n    return -1;\\r\\n  }\\r\\n\\r\\n  onig_region_free(region, 1 /* 1:free self, 0:free contents only */);\\r\\n  onig_free(reg);\\r\\n  onig_end();\\r\\n  return r;\\r\\n}\\r\\n\\r\\n//#define CRASH_WHP\\r\\n\\r\\nextern int main(int argc, char* argv[])\\r\\n{\\r\\n  int r = 0;\\r\\n\\r\\n  #ifdef CRASH_WHP\\r\\n  /* Entire raw binary of regex which causes NULL-ptr dereference with highy possibility */  \\r\\n  char regex[] = {0x28, 0x3f, 0x30, 0x64, 0x1f, 0x03, 0x14, 0x7f};  \\r\\n  #else\\r\\n  /* Short text version of regex which causes NULL-ptr dereferecne */\\r\\n  char regex[] = \\\"(?0d\\\";\\r\\n  #endif\\r\\n  r |= exec(ONIG_SYNTAX_PERL,\\r\\n  \\t    regex,\\r\\n  \\t   \\\"bgh8x\\\");    \\r\\n  onig_end();\\r\\n  return r;\\r\\n}\\r\\n```\\r\\n```.sh\\r\\ngcc -o perl_syntax perl_syntax.c  -lonigmo\\r\\n./perl_syntax\\r\\npattern (?0d (4)\\r\\nRES: -215 EINFO.ENC: 0x7ffc07848cd0\\r\\nSegmentation fault (Core dumped)\\r\\n```\\r\\n\\r\\nI've confirmed that, after onig_new(ONIG_SYNTAX_PERL ....) failure in exec(), einfo.enc points to invalid address. \\r\\nThen onig_error_code_to_str() force to use some member of invalid einfo.enc, causes memory corruption.\\r\\n\\r\\nHere is a crash log.\\r\\nONIGENC_MBC_TO_CODE(enc, p, end)  in to_ascii() try to call address 0 (einfo.enc->mbc_to_code).\\r\\n\\r\\n```\\r\\n$ gdb -q ./perl_syntax -c core\\r\\nReading symbols from ./perl_syntax...done.\\r\\n[New LWP 26801]\\r\\nCore was generated by `./perl_syntax'.\\r\\nProgram terminated with signal SIGSEGV, Segmentation fault.\\r\\n#0  0x0000000000000000 in ?? ()\\r\\n\\r\\n(gdb) bt\\r\\n#0  0x0000000000000000 in ?? ()\\r\\n#1  0x00007f8f4b15f7fc in to_ascii (enc=0x7fff38b8e890, s=0x0,\\r\\n    end=0x7f8f4b637a98 \\\"\\\\310ycK\\\\217\\\\177\\\", buf=0x7fff38b8e700 \\\"\\\", buf_size=47,\\r\\n    is_over=0x7fff38b8e6c4) at regerror.c:219\\r\\n#2  0x00007f8f4b15fb35 in onig_error_code_to_str (s=0x7fff38b8e880 \\\"\\\", code=-215)\\r\\n    at regerror.c:281\\r\\n#3  0x000055b7122bdc40 in exec (syntax=0x55b7124bed40 <OnigSyntaxPerl>,\\r\\n    apattern=0x7fff38b8e923 \\\"(?0d\\\", astr=0x55b7122bdfd1 \\\"bgh8x\\\") at perl_syntax.c:25\\r\\n#4  0x000055b7122bdec1 in main (argc=1, argv=0x7fff38b8ea18) at perl_syntax.c:75\\r\\n\\r\\n(gdb) up\\r\\n#1  0x00007f8f4b15f7fc in to_ascii (enc=0x7fff38b8e890, s=0x0,\\r\\n    end=0x7f8f4b637a98 \\\"\\\\310ycK\\\\217\\\\177\\\", buf=0x7fff38b8e700 \\\"\\\", buf_size=47,\\r\\n    is_over=0x7fff38b8e6c4) at regerror.c:219\\r\\n219           code = ONIGENC_MBC_TO_CODE(enc, p, end);\\r\\n\\r\\n(gdb) p *enc\\r\\n$1 = {precise_mbc_enc_len = 0xffffffff, name = 0x0, max_enc_len = 951968360,\\r\\n  min_enc_len = 32767, is_mbc_newline = 0x7f8f4b637710, mbc_to_code = 0x0,\\r\\n  code_to_mbclen = 0x0, code_to_mbc = 0x0, mbc_case_fold = 0x756e6547,\\r\\n  apply_all_case_fold = 0x9, get_case_fold_codes_by_str = 0x7f8f4b410660 <dl_main>,\\r\\n  property_name_to_ctype = 0x7fff38b8e948, is_code_ctype = 0x2fba3e78dd29d900,\\r\\n  get_ctype_code_range = 0x7fff38b8e930,\\r\\n  left_adjust_char_head = 0x55b7122bdec1 <main+74>,\\r\\n  is_allowed_reverse_match = 0x7fff38b8ea18, case_map = 0x100000000,\\r\\n  ruby_encoding_index = 304865008, flags = 21943}\\r\\n\\r\\n(gdb) p enc->mbc_to_code\\r\\n$2 = (OnigCodePoint (*)(const OnigUChar *, const OnigUChar *,\\r\\n    const struct OnigEncodingTypeST *)) 0x0\\r\\n```\\r\\n\\r\\nThanks\\r\\nRen\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Thank you for reporting.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_139", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"139\", \"title\": \"Out-of-bounds read in parse_char_class()\", \"author\": \"RKX1209\", \"labels\": [], \"description\": \"When Onigmo try to parse a regular expression \\\"[{\\\\x{111111}x\\\", it causes out of bounds read in parse_char_class().\\r\\n\\r\\nHere is a POC code based on sample/syntax.c\\r\\n```perl_syntax2.c\\r\\n/*\\r\\n * perl_syntax2.c\\r\\n */\\r\\n#include <stdio.h>\\r\\n#include <string.h>\\r\\n#include \\\"onigmo.h\\\"\\r\\n\\r\\nextern int exec(const OnigSyntaxType* syntax,\\r\\n\\t\\tchar* apattern, char* astr)\\r\\n{\\r\\n  int r;\\r\\n  unsigned char *start, *range, *end;\\r\\n  regex_t* reg;\\r\\n  OnigErrorInfo einfo;\\r\\n  OnigRegion *region;\\r\\n  UChar* pattern = (UChar* )apattern;\\r\\n  UChar* str     = (UChar* )astr;\\r\\n\\r\\n  fprintf(stderr, \\\"pattern %s (%lu)\\\\n\\\", pattern, strlen((char*)pattern));\\r\\n  r = onig_new(&reg, pattern, pattern + strlen((char* )pattern),\\r\\n\\t       ONIG_OPTION_DEFAULT, ONIG_ENCODING_ASCII, syntax, &einfo);\\r\\n\\r\\n  if (r != ONIG_NORMAL) {\\r\\n    OnigUChar s[ONIG_MAX_ERROR_MESSAGE_LEN];\\r\\n    onig_error_code_to_str(s, r, &einfo);\\r\\n    fprintf(stderr, \\\"ERROR: %s\\\\n\\\", s);\\r\\n    return -1;\\r\\n  }\\r\\n\\r\\n  region = onig_region_new();\\r\\n\\r\\n  end   = str + strlen((char* )str);\\r\\n  start = str;\\r\\n  range = end;\\r\\n  r = onig_search(reg, str, end, start, range, region, ONIG_OPTION_NONE);\\r\\n  if (r >= 0) {\\r\\n    int i;\\r\\n\\r\\n    fprintf(stderr, \\\"match at %d\\\\n\\\", r);\\r\\n    for (i = 0; i < region->num_regs; i++) {\\r\\n      fprintf(stderr, \\\"%d: (%ld-%ld)\\\\n\\\", i, region->beg[i], region->end[i]);\\r\\n    }\\r\\n    r = 0;\\r\\n  }\\r\\n  else if (r == ONIG_MISMATCH) {\\r\\n    fprintf(stderr, \\\"search fail\\\\n\\\");\\r\\n    r = -1;\\r\\n  }\\r\\n  else { /* error */\\r\\n    OnigUChar s[ONIG_MAX_ERROR_MESSAGE_LEN];\\r\\n    onig_error_code_to_str(s, r);\\r\\n    fprintf(stderr, \\\"ERROR: %s\\\\n\\\", s);\\r\\n    return -1;\\r\\n  }\\r\\n\\r\\n  onig_region_free(region, 1 /* 1:free self, 0:free contents only */);\\r\\n  onig_free(reg);\\r\\n  onig_end();\\r\\n  return r;\\r\\n}\\r\\n\\r\\nextern int main(int argc, char* argv[])\\r\\n{\\r\\n  int r = 0;\\r\\n\\r\\n  char regex[] = \\\"[{\\\\\\\\x{111111}x\\\";\\r\\n\\r\\n  r |= exec(ONIG_SYNTAX_PERL,\\r\\n  \\t    regex,\\r\\n  \\t   \\\"bgh8x\\\");    \\r\\n  onig_end();\\r\\n  return r;\\r\\n}\\r\\n```\\r\\n\\r\\n```\\r\\ngcc -o perl_syntax2 perl_syntax2.c  -lonigmo\\r\\n./perl_syntax2 \\r\\npattern [{\\\\x{111111}x (13)\\r\\nSegmentation fault (core dumped)\\r\\n```\\r\\n\\r\\nHere is a crash log.\\r\\n```\\r\\n$ gdb -q ./perl_syntax2 -c core\\r\\nCore was generated by `./perl_syntax2'.                                                   \\r\\nProgram terminated with signal SIGSEGV, Segmentation fault.                               \\r\\n#0  0x00007f324371343d in next_state_val (cc=cc@entry=0x56418051b460,                     \\r\\n    asc_cc=asc_cc@entry=0x0, from=from@entry=0x7ffc2b22a988, to=120,                      \\r\\n    from_israw=from_israw@entry=0x7ffc2b22a994, to_israw=to_israw@entry=0,                \\r\\n    intype=CCV_SB, type=0x7ffc2b22a990, state=0x7ffc2b22a98c, env=0x7ffc2b22ad60)         \\r\\n    at regparse.c:4461                                                                    \\r\\n4461          BITSET_SET_BIT_CHKDUP(cc->bs, (int )(*from));                               \\r\\n(gdb) bt                                                                                  \\r\\n#0  0x00007f324371343d in next_state_val (cc=cc@entry=0x56418051b460,                     \\r\\n    asc_cc=asc_cc@entry=0x0, from=from@entry=0x7ffc2b22a988, to=120,                      \\r\\n    from_israw=from_israw@entry=0x7ffc2b22a994, to_israw=to_israw@entry=0,                \\r\\n    intype=CCV_SB, type=0x7ffc2b22a990, state=0x7ffc2b22a98c, env=0x7ffc2b22ad60)         \\r\\n    at regparse.c:4461                                                                    \\r\\n#1  0x00007f32437174e9 in parse_char_class (np=0x7ffc2b22abc0,                            \\r\\n    asc_np=asc_np@entry=0x7ffc2b22aac8, tok=tok@entry=0x7ffc2b22ac80,                     \\r\\n    src=src@entry=0x7ffc2b22ac78, end=0x7ffc2b22b1e7 \\\"\\\", env=0x7ffc2b22ad60)              \\r\\n    at regparse.c:4704                                                                    \\r\\n#2  0x00007f324371a862 in parse_exp (np=np@entry=0x7ffc2b22abc0,                          \\r\\n    tok=tok@entry=0x7ffc2b22ac80, term=term@entry=0, src=src@entry=0x7ffc2b22ac78,\\r\\n    end=end@entry=0x7ffc2b22b1e7 \\\"\\\", env=env@entry=0x7ffc2b22ad60) at regparse.c:6334\\r\\n#3  0x00007f324371cb74 in parse_branch (top=top@entry=0x7ffc2b22ac20, \\r\\n    tok=tok@entry=0x7ffc2b22ac80, term=term@entry=0, src=src@entry=0x7ffc2b22ac78, \\r\\n    end=end@entry=0x7ffc2b22b1e7 \\\"\\\", env=env@entry=0x7ffc2b22ad60) at regparse.c:6503\\r\\n#4  0x00007f324371cd14 in parse_subexp (top=top@entry=0x7ffc2b22ad18, \\r\\n    tok=tok@entry=0x7ffc2b22ac80, term=term@entry=0, src=src@entry=0x7ffc2b22ac78, \\r\\n    end=end@entry=0x7ffc2b22b1e7 \\\"\\\", env=env@entry=0x7ffc2b22ad60) at regparse.c:6549\\r\\n#5  0x00007f324371cf71 in parse_regexp (env=0x7ffc2b22ad60, end=0x7ffc2b22b1e7 \\\"\\\", \\r\\n    src=0x7ffc2b22ac78, top=0x7ffc2b22ad18) at regparse.c:6598\\r\\n#6  onig_parse_make_tree (root=root@entry=0x7ffc2b22ad18, \\r\\n    pattern=pattern@entry=0x7ffc2b22b1da \\\"[{\\\\\\\\x{111111}x\\\", end=0x7ffc2b22b1e7 \\\"\\\", \\r\\n    reg=reg@entry=0x56418051b260, env=env@entry=0x7ffc2b22ad60) at regparse.c:6643\\r\\n#7  0x00007f32437240f8 in onig_compile (reg=0x56418051b260, \\r\\n    pattern=pattern@entry=0x7ffc2b22b1da \\\"[{\\\\\\\\x{111111}x\\\", \\r\\n    pattern_end=pattern_end@entry=0x7ffc2b22b1e7 \\\"\\\", einfo=einfo@entry=0x7ffc2b22b120)\\r\\n    at regcomp.c:5659\\r\\n#8  0x00007f3243724a3b in onig_new (reg=0x7ffc2b22b0e8, \\r\\n    pattern=0x7ffc2b22b1da \\\"[{\\\\\\\\x{111111}x\\\", pattern_end=0x7ffc2b22b1e7 \\\"\\\", option=0, \\r\\n    enc=0x56417f01cca0 <OnigEncodingASCII>, syntax=0x56417f01cd40 <OnigSyntaxPerl>, \\r\\n    einfo=0x7ffc2b22b120) at regcomp.c:5887\\r\\n#9  0x000056417ee1bbe1 in exec (syntax=0x56417f01cd40 <OnigSyntaxPerl>, \\r\\n    apattern=0x7ffc2b22b1da \\\"[{\\\\\\\\x{111111}x\\\", astr=0x56417ee1bf9a \\\"bgh8x\\\")\\r\\n    at ./perl_syntax2.c:20\\r\\n#10 0x000056417ee1bea9 in main (argc=1, argv=0x7ffc2b22b2d8) at ./perl_syntax2.c:68\\r\\n```\\r\\n\\r\\nThanks\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"Thank you for the report.\\r\\nI confirmed that this happens only when a single byte encoding is used.\\r\\nI added checks for invalid codepoints.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_141", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"141\", \"title\": \"ſ(U+017F) and K(U+212A) should not be case-insensitive equivalent to S and K\", \"author\": \"dan42\", \"labels\": [], \"description\": \"The current behavior is certainly correct in some abstract Unicode-consortium perspective, but from a practical perspective, for programmers using regular expressions, it will usually produce an incorrect **and** efficient result.\\r\\n\\r\\nFor example I find the following cases problematic:\\r\\n\\r\\n`str.scan(/[a-z]/i)`\\r\\nMost programmers' notion of \\\"lowercase and uppercase alphabet\\\" does not include U+017F and U+212A.\\r\\n\\r\\n`str.scan(/\\\\w/) != str.scan(/[a-z_\\\\d]/i)`\\r\\nMost programmers would perceive these two regexes to be equivalent, except they are not.\\r\\n\\r\\n`str.scan(/<script/i)`\\r\\nMost programmers' notion of \\\"html script tag\\\" does not include `<ſcript`\\r\\n\\r\\netc.\\r\\n\\r\\nThe only people who might want `/[a-z]/i` to match U+017F are people handling Fraktur and Gaelic languages, and in any case they would use `/\\\\p{LC}/` or such.\\r\\n\\r\\nThe only people who might want `/[a-z]/i` to match U+212A are ???\\r\\n\\r\\nThese two characters are very rare, so in > 99.9% of cases programmers will never encounter a problem. This makes the very tiny number of edge cases all the more tricky. And we must still pay the de-optimization penalty in all cases because these two characters are multibyte.\\r\\n\\r\\n\\r\\nRelated to this, I believe that `/(?a:[a-z])/i` (ascii subgroup) should not match U+017F and U+212A.\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"This is the same behavior as perl:\\r\\n\\r\\n```\\r\\n$ perl -Mutf8 -e 'if (\\\"ſ\\\" =~ /(?a)s/i) {print \\\"match\\\"}'\\r\\nmatch\\r\\n```\"}, {\"author\": \"k-takata\", \"body\": \"Perl supports `/(?aa)/i`, but Onigmo doesn't support it (yet).\"}, {\"author\": \"dan42\", \"body\": \"Hmm, it looks like the onigmo/ruby default mode is like perl's ascii mode? In perl unicode mode `/\\\\d/` is same as `/\\\\p{Digit}/` but `/\\\\d/a` is like ruby `/\\\\d/`, matching only `[0-9]`. I apologize, I don't know very well the delineation between onigmo and ruby. But it looks like in ruby, `/\\\\w/` behaves like `/\\\\w/u` but differently from `/(?u)\\\\w/`. So I think that ruby enables onigmo's ascii mode by default?\\r\\n\\r\\nIt looks like the only difference between modes \\\"a\\\" and \\\"aa\\\" are those two characters. I did a search for all case-insensitive equivalences, and those were the only ones where ascii and non-ascii characters were mixed (see below). If \\\"aa\\\" mode was implemented we could push for ruby to adopt it as default mode. So please pretty please. m(_ _)m\\r\\n\\r\\n```\\r\\n[\\\"A\\\", \\\"a\\\"]\\r\\n[\\\"B\\\", \\\"b\\\"]\\r\\n[\\\"C\\\", \\\"c\\\"]\\r\\n[\\\"D\\\", \\\"d\\\"]\\r\\n[\\\"E\\\", \\\"e\\\"]\\r\\n[\\\"F\\\", \\\"f\\\"]\\r\\n[\\\"G\\\", \\\"g\\\"]\\r\\n[\\\"H\\\", \\\"h\\\"]\\r\\n[\\\"I\\\", \\\"i\\\"]\\r\\n[\\\"J\\\", \\\"j\\\"]\\r\\n[\\\"K\\\", \\\"k\\\", \\\"K\\\"]\\r\\n[\\\"L\\\", \\\"l\\\"]\\r\\n[\\\"M\\\", \\\"m\\\"]\\r\\n[\\\"N\\\", \\\"n\\\"]\\r\\n[\\\"O\\\", \\\"o\\\"]\\r\\n[\\\"P\\\", \\\"p\\\"]\\r\\n[\\\"Q\\\", \\\"q\\\"]\\r\\n[\\\"R\\\", \\\"r\\\"]\\r\\n[\\\"S\\\", \\\"s\\\", \\\"ſ\\\"]\\r\\n[\\\"T\\\", \\\"t\\\"]\\r\\n[\\\"U\\\", \\\"u\\\"]\\r\\n[\\\"V\\\", \\\"v\\\"]\\r\\n[\\\"W\\\", \\\"w\\\"]\\r\\n[\\\"X\\\", \\\"x\\\"]\\r\\n[\\\"Y\\\", \\\"y\\\"]\\r\\n[\\\"Z\\\", \\\"z\\\"]\\r\\n[\\\"µ\\\", \\\"Μ\\\", \\\"μ\\\", \\\"൜\\\", \\\"൵\\\", \\\"ർ\\\", \\\"ᵜ\\\", \\\"ᵵ\\\", \\\"ᵼ\\\", \\\"ⵜ\\\", \\\"\\\\u2D75\\\", \\\"\\\\u2D7C\\\", \\\"㵜\\\", \\\"㵵\\\", \\\"㵼\\\", \\\"䵜\\\", \\\"䵵\\\", \\\"䵼\\\", \\\"嵜\\\", \\\"嵵\\\", \\\"嵼\\\", \\\"浜\\\", \\\"浵\\\", \\\"浼\\\", \\\"絜\\\", \\\"絵\\\", \\\"絼\\\", \\\"赜\\\", \\\"赵\\\", \\\"赼\\\", \\\"鵜\\\", \\\"鵵\\\", \\\"鵼\\\", \\\"굜\\\", \\\"굵\\\", \\\"굼\\\", \\\"뵜\\\", \\\"뵵\\\", \\\"뵼\\\", \\\"최\\\", \\\"쵵\\\", \\\"쵼\\\", \\\"\\\", \\\"\\\", \\\"\\\", \\\"ﵜ\\\", \\\"ﵵ\\\", \\\"ﵼ\\\"]\\r\\n[\\\"À\\\", \\\"à\\\"]\\r\\n[\\\"Á\\\", \\\"á\\\"]\\r\\n[\\\"Â\\\", \\\"â\\\"]\\r\\n[\\\"Ã\\\", \\\"ã\\\"]\\r\\n[\\\"Ä\\\", \\\"ä\\\"]\\r\\n[\\\"Å\\\", \\\"å\\\", \\\"Å\\\"]\\r\\n[\\\"Æ\\\", \\\"æ\\\"]\\r\\n[\\\"Ç\\\", \\\"ç\\\"]\\r\\netc, all non-ascii\\r\\n```\\r\\n\"}, {\"author\": \"dan42\", \"body\": \"This is more complicated than I expected... in ruby, `/[[:alpha]]/` behaves like `/(?u)[[:alpha]]/` but differently from `/(?a)[[:alpha]]/`\\r\\n\\r\\nSo I have no idea what the defaults are anymore.\"}, {\"author\": \"dan42\", \"body\": \"After reading the code I finally managed to understand that ruby default mode `(?d)` is a mix between unicode mode `(?u)` and ascii mode `(?a)`. If mode `(?aa)` was added to Onigmo it would be possible to switch ruby default mode to a mix of `(?u)` and `(?aa)` instead.\\r\\n\\r\\nresults for (all utf8 from U+0000 to U+FFFF).grep(regexp mode + expr).size\\r\\n\\r\\n|             | (?d)  | (?u)  | (?a) | (?aa) | comment |\\r\\n|-------------|-------|-------|------|-------|----|\\r\\n| \\\\d          | 10    | 370   | 10   |       |\\r\\n| \\\\w          | 63    | 50567 | 63   |       |\\r\\n| \\\\s          | 5     | 24    | 5    |       |\\r\\n| [[:digit:]] | 370   | 370   | 10   |       |\\r\\n| [[:word:]]  | 50561 | 50561 | 63   |       |\\r\\n| [[:alpha:]] | 49655 | 49655 | 52   |       |\\r\\n| [[:blank:]] | 18    | 18    | 2    |       |\\r\\n| [[:space:]] | 24    | 24    | 5    |       |\\r\\n| [A-Za-z]    | 52    | 52    | 52   |       |\\r\\n| (?i)[a-z]   | 54    | 54    | 54   | 52    | U+017F and U+212A\\r\\n| a\\\\b         | 1     | 1     | 1    |       |\\r\\n| あ\\\\b        | 1     | 1     | 0    |       |\\r\\n| st           | 0     | 0     | 0    |       |\\r\\n| (?i)st      | 2     | 2     | 2    |  0     | ligatures U+FB05 and U+FB06\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_142", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"142\", \"title\": \"error: Linking globals named 'regerror' with Emscripten\", \"author\": \"vadi2\", \"labels\": [], \"description\": \"Continuing my quest to build Onigmo with emscripten (see https://github.com/k-takata/Onigmo/issues/130), I'm getting the following error at the linking stage:\\r\\n\\r\\n```\\r\\nshared:WARNING: emcc: cannot find library \\\"lua5.1\\\"\\r\\nshared:WARNING: emcc: cannot find library \\\"hunspell\\\"\\r\\nshared:WARNING: emcc: cannot find library \\\"pcre\\\"\\r\\nshared:WARNING: emcc: cannot find library \\\"zip\\\"\\r\\nshared:WARNING: emcc: cannot find library \\\"z\\\"\\r\\nshared:WARNING: emcc: cannot find library \\\"pugixml\\\"\\r\\nerror: Linking globals named 'regerror': symbol multiply defined!\\r\\nshared:WARNING: Note: Input file \\\"@/tmp/tmp8v4osF.response\\\" did not exist.\\r\\nshared:ERROR: Failed to run llvm optimizations: \\r\\nMakefile:1320: recipe for target 'mudlet.js' failed\\r\\nmake: *** [mudlet.js] Error 1\\r\\n```\\r\\n\\r\\nThe warnings are mine, but the confusing error, I think, comes from Onigmo - research says that Oniguruma had the same error and fixed it with an optional posix include flag: https://github.com/kkos/oniguruma/issues/77\\r\\n\\r\\nCould a similar flag be added to Onigmo, as it suffers from the same issue when building with Emscripten?\\r\\n\\r\\nThank you very much.\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_143", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"143\", \"title\": \"Memory leaks reported by Scan Coverity\", \"author\": \"edsiper\", \"labels\": [], \"description\": \"In our project, [Fluent Bit](http://github.com/fluent/fluent-bit), we use libonigmo for regex parsing. The static analysis system [Coverity](https://scan.coverity.com) reported some possible memory leaks. Would you please validate the 3 reported issues ?:\\r\\n\\r\\n### CID 156544:    (RESOURCE_LEAK)\\r\\n```\\r\\n/lib/onigmo/regcomp.c: 3680 in expand_case_fold_string()\\r\\n/lib/onigmo/regcomp.c: 3599 in expand_case_fold_string()\\r\\n/lib/onigmo/regcomp.c: 3630 in expand_case_fold_string()\\r\\n/lib/onigmo/regcomp.c: 3599 in expand_case_fold_string()\\r\\n\\r\\n*** CID 156544:    (RESOURCE_LEAK)\\r\\n/lib/onigmo/regcomp.c: 3680 in expand_case_fold_string()\\r\\n3674         Node *srem;\\r\\n3675     \\r\\n3676         r = expand_case_fold_make_rem_string(&srem, p, end, reg);\\r\\n3677         if (r != 0) goto mem_err;\\r\\n3678     \\r\\n3679         if (IS_NOT_NULL(prev_node) && IS_NULL(root)) {\\r\\n>>>     CID 156544:    (RESOURCE_LEAK)\\r\\n>>>     Overwriting \\\"top_root\\\" in \\\"top_root = root = onig_node_list_add(NULL, prev_node)\\\" leaks the storage that \\\"top_root\\\" points to.\\r\\n3680           top_root = root = onig_node_list_add(NULL_NODE, prev_node);\\r\\n3681           if (IS_NULL(root)) {\\r\\n3682            onig_node_free(srem);\\r\\n3683            onig_node_free(prev_node);\\r\\n3684            goto mem_err;\\r\\n3685           }\\r\\n/lib/onigmo/regcomp.c: 3599 in expand_case_fold_string()\\r\\n3593         len = enclen(reg->enc, p, end);\\r\\n3594     \\r\\n3595         varlen = is_case_fold_variable_len(n, items, len);\\r\\n3596         if (n == 0 || varlen == 0) {\\r\\n3597           if (IS_NULL(snode)) {\\r\\n3598            if (IS_NULL(root) && IS_NOT_NULL(prev_node)) {\\r\\n>>>     CID 156544:    (RESOURCE_LEAK)\\r\\n>>>     Overwriting \\\"top_root\\\" in \\\"top_root = root = onig_node_list_add(NULL, prev_node)\\\" leaks the storage that \\\"top_root\\\" points to.\\r\\n3599              top_root = root = onig_node_list_add(NULL_NODE, prev_node);\\r\\n3600              if (IS_NULL(root)) {\\r\\n3601                onig_node_free(prev_node);\\r\\n3602                goto mem_err;\\r\\n3603              }\\r\\n3604            }\\r\\n/lib/onigmo/regcomp.c: 3630 in expand_case_fold_string()\\r\\n3624            r = update_string_node_case_fold(reg, snode);\\r\\n3625            if (r == 0) {\\r\\n3626              NSTRING_SET_AMBIG(snode);\\r\\n3627            }\\r\\n3628           }\\r\\n3629           if (IS_NULL(root) && IS_NOT_NULL(prev_node)) {\\r\\n>>>     CID 156544:    (RESOURCE_LEAK)\\r\\n>>>     Overwriting \\\"top_root\\\" in \\\"top_root = root = onig_node_list_add(NULL, prev_node)\\\" leaks the storage that \\\"top_root\\\" points to.\\r\\n3630            top_root = root = onig_node_list_add(NULL_NODE, prev_node);\\r\\n3631            if (IS_NULL(root)) {\\r\\n3632              onig_node_free(prev_node);\\r\\n3633              goto mem_err;\\r\\n3634            }\\r\\n3635           }\\r\\n/lib/onigmo/regcomp.c: 3599 in expand_case_fold_string()\\r\\n3593         len = enclen(reg->enc, p, end);\\r\\n3594     \\r\\n3595         varlen = is_case_fold_variable_len(n, items, len);\\r\\n3596         if (n == 0 || varlen == 0) {\\r\\n3597           if (IS_NULL(snode)) {\\r\\n3598            if (IS_NULL(root) && IS_NOT_NULL(prev_node)) {\\r\\n>>>     CID 156544:    (RESOURCE_LEAK)\\r\\n>>>     Overwriting \\\"top_root\\\" in \\\"top_root = root = onig_node_list_add(NULL, prev_node)\\\" leaks the storage that \\\"top_root\\\" points to.\\r\\n3599              top_root = root = onig_node_list_add(NULL_NODE, prev_node);\\r\\n3600              if (IS_NULL(root)) {\\r\\n3601                onig_node_free(prev_node);\\r\\n3602                goto mem_err;\\r\\n3603              }\\r\\n3604            }\\r\\n```\\r\\n\\r\\n### CID 156532:  Null pointer dereferences  (FORWARD_NULL)\\r\\n```\\r\\n/lib/onigmo/regcomp.c: 1271 in compile_length_enclose_node()\\r\\n\\r\\n1265           len = SIZE_OP_PUSH_STOP_BT + tlen + SIZE_OP_POP_STOP_BT;\\r\\n1266         }\\r\\n1267         break;\\r\\n1268     \\r\\n1269       case ENCLOSE_CONDITION:\\r\\n1270         len = SIZE_OP_CONDITION;\\r\\n>>>     CID 156532:  Null pointer dereferences  (FORWARD_NULL)\\r\\n>>>     Dereferencing null pointer \\\"node->target\\\".\\r\\n1271         if (NTYPE(node->target) == NT_ALT) {\\r\\n1272           Node* x = node->target;\\r\\n1273     \\r\\n1274           tlen = compile_length_tree(NCAR(x), reg); /* yes-node */\\r\\n1275           if (tlen < 0) return tlen;\\r\\n1276           len += tlen + SIZE_OP_JUMP;\\r\\n```\\r\\n\\r\\n### CID 93270:  Null pointer dereferences  (FORWARD_NULL)\\r\\n```\\r\\n/lib/onigmo/regcomp.c: 1258 in compile_length_enclose_node()\\r\\n1252         }\\r\\n1253         break;\\r\\n1254     \\r\\n1255       case ENCLOSE_STOP_BACKTRACK:\\r\\n1256         if (IS_ENCLOSE_STOP_BT_SIMPLE_REPEAT(node)) {\\r\\n1257           QtfrNode* qn = NQTFR(node->target);\\r\\n>>>     CID 93270:  Null pointer dereferences  (FORWARD_NULL)\\r\\n>>>     Dereferencing null pointer \\\"qn\\\".\\r\\n1258           tlen = compile_length_tree(qn->target, reg);\\r\\n1259           if (tlen < 0) return tlen;\\r\\n1260     \\r\\n1261           len = tlen * qn->lower\\r\\n1262              + SIZE_OP_PUSH + tlen + SIZE_OP_POP + SIZE_OP_JUMP;\\r\\n1263         }\\r\\n```\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_144", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"144\", \"title\": \"Stack-buffer-overflow in renumber_by_map in regcomp.c\", \"author\": \"ManhNDd\", \"labels\": [], \"description\": \"I found this bug in ruby regex engine, which is in fact Onigmo regex engine. So here should be the place to report the bug.\\r\\n\\r\\n**Environment**\\r\\n```\\r\\nroot@instance-2:~/fuzz_ruby# ruby -v\\r\\nruby 2.7.0dev (2019-08-03T02:32:37Z master 688a59f8ac) [x86_64-linux]\\r\\nroot@instance-2:~/fuzz_ruby# uname -a\\r\\nLinux instance-2 4.15.0-1036-gcp #38~16.04.1-Ubuntu SMP Tue Jun 25 15:30:46 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\\r\\nroot@instance-2:~/fuzz_ruby# lsb_release -r\\r\\nRelease: 16.04\\r\\n```\\r\\n**Compilation**\\r\\n```\\r\\nCFLAGS=\\\"-ggdb\\\" AFL_USE_ASAN=1 CC=afl-clang-fast ./configure\\r\\nAFL_USE_ASAN=1 make\\r\\n```\\r\\n**Reproduce**\\r\\n```\\r\\nroot@instance-2:~/fuzz_ruby# cat test.rb\\r\\n\\\"\\\".match /(())(?<X>)((?(9)))/\\r\\nroot@instance-2:~/fuzz_ruby# ruby test.rb\\r\\n20234ERROR: AddressSanitizer: dynamic-stack-buffer-overflow on address 0x7fff65209d64 at pc 0x558d216815e6 bp 0x7fff65209cb0 sp 0x7fff65209ca8\\r\\nREAD of size 4 at 0x7fff65209d64 thread T0\\r\\n#0 0x558d216815e5 in renumber_by_map /root/fuzz_ruby/ruby_asan/regcomp.c:1963:31\\r\\n#1 0x558d2168165b in renumber_by_map /root/fuzz_ruby/ruby_asan/regcomp.c:1953:11\\r\\n#2 0x558d216600b2 in disable_noname_group_capture /root/fuzz_ruby/ruby_asan/regcomp.c:2036:7\\r\\n#3 0x558d2165d749 in onig_compile_ruby /root/fuzz_ruby/ruby_asan/regcomp.c:5773:11\\r\\n#4 0x558d21646e9f in onig_new_with_source /root/fuzz_ruby/ruby_asan/re.c:850:9\\r\\n#5 0x558d21646e9f in make_regexp /root/fuzz_ruby/ruby_asan/re.c:874\\r\\n#6 0x558d21646e9f in rb_reg_initialize /root/fuzz_ruby/ruby_asan/re.c:2857\\r\\n#7 0x558d21645059 in rb_reg_initialize_str /root/fuzz_ruby/ruby_asan/re.c:2891:11\\r\\n#8 0x558d2164739b in rb_reg_compile /root/fuzz_ruby/ruby_asan/re.c:2981:9\\r\\n#9 0x558d215bd88e in rb_parser_reg_compile /root/fuzz_ruby/ruby_asan/parse.y:11938:12\\r\\n#10 0x558d215bd88e in parser_reg_compile /root/fuzz_ruby/ruby_asan/parse.y:11932\\r\\n#11 0x558d215bd88e in reg_compile /root/fuzz_ruby/ruby_asan/parse.y:11948\\r\\n#12 0x558d2154a957 in new_regexp /root/fuzz_ruby/ruby_asan/parse.y:9894:40\\r\\n#13 0x558d2154a957 in ruby_yyparse /root/fuzz_ruby/ruby_asan/parse.y:4290\\r\\n#14 0x558d21585802 in yycompile0 /root/fuzz_ruby/ruby_asan/parse.y:5771:9\\r\\n#15 0x558d21968def in rb_suppress_tracing /root/fuzz_ruby/ruby_asan/vm_trace.c:433:11\\r\\n#16 0x558d2157fb06 in yycompile /root/fuzz_ruby/ruby_asan/parse.y:5821:5\\r\\n#17 0x558d2157fb06 in rb_parser_compile_file_path /root/fuzz_ruby/ruby_asan/parse.y:5960\\r\\n#18 0x558d2170e459 in load_file_internal /root/fuzz_ruby/ruby_asan/ruby.c:2038:11\\r\\n#19 0x558d212cf188 in rb_ensure /root/fuzz_ruby/ruby_asan/eval.c:1075:11\\r\\n#20 0x558d2170ab73 in load_file /root/fuzz_ruby/ruby_asan/ruby.c:2157:24\\r\\n#21 0x558d2170ab73 in process_options /root/fuzz_ruby/ruby_asan/ruby.c:1801\\r\\n#22 0x558d2170ab73 in ruby_process_options /root/fuzz_ruby/ruby_asan/ruby.c:2390\\r\\n#23 0x558d212c6dc4 in ruby_options /root/fuzz_ruby/ruby_asan/eval.c:118:2\\r\\n#24 0x558d212bfc8d in main /root/fuzz_ruby/ruby_asan/./main.c:42:23\\r\\n#25 0x7f343a4b182f in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2082f)\\r\\n#26 0x558d211ec298 in _start (/usr/local/bin/ruby+0x143298)\\r\\n\\r\\nAddress 0x7fff65209d64 is located in stack of thread T0\\r\\nSUMMARY: AddressSanitizer: dynamic-stack-buffer-overflow /root/fuzz_ruby/ruby_asan/regcomp.c:1963:31 in renumber_by_map\\r\\nShadow bytes around the buggy address:\\r\\n0x10006ca39350: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\\r\\n0x10006ca39360: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\\r\\n0x10006ca39370: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\\r\\n0x10006ca39380: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\\r\\n0x10006ca39390: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\\r\\n=>0x10006ca393a0: 00 00 00 00 ca ca ca ca 00 00 04 cb[cb]cb cb cb\\r\\n0x10006ca393b0: f1 f1 f1 f1 04 f3 f3 f3 00 00 00 00 00 00 00 00\\r\\n0x10006ca393c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\\r\\n0x10006ca393d0: 00 00 00 00 f1 f1 f1 f1 00 00 00 00 00 00 00 00\\r\\n0x10006ca393e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\\r\\n0x10006ca393f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\\r\\nShadow byte legend (one shadow byte represents 8 application bytes):\\r\\nAddressable: 00\\r\\nPartially addressable: 01 02 03 04 05 06 07\\r\\nHeap left redzone: fa\\r\\nFreed heap region: fd\\r\\nStack left redzone: f1\\r\\nStack mid redzone: f2\\r\\nStack right redzone: f3\\r\\nStack after return: f5\\r\\nStack use after scope: f8\\r\\nGlobal redzone: f9\\r\\nGlobal init order: f6\\r\\nPoisoned by user: f7\\r\\nContainer overflow: fc\\r\\nArray cookie: ac\\r\\nIntra object redzone: bb\\r\\nASan internal: fe\\r\\nLeft alloca redzone: ca\\r\\nRight alloca redzone: cb\\r\\n20234ABORTING\\r\\n```\\r\\nIt also crashes on default ruby version in Ubuntu 16.04 (ruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu])\\r\\n**Analysis in ruby source code**\\r\\nThe bug comes from (renumber_by_map in regcomp.c:1959):\\r\\n```\\r\\n  case NT_ENCLOSE:\\r\\n    {\\r\\n      EncloseNode* en = NENCLOSE(node);\\r\\n      if (en->type == ENCLOSE_CONDITION)\\r\\n\\ten->regnum = map[en->regnum].new_val;\\r\\n      r = renumber_by_map(en->target, map);\\r\\n    }\\r\\n```\\r\\nHere en->regnum is assigned new_val from map without checking the size of map.\\r\\nWith the input \\\"\\\".match /(())(?<X>)((?(90000)))/, map is a 5 - element array and en->regnum = 90000 => en->regnum is assigned a new_val at map[90000] => buffer-over-flow. We can control the offset of the read and control the new_val to be assigned to en->regnum.\\r\\nYou can modify N in \\\"\\\".match /(())(?<X>)((?(N)))/ until you get a crash.\\r\\nThis code is trigger only if the node is ENCLOSE_CONDITION and the following conditions are matched (regcomp.c:5769) and then disable_noname_group_capture is called:\\r\\n```\\r\\n#ifdef USE_NAMED_GROUP\\r\\n  /* mixed use named group and no-named group */\\r\\n  if (scan_env.num_named > 0 &&\\r\\n      IS_SYNTAX_BV(scan_env.syntax, ONIG_SYN_CAPTURE_ONLY_NAMED_GROUP) &&\\r\\n      !ONIG_IS_OPTION_ON(reg->options, ONIG_OPTION_CAPTURE_GROUP)) {\\r\\n    if (scan_env.num_named != scan_env.num_mem)\\r\\n      r = disable_noname_group_capture(&root, reg, &scan_env);\\r\\n```\", \"comments\": [{\"author\": \"ManhNDd\", \"body\": \"I successfully reproduce the issue in Onigmo.\\r\\n\\r\\nPoC code:\\r\\n```\\r\\n#include <stdio.h>\\r\\n#include <string.h>\\r\\n#include \\\"onigmo.h\\\"\\r\\n\\r\\nextern int main(int argc, char* argv[])\\r\\n{\\r\\n  int r;\\r\\n  unsigned char *start, *range, *end;\\r\\n  regex_t* reg;\\r\\n  OnigErrorInfo einfo;\\r\\n  OnigRegion *region;\\r\\n\\r\\n  UChar* pattern = (UChar* )argv[1];\\r\\n\\r\\n  r = onig_new(&reg, pattern, pattern + strlen((char* )pattern),\\r\\n    ONIG_OPTION_DEFAULT, ONIG_ENCODING_ASCII, ONIG_SYNTAX_RUBY, &einfo);\\r\\n  return 0;\\r\\n}\\r\\n```\\r\\nCrash:\\r\\n```\\r\\nroot@manh-ubuntu16:~/fuzz/fuzz_onigmo# valgrind ./poc-renumber_by_map '(a)(?<A>f)(?(90000))'\\r\\n==8602== Memcheck, a memory error detector\\r\\n==8602== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\\r\\n==8602== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\\r\\n==8602== Command: ./poc-renumber_by_map (a)(?\\\\<A\\\\>f)(?(90000))\\r\\n==8602== \\r\\n==8602== Invalid read of size 4\\r\\n==8602==    at 0x414D68: renumber_by_map (regcomp.c:1963)\\r\\n==8602==    by 0x414CF7: renumber_by_map (regcomp.c:1953)\\r\\n==8602==    by 0x414F9D: disable_noname_group_capture (regcomp.c:2036)\\r\\n==8602==    by 0x41CA52: onig_compile (regcomp.c:5675)\\r\\n==8602==    by 0x41D05F: onig_new (regcomp.c:5887)\\r\\n==8602==    by 0x400863: main (poc-renumber_by_map.c:18)\\r\\n==8602==  Address 0xfff057f50 is not stack'd, malloc'd or (recently) free'd\\r\\n==8602== \\r\\n==8602== \\r\\n==8602== Process terminating with default action of signal 11 (SIGSEGV)\\r\\n==8602==  Access not within mapped region at address 0xFFF057F50\\r\\n==8602==    at 0x414D68: renumber_by_map (regcomp.c:1963)\\r\\n==8602==    by 0x414CF7: renumber_by_map (regcomp.c:1953)\\r\\n==8602==    by 0x414F9D: disable_noname_group_capture (regcomp.c:2036)\\r\\n==8602==    by 0x41CA52: onig_compile (regcomp.c:5675)\\r\\n==8602==    by 0x41D05F: onig_new (regcomp.c:5887)\\r\\n==8602==    by 0x400863: main (poc-renumber_by_map.c:18)\\r\\n==8602==  If you believe this happened as a result of a stack\\r\\n==8602==  overflow in your program's main thread (unlikely but\\r\\n==8602==  possible), you can try to increase the size of the\\r\\n==8602==  main thread stack using the --main-stacksize= flag.\\r\\n==8602==  The main thread stack size used in this run was 8388608.\\r\\n==8602== \\r\\n==8602== HEAP SUMMARY:\\r\\n==8602==     in use at exit: 1,410 bytes in 18 blocks\\r\\n==8602==   total heap usage: 19 allocs, 1 frees, 1,466 bytes allocated\\r\\n==8602== \\r\\n==8602== LEAK SUMMARY:\\r\\n==8602==    definitely lost: 0 bytes in 0 blocks\\r\\n==8602==    indirectly lost: 0 bytes in 0 blocks\\r\\n==8602==      possibly lost: 0 bytes in 0 blocks\\r\\n==8602==    still reachable: 1,410 bytes in 18 blocks\\r\\n==8602==         suppressed: 0 bytes in 0 blocks\\r\\n==8602== Rerun with --leak-check=full to see details of leaked memory\\r\\n==8602== \\r\\n==8602== For counts of detected and suppressed errors, rerun with: -v\\r\\n==8602== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\\r\\nSegmentation fault (core dumped)\\r\\nroot@manh-ubuntu16:~/fuzz/fuzz_onigmo# ./poc-renumber_by_map '(a)(?<A>f)(?(90000))'\\r\\nSegmentation fault (core dumped)\\r\\nroot@manh-ubuntu16:~/fuzz/fuzz_onigmo#\\r\\n```\\r\\nIf you cannot get crash with '(a)(?<A>f)(?(90000))', you can try '(a)(?<A>f)(?(900000))', '(a)(?<A>f)(?(9000000))'...\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_146", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"146\", \"title\": \"Name2CType data wrong for many Indic scripts?\", \"author\": \"deepestblue\", \"labels\": [], \"description\": \"I found this when trying to use Ruby Regexp on Tamil Unicode codepoint data.\\r\\n\\r\\n```\\r\\nirb(main):002:0> \\\"\\\\u0BAE\\\\u0BC0\\\\u0BA9\\\\u0BCD\\\\u0BA9\\\".scan(/[[:alpha:]]+/).each { |s| puts s.dump }\\r\\n\\\"\\\\u0BAE\\\\u0BC0\\\\u0BA9\\\"\\r\\n\\\"\\\\u0BA9\\\"\\r\\n=> [\\\"மீன\\\", \\\"ன\\\"]\\r\\nirb(main):003:0>\\r\\n```\\r\\n\\r\\nNotice that both `\\\\u0BC0` and `\\\\u0BCD` are combining vowel markers in the `Mark, Nonspacing [Mn]` character category, which should match the `[:alpha:]` class. But `\\\\u0BCD` does not seem to match the class. Stackoverflow told me Ruby uses Onigmo under the hood, and I found the following except in `name2ctype.h` in `CR_Alpha`, `CR_Alnum`, etc.\\r\\n\\r\\n```\\t0x0bc6, 0x0bc8,\\r\\n\\t0x0bca, 0x0bcc,\\r\\n\\t0x0c01, 0x0c03,\\r\\n```\\r\\n\\r\\nNotice the missing `0x0bcd`.\\r\\n\\r\\nP.S. I found a number of other missing Indic codepoints as well in that file. If you agree this is a bug I can look in the file some more and do an audit. Thanks!\", \"comments\": [{\"author\": \"JoergWMittag\", \"body\": \"See [*Why do some Unicode combining markers (like \\\\u0BCD) not match [:alpha:] in Ruby?*](https://stackoverflow.com/a/59709068/2988) on Stack Overflow for a discussion, partially reproduced below:\\r\\n\\r\\nThe two characters in question are (I have marked some interesting things in **bold**):\\r\\n\\r\\n* [U+0BC0 Tamil **Vowel** Sign II](https://unicode.org/cldr/utility/character.jsp?a=0BC0), with the following (relevant) properties: \\r\\n  * [*General Category*](https://unicode.org/cldr/utility/properties.jsp?a=General_Category#General_Category): [Nonspacing Mark](https://unicode.org/cldr/utility/list-unicodeset.jsp?a=[:General_Category=Nonspacing_Mark:])\\r\\n  * [*Alphabetic*](https://unicode.org/cldr/utility/properties.jsp?a=Alphabetic#Alphabetic): Yes\\r\\n* [U+0BCD Tamil Sign Virama](https://unicode.org/cldr/utility/character.jsp?a=0BCD), with the following (relevant) properties: \\r\\n  * [*General Category*](https://unicode.org/cldr/utility/properties.jsp?a=General_Category#General_Category): [Nonspacing Mark](https://unicode.org/cldr/utility/list-unicodeset.jsp?a=[:General_Category=Nonspacing_Mark:])\\r\\n  * [*Alphabetic*](https://unicode.org/cldr/utility/properties.jsp?a=Alphabetic#Alphabetic): **No**\\r\\n\\r\\nThe [Ruby documentation for the `Regexp` class](https://ruby-doc.org/core/Regexp.html#class-Regexp-label-Character+Classes) does not explicitly spell out what `[[:alpha:]]` matches, but it does say that the *POSIX bracket expressions* match non-ASCII characters, and it gives `[[:digit:]]` as an example, saying it matches anything with the Unicode property [*Nd (Decimal Number)*](https://unicode.org/cldr/utility/list-unicodeset.jsp?a=[:General_Category=Decimal_Number:]).\\r\\n\\r\\nWhile not explicitly documented, it makes sense to equate the `Regexp` *POSIX bracket expression* `[[:alpha:]]` with the Unicode property *Alphabetic*, which would mean that U+0BC0 matches and U+0BCD doesn't.\\r\\n\\r\\nOn the other hand, [the documentation for Onigmo](https://github.com/k-takata/Onigmo/) *does* explicitly specify the workings of `[[:alpha:]]`. In fact, it specifies it in two different places, and they contradict each other:\\r\\n\\r\\n* In [`doc/RE`](https://github.com/k-takata/Onigmo/blob/master/doc/RE), it says that `[[:alpha:]]` matches [*Letter*](https://unicode.org/cldr/utility/list-unicodeset.jsp?a=[:General_Category=Letter:]) | [*Mark*](https://unicode.org/cldr/utility/list-unicodeset.jsp?a=[:General_Category=Mark:]).\\r\\n* In [`doc/UnicodeProps.txt`](https://github.com/k-takata/Onigmo/blob/master/doc/UnicodeProps.txt), it *seems* to imply that `[[:alpha:]]` matches *Alphabetic*.\\r\\n\\r\\nSo, what *seems* to be going on, is that the Unicode Consortium does *not* consider U+0BCD to be alphabetic, and therefore, Onigmo and Ruby do not classify it as `[[:alpha:]]`. In that case, the Onigmo documentation is incorrect, and the Ruby documentation is imprecise.\"}, {\"author\": \"deepestblue\", \"body\": \"Thanks, Joerg. \\r\\n\\r\\n> While not explicitly documented, it makes sense to equate the Regexp POSIX bracket expression [[:alpha:]] with the Unicode property Alphabetic, which would mean that U+0BC0 matches and U+0BCD doesn't.\\r\\n\\r\\nGiven `[[:digit:]]` matches Unicode category `Nd`, for the sake of consistency I'd rather `[[:alpha:]]` match the union of Unicode category `Letter` and Unicode category `Mark`, rather than Unicode property `Alphabetic`.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_147", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"147\", \"title\": \"`[\\\\p{Emoji}]` also matches numerical characters\", \"author\": \"hachi8833\", \"labels\": [], \"description\": \"Looks like this behavior is a bug:\\r\\nhttps://rubular.com/r/XH1SVLPKgG7eM7\\r\\n\\r\\nAs far as I see,  `[\\\\p{Emoji}]` matches only `0123456789`, and does not match any other `N` scripts such as `¼〇ⅲ៥`\\r\\n\\r\\nCould you please check this?\", \"comments\": [{\"author\": \"747\", \"body\": \"Just dropping by, but this seems a spec-conforming behavior, as described in this document:\\r\\nhttps://www.unicode.org/Public/UCD/latest/ucd/emoji/emoji-data.txt\\r\\n\\r\\nNot all emoji were added as new characters; some are just refashioning of (sequences of) existing characters.\\r\\n\\r\\n``` ruby\\r\\n\\\"0\\\".codepoints.map{ |c| sprintf(\\\"%04X\\\", c) }\\r\\n# => [\\\"0030\\\"]\\r\\n\\r\\n\\\"0️⃣\\\".codepoints.map{ |c| sprintf(\\\"%04X\\\", c) }\\r\\n# => [\\\"0030\\\", \\\"FE0F\\\", \\\"20E3\\\"] (<- \\\"0\\\" + VS16 (emoji) + keycap)\\r\\n```\\r\\n\\r\\n`\\\\p{Emoji}` represents a character that **could** be part of emoji. For matching a character that is **unambiguously** a part of emoji, `\\\\p{Emoji_Presentation}` is a better choice.\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_150", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"150\", \"title\": \"Absence operator is broken\", \"author\": \"kkos\", \"labels\": [], \"description\": \"```\\r\\np /(?~ab)/.match(\\\"abc\\\")\\r\\np /(?~abc)/.match(\\\"abc\\\")\\r\\np /(?~ab|abc)/.match(\\\"abc\\\")\\r\\n=>\\r\\n#<MatchData \\\"a\\\">\\r\\n#<MatchData \\\"ab\\\">\\r\\n#<MatchData \\\"a\\\">\\r\\n```\\r\\n\\r\\nBut\\r\\n```\\r\\np /(?~abc|ab)/.match(\\\"abc\\\")\\r\\n=>\\r\\n#<MatchData \\\"ab\\\">\\r\\n```\\r\\n\", \"comments\": [{\"author\": \"tonco-miyazawa\", \"body\": \"[PDF]  Detail of this bug. ( in Japanese )\\r\\nhttps://github.com/tonco-miyazawa/regex_etc/blob/master/MEMO_Onigmo/absense_bug_detai.pdf\"}, {\"author\": \"hmmnrst\", \"body\": \"A very simple case is `/(?~.*)/` .  It should be equivalent to empty language &empty; (or `/(?~)/`) because `/.*/` matches to `\\\"\\\"` and any string contains the empty string, but is not.\\r\\n\\r\\n```ruby\\r\\n# Using Ruby 3.1.2\\r\\nstr = \\\"abcdef\\\"\\r\\np /(?~.*)/.match(str)  #=> #<MatchData \\\"abc\\\">\\r\\n```\\r\\n\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_151", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"151\", \"title\": \"Add API to mitigate exponential backtracking (ReDoS)\", \"author\": \"fujimotos\", \"labels\": [], \"description\": \"### Problem\\r\\n\\r\\nOnigmo is a backtracking regex engine. For this reason, it can sometime\\r\\nbecome exceptionally slow, in particular, with this class of inputs:\\r\\n\\r\\n    regex : ^(a+)+$\\r\\n    string: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaab\\r\\n\\r\\nProvide a library API that can limit the amount of backtracking, so\\r\\nthat it can exit gracefully from such expensive cases.\\r\\n\\r\\n### Steps to Reproduce\\r\\n\\r\\nAttached is a simple script to reproduce this issue. You should be\\r\\nable to confirm that Onigmo hangs up with:\\r\\n\\r\\n```c\\r\\n$ cc -o sample sample.c libonigmo.a\\r\\n$ ./sample\\r\\n```\\r\\n\\r\\n### Expected Solution\\r\\n\\r\\nPCRE2 provides `pcre2_set_match_limit()` that allows callers to set a\\r\\nhard limit on recursive backtracking. If it exceeds the limit, it returns\\r\\n`PCRE_ERROR_MATCHLIMIT`, aborting the match evaluation.\\r\\n\\r\\nhttps://www.pcre.org/current/doc/html/pcre2_set_match_limit.html\\r\\n\\r\\nIt would be desriable if Onigmo provides a similar _tunable_ parameter\\r\\nas well.\\r\\n\\r\\n### Attachment (reproduciable code)\\r\\n\\r\\n```c\\r\\n#include <string.h>\\r\\n#include \\\"onigmo.h\\\"\\r\\n\\r\\nint main(void)\\r\\n{\\r\\n  unsigned char *start, *range, *end;\\r\\n  regex_t *reg;\\r\\n  OnigErrorInfo einfo;\\r\\n  OnigRegion *region;\\r\\n\\r\\n  UChar *pattern = (UChar *) \\\"^(a+)+$\\\";\\r\\n  UChar *str     = (UChar *) \\\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaab\\\";\\r\\n\\r\\n  onig_new(&reg, pattern, pattern + strlen((char *) pattern),\\r\\n    ONIG_OPTION_DEFAULT, ONIG_ENCODING_ASCII, ONIG_SYNTAX_DEFAULT,\\r\\n    &einfo);\\r\\n\\r\\n  region = onig_region_new();\\r\\n  end   = str + strlen((char *)str);\\r\\n  start = str;\\r\\n  range = end;\\r\\n  onig_search(reg, str, end, start, range, region, ONIG_OPTION_NONE);\\r\\n  return 0;\\r\\n}\\r\\n```\\r\\n\", \"comments\": [{\"author\": \"edsiper\", \"body\": \"FYI: [Fluentd](https://www.fluentd.org) and [Fluent Bit](https://fluentbit.io) relies heavily on onigmo, having this feature in place would be great.  \"}, {\"author\": \"k-takata\", \"body\": \"You can enable such check by defining `USE_COMBINATION_EXPLOSION_CHECK` in `regint.h`:\\r\\nhttps://github.com/k-takata/Onigmo/blob/a06a42b51713eeafe30a939827031c3ba79da936/regint.h#L138\"}, {\"author\": \"fujimotos\", \"body\": \"@k-takata What do you think about Kosako's comment on this thread:\\r\\n\\r\\n> If USE_COMBINATION_EXPLOSION_CHECK flag in src/regint.h enabled, it solves several patterns.\\r\\n> However, it does not solve all pattern cases and it become slow.\\r\\n> Therefore, I was not able to use it.\\r\\n> \\r\\n> https://github.com/kkos/oniguruma/issues/13#issuecomment-236370385\\r\\n\\r\\nThere is, we presume, a fair question as to how it is well trenched for production\\r\\nusage. Indeed, this flag  [seems to be deprecated in the upstream project](https://github.com/kkos/oniguruma/commit/82cdf05c).\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_152", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"152\", \"title\": \"Use of \\\\K when the string to match after \\\\K can be empty\", \"author\": \"learnbyexample\", \"labels\": [], \"description\": \"Examples shown below tested with **Ruby 2.7.1p83**. In first example, the string to match after `\\\\K` can be empty sometimes and in second example, it is always empty. When the match turns out to be empty, `\\\\K` is failing to match the immediate next match.\\r\\n\\r\\n```ruby\\r\\n# example 1\\r\\n>> ',cat,tiger,dog'.gsub(/(?<=\\\\A|,)[^,]*+/, '{\\\\0}')\\r\\n=> \\\"{},{cat},{tiger},{dog}\\\"\\r\\n# note that 'dog' is matched because previous match wasn't empty\\r\\n# but 'cat' fails to match, possibly because previous match was empty \\r\\n>> ',cat,tiger,dog'.gsub(/(?:\\\\A|,)\\\\K[^,]*+/, '{\\\\0}')\\r\\n=> \\\"{},cat,{tiger},{dog}\\\"\\r\\n\\r\\n# example 2\\r\\n>> 'abcd 123456'.gsub(/(?<=\\\\w)/, ':')\\r\\n=> \\\"a:b:c:d: 1:2:3:4:5:6:\\\"\\r\\n>> 'abcd 123456'.gsub(/\\\\w/, '\\\\0:')\\r\\n=> \\\"a:b:c:d: 1:2:3:4:5:6:\\\"\\r\\n# every second word character is failing to be matched\\r\\n>> 'abcd 123456'.gsub(/\\\\w\\\\K/, ':')\\r\\n=> \\\"a:bc:d 1:23:45:6\\\"\\r\\n```\\r\\n\\r\\nThis is different from the behavior seen with `perl`, `vim` (using `\\\\zs`) and third-party [regex](https://pypi.org/project/regex/) module in `python`.\\r\\n\\r\\n```bash\\r\\n$ echo ',cat,tiger,dog' | perl -lpe 's/(?:\\\\A|,)\\\\K[^,]*+/{$&}/g'\\r\\n{},{cat},{tiger},{dog}\\r\\n\\r\\n$ echo 'abcd 123456' | perl -lpe 's/\\\\w\\\\K/:/g'\\r\\na:b:c:d: 1:2:3:4:5:6:\\r\\n```\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_155", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"155\", \"title\": \"Support Unicode script extensions\", \"author\": \"747\", \"labels\": [], \"description\": \"Is there any plan to support the [script extensions (scx)](https://www.unicode.org/reports/tr24/#Script_Extensions) property, which allows characters to have non-singular script identities?\\r\\nIt has been available in many dynamic languages such as Perl, ~~PHP~~Python, JavaScript (recently) etc., and would greatly improve the usefulness against the real-world text.\\r\\n\\r\\nFor example, in JS after ES2018:\\r\\n\\r\\n``` javascript\\r\\n// match by script (= Ruby /[\\\\p{Hani}\\\\p{Hira}\\\\p{Kana}]+/)\\r\\n\\\"ア行〜タ行のデータ\\\".match(/[\\\\p{sc=Hani}\\\\p{sc=Hira}\\\\p{sc=Kana}]+/gu);\\r\\n// => [ \\\"ア行\\\", \\\"タ行のデ\\\", \\\"タ\\\" ]\\r\\n\\r\\n// match by script_extensions\\r\\n\\\"ア行〜タ行のデータ\\\".match(/[\\\\p{scx=Hani}\\\\p{scx=Hira}\\\\p{scx=Kana}]+/gu);\\r\\n// => [ \\\"ア行〜タ行のデータ\\\" ]\\r\\n```\\r\\n\\r\\nWhile not being the silver bullet due to the Unicode complications, it will catch most of the common pitfalls on Unicode script matching. Manually reproducing the equivalent of scx properties with the vanilla script property can often result in a non-trivial expression.\\r\\n\\r\\n``` ruby\\r\\n# implement \\\\p{scx=Hira} equivalent\\r\\n/[\\\\p{Hira}、-〃〈-】〓-〟〰-〵〷〼〽\\\\u3099-゜゠・ー﹅﹆｡-･ｰﾞﾟ]/\\r\\n```\\r\\n\\r\\nSorry if already discussed somewhere, but at least I couldn't find a relevant issue in this repository.\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_157", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"157\", \"title\": \"Captured strings of (.)(\\\\g<1>) are same\", \"author\": \"scivola\", \"labels\": [], \"description\": \"Ruby code:\\r\\n\\r\\n```rb\\r\\np /(.)(\\\\g<1>)/.match(\\\"AB\\\")\\r\\n# => #<MatchData \\\"AB\\\" 1:\\\"B\\\" 2:\\\"B\\\">\\r\\n```\\r\\n\\r\\nI expected the following result:\\r\\n\\r\\n```rb\\r\\n# => #<MatchData \\\"AB\\\" 1:\\\"A\\\" 2:\\\"B\\\">\\r\\n```\\r\\n\", \"comments\": [{\"author\": \"tonco-miyazawa\", \"body\": \"It's probably specification.\\r\\n\\r\\nExtend doc about subexpression calls #105 \\r\\nhttps://github.com/k-takata/Onigmo/pull/105/files\\r\\n\\r\\nRegex  engine \\\"oniguruma\\\" do the same behavior.\"}, {\"author\": \"tonco-miyazawa\", \"body\": \"```\\r\\np \\\"ABXY\\\".sub(/(.)\\\\g<1>(.)\\\\g<2>/,'[\\\\1][\\\\2]')\\r\\n# result: \\\"[B][Y]\\\"\\r\\n\\r\\np \\\"ABXY\\\".sub(/(?<q>.)(?<q>.)(?<n>.)(?<n>.)/,'[\\\\k<q>][\\\\k<n>]')\\r\\n# result: \\\"[B][Y]\\\"\\r\\n```\\r\\n-----------------------------------------------------------------\\r\\n```\\r\\np \\\"ABXY\\\".sub(/(.)\\\\g<2>(.)\\\\g<1>/,'[\\\\1][\\\\2]')\\r\\n# result: \\\"[Y][X]\\\"\\r\\n\\r\\np \\\"ABXY\\\".sub(/(?<q>.)(?<n>.)(?<n>.)(?<q>.)/,'[\\\\k<q>][\\\\k<n>]')\\r\\n# result: \\\"[Y][X]\\\"\\r\\n```\\r\\n\\r\\nhttps://github.com/kkos/oniguruma/blob/master/doc/RE\\r\\nline 410\\r\\n>  When backreferencing with a name that is assigned to more than one groups,\\r\\n> the last group with the name is checked first, if not matched then the\\r\\n> previous one with the name, and so on, until there is a match.\"}, {\"author\": \"tonco-miyazawa\", \"body\": \"`/(.)(\\\\g<1>)/`\\r\\neq\\r\\n`/(?<m>.)(?<t>(?<m>.))/`\\r\\n\\r\\n```\\r\\nMatchData1: \\\\k<m>    # ==B\\r\\nMatchData2: \\\\k<t>    # ==B\\r\\n```\"}, {\"author\": \"tonco-miyazawa\", \"body\": \"### Named backrefs behave differently in Perl syntax #74\\r\\n\\r\\n[https://github.com/k-takata/Onigmo/blob/master/sample/simple.c](https://github.com/k-takata/Onigmo/blob/master/sample/simple.c)\\r\\nline:16,17,20 rewrote\\r\\n\\r\\nOnigmo6.2.0 in ONIG_SYNTAX_PERL\\r\\n\\r\\n```\\r\\n\\\"(.)((?1))\\\\\\\\k<1>\\\"\\r\\n\\\"ABB\\\"\\r\\n\\r\\n[result]\\r\\nmatch at 0\\r\\n0: (0-3)\\r\\n1: (1-2)\\r\\n2: (1-2)\\r\\n```\\r\\n\\r\\n```\\r\\n\\\"(.)((?1))\\\\\\\\g{1}\\\"\\r\\n\\\"ABB\\\"\\r\\n\\r\\n[result]\\r\\nmatch at 0\\r\\n0: (0-3)\\r\\n1: (1-2)\\r\\n2: (1-2)\\r\\n```\\r\\n\\r\\n\\r\\n```\\r\\n\\\"(.)((?1))\\\\\\\\k<1>\\\"\\r\\n\\\"ABA\\\"\\r\\n\\r\\n[result] search fail\\r\\n```\\r\\n\\r\\n```\\r\\n\\\"(.)((?1))\\\\\\\\g{1}\\\"\\r\\n\\\"ABA\\\"\\r\\n\\r\\n[result] search fail\\r\\n```\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_158", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"158\", \"title\": \"An error occurred while using case-insensitive option (?i) .\", \"author\": \"Fzok4234\", \"labels\": [], \"description\": \"Regex pattern :\\r\\n`(?iu)(?>(?:)|(?:@\\\\A(?>(?<varNameFirstChar>[_\\\\p{Lu}\\\\p{Ll}\\\\p{Lt}\\\\p{Lm}\\\\p{Lo}])|(?<varNameBodyChar>(?>\\\\g<varNameFirstChar>|[\\\\p{Nd}]))|(?<varName>(?<!\\\\g<varNameBodyChar>)\\\\g<varNameFirstChar>\\\\g<varNameBodyChar>*+))))\\\\g<varName>`\\r\\n\\r\\ncf.  [https://www.maruo.co.jp/hidesoft/2/x39719_.html?a=0#39719](https://www.maruo.co.jp/hidesoft/2/x39719_.html?a=0#39719)\\r\\n\\r\\n\", \"comments\": [{\"author\": \"tonco-miyazawa\", \"body\": \">2.  正規表現のみで大文字小文字を無視。\\r\\n>      検索パターン        = `(?#hmonig)(?#lookbehind)(?iu)(?#psvarname)\\\\g<varName>`\\r\\n>      大文字/小文字の区別 = 有効\\r\\n>      結果                = エラー 122\\r\\n\\r\\nこのエラーを以下のもので回避出来ました。\\r\\n\\r\\n\\r\\n---------------- .HmJreSelect -------------------\\r\\n```\\r\\n[DllSelector]\\r\\n(?#hmonig)=hmonig.dll\\r\\n\\r\\n[ReplaceRegExp]\\r\\n(?#psvarname)=(?<varNameFirstChar>[_\\\\p{Lu}\\\\p{Ll}\\\\p{Lt}\\\\p{Lm}\\\\p{Lo}]){0}(?<varNameBodyChar>(?>\\\\g<varNameFirstChar>|\\\\p{Nd})){0}(?<varName>(?<![_\\\\p{Lu}\\\\p{Ll}\\\\p{Lt}\\\\p{Lm}\\\\p{Lo}\\\\p{Nd}])\\\\g<varNameFirstChar>\\\\g<varNameBodyChar>*+){0}\\r\\n```\\r\\n---------------- .HmJreSelect -------------------\\r\\n\\r\\n\\r\\n後ろ読み (?<! ) の中身がエラーの原因になっていたので \\\\g<> や | を 使わずに文字クラス１つにまとめて書きました。\\r\\nこの正規表現が期待通りのマッチをするのかどうかは当方には分からないのでお試し下さい。\\r\\n\\r\\n\\r\\n\\r\\n> 3.  検索ダイアログのみで大文字小文字を無視。\\r\\n>      検索パターン        = `(?#hmonig)(?#lookbehind)(?u)(?#psvarname)\\\\g<varName>`\\r\\n>      大文字/小文字の区別 = 無効\\r\\n>      結果                = エラー 217\\r\\n>\\r\\n> 4.  検索ダイアログと正規表現の両方で大文字小文字を無視。\\r\\n>      検索パターン        = `(?#hmonig)(?#lookbehind)(?iu)(?#psvarname)\\\\g<varName>`\\r\\n>      大文字/小文字の区別 = 無効\\r\\n>      結果                = エラー 217\\r\\n\\r\\n上記の .HmJreSelect でもこの２つのエラーは改善されません。\\r\\nつまり上記の .HmJreSelect は\\r\\n\\r\\n`大文字/小文字の区別 = 有効`\\r\\n\\r\\n..の場合のみ使えます。 このエラーが何故出るのかは秀丸エディタのユーザーでない自分には分かりません。\\r\\n\\r\\n上記の正規表現では {0} を使った定義に書き換えていますが、元の正規表現でも (?<! ) の中身を同じものに\\r\\n書き換えるだけで  「エラー 122」  は出なくなります。\"}, {\"author\": \"Fzok4234\", \"body\": \"Thank you for providing the solution.\\r\\nHowever, since we will have to write the same pattern `_\\\\p{Lu}\\\\p{Ll}\\\\p{Lt}\\\\p{Lm}\\\\p{Lo}` multiple times, it will hinder maintenance. Therefore, we will use it as a temporary measure.\\r\\n\"}, {\"author\": \"tonco-miyazawa\", \"body\": \"同じものを1回書くだけで済むようにしてみました、戻り読み (?<! ) の代わりに \\\\K を使っています。\\r\\n\\r\\n```\\r\\n[DllSelector]\\r\\n(?#hmonig)=hmonig.dll\\r\\n\\r\\n[ReplaceRegExp]\\r\\n(?#psvarname)=(?<varNameFirstChar>[_\\\\p{Lu}\\\\p{Ll}\\\\p{Lt}\\\\p{Lm}\\\\p{Lo}]){0}(?<varNameBodyChar>(?>\\\\g<varNameFirstChar>|[\\\\p{Nd}])){0}(?<varName>(?:^|(?!\\\\g<varNameBodyChar>).\\\\K)\\\\g<varNameFirstChar>\\\\g<varNameBodyChar>*+){0}\\r\\n```\\r\\n\\r\\n検索ダイアログに以下のものを入力して検索した場合、\\r\\n\\r\\n`(?#hmonig)(?#lookbehind)(?iu)(?#psvarname)\\\\g<varName>`\\r\\n\\r\\n\\r\\n展開された正規表現は以下のようになります。( 改行とタブを入れて見やすくしています )\\r\\n\\r\\n```\\r\\n(?iu)\\r\\n\\r\\n(?<varNameFirstChar>\\r\\n\\t[_\\\\p{Lu}\\\\p{Ll}\\\\p{Lt}\\\\p{Lm}\\\\p{Lo}]\\r\\n){0}\\r\\n\\r\\n(?<varNameBodyChar>\\r\\n\\t(?>\\r\\n\\t\\t\\\\g<varNameFirstChar>\\r\\n\\t|\\r\\n\\t\\t[\\\\p{Nd}]\\r\\n\\t)\\r\\n){0}\\r\\n\\r\\n(?<varName>\\r\\n\\t(?:\\r\\n\\t\\t^\\r\\n\\t|\\r\\n\\t\\t(?!\\\\g<varNameBodyChar>).\\\\K\\r\\n\\t)\\r\\n\\t\\\\g<varNameFirstChar>\\r\\n\\t\\\\g<varNameBodyChar>*+\\r\\n){0}\\r\\n\\r\\n\\\\g<varName>\\r\\n```\\r\\n\\r\\n本来は \\\\G も使えばヒットする単語が2個以上連続している場合でも正しくマッチさせられるのですが\\r\\n秀丸の検索ダイアログにある「上検索」「下検索」ボタンを押したときの挙動が変わってしまうので使うのをやめました。\\r\\n\\r\\n「上検索」「下検索」ボタンを押したときの \\\\G は検索開始位置にもマッチする仕様になっているようで、\\r\\n本来はマッチさせたくない位置にもマッチしてしまいます。\\r\\n\\r\\n「上検索」「下検索」ボタンを使うことが無く、強調表示のみに使う目的ならば正規表現に \\\\G を使えます。\\r\\nその場合は以下のように \\\\G のための分岐を追加して下さい。\\r\\n\\r\\n```\\r\\n\\t(?:\\r\\n\\t\\t^\\r\\n\\t|\\r\\n\\t\\t\\\\G\\r\\n\\t|\\r\\n\\t\\t(?!\\\\g<varNameBodyChar>).\\\\K\\r\\n\\t)\\r\\n```\\r\\n\\r\\n※ このカッコを  (?> )  にすると挙動が変わってしまうのでご注意下さい。\\r\\n\\r\\n\\r\\nこの \\\\K を使った正規表現は秀丸の設定から直接 hmonig.dll を指定した場合には \\\"エラー217\\\" は出ませんが、\\r\\n HmJreSelect.dll を経由させると  `大文字/小文字の区別 = 無効`  の場合に \\\"エラー217\\\" が出ます。\\r\\n\\r\\nOnigmo の \\\\K には #152 で報告されている不具合がありますが、今回の正規表現はその影響を受けません。\\r\\n( \\\\K の後ろに続く正規表現がゼロ幅マッチをすると次の検索開始位置が１つ進んでしまう不具合があります )\\r\\n( フォーク元の oniguruma の \\\\K にはこの不具合はありません )\\r\\n\\r\\n(?<! )  と /i  の組み合わせによる不具合は過去にもありました。 ( #92 )\"}, {\"author\": \"Fzok4234\", \"body\": \"For the time being, we have avoided using `\\\\K` in any definition of `(?<varName>)` sub-expression. Because, these sub-expression call will not work properly in the atomic group `(?>)` like the following example.\\r\\n    `(?<token>(?>(?:\\\\$\\\\g<varName>)|\\\\g<numeric>|(\\\\((?:\\\\g<space>\\\\g<token>)*+\\\\g<space>\\\\))))`\\r\\nTherefore, we are not free to use any atomic group `(?>)` for speedup, if the `\\\\K` is mixed in with any of the definitions of `(?<>)` sub-expression.\\r\\n\"}, {\"author\": \"tonco-miyazawa\", \"body\": \"> `\\\\$\\\\g<varName>`\\r\\n\\r\\n`\\\\g<varName>`  をこのように使うことは想定していませんでした。\\r\\n`\\\\g<varName>` に含まれる \\\\K がマッチした場合、それ以前にマッチした文字列が捨てられてしまいます。\\r\\nそのため、\\\"$\\\" はマッチした文字列から除かれてしまう可能性があります。\\r\\n\\r\\nまた、 \\\\K の直前にある \\\".\\\"  にマッチすることが必要なため、\\\"$\\\"  と変数名の間に、名前とは\\r\\n無関係な1文字へのマッチが必要になります。 このため、あなたがマッチさせたいと思う変数名にマッチ出来ません。\\r\\n\\r\\n`\\\\g<token>`  の再帰的な処理の中で、 ` \\\\g<varName>`  の中の \\\\K がマッチした場合も同様です。\\r\\nこれは破壊的な動作になるでしょう。\\r\\n\\r\\nあなたの書き込みの中に  `\\\\g<>`  が登場した時、私はこの使い方に気付くべきでした、すみません。\\r\\n\\r\\n\\r\\n従って、最善の対策は私が最初のコメントに書いた対策になるでしょう。\\r\\n\\r\\n対策はもう１つあり、Hidemaru のDLLの設定から hmonig.dll を直接指定して使う方法があります。\\r\\nそして `(?iu)` を使わずに `(?u)` を使い、検索ダイアログから   `大文字/小文字の区別 = 無効`   を選びます。\\r\\n\\r\\nただし、このときの動作はあなたが期待する動作になるか、そうでないか、それは私には分かりません。\\r\\n\\r\\n-----------------------------------------------------------------------------\\r\\n\\r\\n# The point of this issue\\r\\n\\r\\n// This is OK.\\r\\n```\\r\\n(?ui)\\r\\n(?<!\\r\\n\\t[\\\\p{Lu}]\\r\\n)\\r\\n```\\r\\n\\r\\n\\r\\n// But, This is an error.\\r\\n```\\r\\n(?ui)\\r\\n(?<name>\\r\\n\\t[\\\\p{Lu}]\\r\\n){0}\\r\\n(?<!\\r\\n\\t\\\\g<name>\\r\\n)\\r\\n```\\r\\n\\r\\nIt violates the character limit of  `(?<! )` when going through `\\\\g<>`.\\r\\nThis issue is not in oniguruma.\\r\\n\\r\\n\\r\\n# Workaround (1)\\r\\n\\r\\n// Apply option \\\"`(?-i)`\\\"\\r\\n```\\r\\n(?ui)\\r\\n(?<name>\\r\\n\\t(?-i)\\r\\n\\t[\\\\p{Lu}\\\\p{Ll}]\\r\\n\\t(?i)\\r\\n){0}\\r\\n(?<!\\r\\n\\t\\\\g<name>\\r\\n)\\r\\n```\\r\\n\\r\\n\\r\\n# Workaround (2)\\r\\n\\r\\n// Don't use `\\\\g<>`.\\r\\n```\\r\\n(?ui)\\r\\n(?<!\\r\\n\\t[\\\\p{Lu}]\\r\\n)\\r\\n```\\r\\n\\r\\n\\r\\n\\r\\n# Another pattern that violates the character limit  of  `(?<! )` \\r\\n\\r\\n// This is an error.\\r\\n```\\r\\n(?ui)\\r\\n(?<!\\r\\n\\t[\\\\p{Lu}\\\\p{Ll}\\\\p{Lt}]\\r\\n|\\r\\n\\t[\\\\p{Nd}]\\r\\n)\\r\\n```\\r\\n\\r\\n// The above workaround.\\r\\n```\\r\\n(?ui)\\r\\n(?<!\\r\\n\\t[\\\\p{Lu}\\\\p{Ll}\\\\p{Lt}]\\r\\n)\\r\\n(?<!\\r\\n\\t[\\\\p{Nd}]\\r\\n)\\r\\n```\\r\\n\\r\\nor\\r\\n\\r\\n```\\r\\n(?ui)\\r\\n(?<!\\r\\n\\t[\\\\p{Lu}\\\\p{Ll}\\\\p{Lt}\\\\p{Nd}]\\r\\n)\\r\\n```\\r\\n\\r\\n# Related links\\r\\n \\\"ss\\\" in look-behind raises syntax error #92 \\r\\n ſ(U+017F) and K(U+212A) should not be case-insensitive equivalent to S and K #141 \"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_159", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"159\", \"title\": \"A deficient regex pattern causes app to freeze .\", \"author\": \"Fzok4234\", \"labels\": [], \"description\": \"Regex pattern :\\r\\n`(?u)(?>(?:)*+|)`\\r\\n\\r\\ncf. [https://www.maruo.co.jp/hidesoft/2/x39708_.html#39708](https://www.maruo.co.jp/hidesoft/2/x39708_.html#39708)\\r\\n\\r\\n\", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_160", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"160\", \"title\": \"Separating or excluding the regcomp/regexec/regerror functions from the library.\", \"author\": \"pem\", \"labels\": [], \"description\": \"The POSIX compatibility functions regcomp, regexec and regerror are included in the Onigmo library.\\r\\nThere doesn't seem to be any way to avoid this without patching the code or build scripts. If there is one, please advice, we haven't found it.\\r\\n\\r\\nThis is a problem for us. We have a large application with lots of libraries, some of which uses the standard library functions regcomp et al, but we also use the Onigmo library (the native functions) in some places. If library A used regomp, and library B uses the native Onigmo functions, and both are linked in the same binary, A will use the functions in the Onigmo library, not the standard library versions. You might argue the it shouldn't matter, but it does for us. It's important that we know exactly which function is used. Or to put it differently, we want regcomp to mean the standard library function and nothing else, everywhere.\\r\\n\\r\\nWe can work around this by patching Makefile.in before building, but we would prefer if there was a supported way to do this.\\r\\nEither\\r\\n- A configure option to exclude the regcomp etc from the build completely\\r\\n- Put regcomp etc in a separate library\\r\\n\\r\\nEither method would be ok.\\r\\n \", \"comments\": []}"}]}}
{"custom_id": "k-takata_Onigmo_issue_162", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"162\", \"title\": \"Windows | fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory\", \"author\": \"drophouse01\", \"labels\": [], \"description\": \"Hi @k-takata, thanks for the lib. while I was trying to build the lib, I faced this error on Windows 10 (64-bit operating system, x64-based processor).\\r\\n\\r\\n```\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file regcomp.c)\\r\\nregtrav.c\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file reggnu.c)\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file regext.c)\\r\\nst.c\\r\\nregposix.c\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file regparse.c)\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file regenc.c)\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file regerror.c)\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file regexec.c)\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file regsyntax.c)\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file regtrav.c)\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file st.c)\\r\\nOnigmo\\\\regint.h(235): fatal error C1083: Cannot open include file: 'alloca.h': No such file or directory (compiling source file regposix.c)\\r\\nNMAKE : fatal error U1077: '\\\"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2019\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.26.28801\\\\bin\\\\HostX86\\\\x86\\\\cl.EXE\\\"' : return code '0x2'\\r\\nStop.\\r\\n```\", \"comments\": [{\"author\": \"k-takata\", \"body\": \"`alloca.h` will be included only when `HAVE_ALLOCA_H` is defined. It is not defined in `win32/config.h`. Do you define it somewhere else?\"}, {\"author\": \"drophouse01\", \"body\": \"So, I resolved this problem. I had downloaded it as a code form a lib. It was build on Linux so I guess, the config file was from there. Now I'm receiving these errors on running cmake.\\r\\n\\r\\n```\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(41,8): error C2040: 'OnigEncDefaultCharEncoding': 'int' differs in levels of indirection from 'OnigEncoding' [C:\\\\Users\\\\Sahaj\\\\AndroidStudi\\r\\noProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(41,8): error C2099: initializer is not a constant [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(42,1): error C2040: 'onigenc_get_default_encoding': 'int (void)' differs in levels of indirection from 'OnigEncoding (void)' [C:\\\\Users\\\\Sa\\r\\nhaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(44,36): warning C4047: 'return': 'int' differs in levels of indirection from 'OnigEncoding' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter\\r\\n_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(48,30): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(48,30): warning C4273: 'onigenc_set_default_encoding': inconsistent dll linkage [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\r\\n\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(414,5): message : see previous definition of 'onigenc_set_default_encoding' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\bui\\r\\nld\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(48,30): error C2072: 'onigenc_set_default_encoding': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\li\\r\\nbs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(48,46): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(49,1): error C2054: expected '(' to follow 'enc' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(55,67): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(55,67): error C2081: 'OnigEncDefaultCharEncoding': name in formal parameter list illegal [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_ed\\r\\nitor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(55,67): warning C4028: formal parameter 3 different from declaration [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onig\\r\\nmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(55,67): warning C4273: 'onigenc_mbclen_approximate': inconsistent dll linkage [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\b\\r\\nuild\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(359,5): message : see previous definition of 'onigenc_mbclen_approximate' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\r\\n\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(55,67): error C2072: 'onigenc_mbclen_approximate': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\r\\n\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(55,83): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(56,1): error C2054: expected '(' to follow 'enc' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,36): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,1): error C2371: 'onigenc_get_right_adjust_char_head': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutt\\r\\ner_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(424): message : see declaration of 'onigenc_get_right_adjust_char_head' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\o\\r\\nnigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,36): error C2072: 'onigenc_get_right_adjust_char_head': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_edi\\r\\ntor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,60): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,65): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPro\\r\\njects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,65): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,80): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,85): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPro\\r\\njects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,85): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,96): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,101): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,101): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(66,106): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(67,1): error C2054: expected '(' to follow 'end' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(76,46): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(76,1): error C2371: 'onigenc_get_right_adjust_char_head_with_prev': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProj\\r\\nects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(418): message : see declaration of 'onigenc_get_right_adjust_char_head_with_prev' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\li\\r\\nbs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(76,46): error C2072: 'onigenc_get_right_adjust_char_head_with_prev': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\f\\r\\nlutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,14): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,19): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPro\\r\\njects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,19): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,34): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,39): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPro\\r\\njects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,39): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,50): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,55): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPro\\r\\njects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,55): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,68): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,73): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPro\\r\\njects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,73): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(77,80): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(78,1): error C2054: expected '(' to follow 'prev' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,28): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,1): error C2371: 'onigenc_get_prev_char_head': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_edito\\r\\nr\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(420): message : see declaration of 'onigenc_get_prev_char_head' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib\\r\\n.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,28): error C2072: 'onigenc_get_prev_char_head': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\r\\n\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,52): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,57): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPro\\r\\njects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,57): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,72): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,77): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPro\\r\\njects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,77): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,88): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\oni\\r\\ngmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,93): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPro\\r\\njects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,93): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(92,98): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(93,1): error C2054: expected '(' to follow 'end' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,19): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,1): error C2371: 'onigenc_step_back': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\b\\r\\nuild\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(407): message : see declaration of 'onigenc_step_back' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,19): error C2072: 'onigenc_step_back': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\o\\r\\nnigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,43): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,48): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,48): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,63): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,68): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,68): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,79): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,84): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,84): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,95): error C2059: syntax error: 'type' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(101,96): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,14): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,1): error C2371: 'onigenc_step': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\\\r\\nonigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.h(208): message : see declaration of 'onigenc_step' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,14): error C2072: 'onigenc_step': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmo\\r\\nlib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,38): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,43): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,43): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,54): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,59): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,59): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,70): error C2059: syntax error: 'type' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(113,71): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,16): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,16): warning C4273: 'onigenc_strlen': inconsistent dll linkage [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmo\\r\\nlib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(426,5): message : see previous definition of 'onigenc_strlen' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.v\\r\\ncxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,16): error C2072: 'onigenc_strlen': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onig\\r\\nmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,40): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,45): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,45): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,56): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,61): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,61): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(123,66): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(124,1): error C2054: expected '(' to follow 'end' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(136,21): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(136,21): warning C4273: 'onigenc_strlen_null': inconsistent dll linkage [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\o\\r\\nnigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(428,5): message : see previous definition of 'onigenc_strlen_null' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmo\\r\\nlib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(136,21): error C2072: 'onigenc_strlen_null': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\r\\n\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(136,45): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(136,50): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(136,50): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(136,53): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(137,1): error C2054: expected '(' to follow 's' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(163,26): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(163,26): warning C4273: 'onigenc_str_bytelen_null': inconsistent dll linkage [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\bu\\r\\nild\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(430,5): message : see previous definition of 'onigenc_str_bytelen_null' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\o\\r\\nnigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(163,26): error C2072: 'onigenc_str_bytelen_null': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\\\r\\nbuild\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(163,50): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(163,55): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(163,55): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(163,58): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(164,1): error C2054: expected '(' to follow 's' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(188,44): warning C4273: 'OnigEncAsciiToLowerCaseTable': inconsistent dll linkage [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\lib\\r\\ns\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.h(214,26): message : see previous definition of 'OnigEncAsciiToLowerCaseTable' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\bu\\r\\nild\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(260,50): warning C4273: 'OnigEncAsciiCtypeTable': inconsistent dll linkage [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\buil\\r\\nd\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.h(216,34): message : see previous definition of 'OnigEncAsciiCtypeTable' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(295,53): warning C4273: 'OnigEncISO_8859_1_ToLowerCaseTable': inconsistent dll linkage [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_edit\\r\\nor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.h(200,25): message : see previous definition of 'OnigEncISO_8859_1_ToLowerCaseTable' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\l\\r\\nibs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,35): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,1): error C2371: 'onigenc_get_left_adjust_char_head': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutt\\r\\ner_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(422): message : see declaration of 'onigenc_get_left_adjust_char_head' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,35): error C2072: 'onigenc_get_left_adjust_char_head': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_edi\\r\\ntor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,59): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,64): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,64): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,79): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,84): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioPr\\r\\nojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,84): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxp\\r\\nroj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,95): error C2371: 'OnigUChar': redefinition; different basic types [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\on\\r\\nigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\onigmo.h(79): message : see declaration of 'OnigUChar' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,100): warning C4228: nonstandard extension used: qualifiers after comma in declarator list are ignored [C:\\\\Users\\\\Sahaj\\\\AndroidStudioP\\r\\nrojects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,100): error C2143: syntax error: missing ';' before '*' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcx\\r\\nproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(377,105): error C2059: syntax error: ')' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(378,1): error C2054: expected '(' to follow 'end' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(414,7): error C2143: syntax error: missing ')' before '=' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onigmolib.vcxpr\\r\\noj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(414,7): error C2081: 'OnigEncDefaultCharEncoding': name in formal parameter list illegal [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_ed\\r\\nitor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(414,7): warning C4028: formal parameter 4 different from declaration [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\onig\\r\\nmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(414,7): warning C4273: 'onigenc_ascii_apply_all_case_fold': inconsistent dll linkage [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\r\\n\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.h(144,17): message : see previous definition of 'onigenc_ascii_apply_all_case_fold' [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\li\\r\\nbs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(414,7): error C2072: 'onigenc_ascii_apply_all_case_fold': initialization of a function [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_edit\\r\\nor\\\\libs\\\\build\\\\onigmolib.vcxproj]\\r\\nC:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\Onigmo\\\\regenc.c(414,7): fatal error C1003: error count exceeds 100; stopping compilation [C:\\\\Users\\\\Sahaj\\\\AndroidStudioProjects\\\\flutter_editor\\\\libs\\\\build\\\\\\r\\nonigmolib.vcxproj]\\r\\n```\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_169", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"169\", \"title\": \"Fails to build with gcc15\", \"author\": \"mikelolasagasti\", \"labels\": [], \"description\": \"Output form a fresh Fedora 42 container:\\n\\n~~~\\nlibtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I/usr/local/include -I./enc/unicode -Wall -Wno-incompatible-pointer-types -MT st.lo -MD -MP -MF .deps/st.Tpo -c st.c  -fPIC -DPIC -o .libs/st.o\\nst.c: In function 'do_hash':\\nst.c:327:43: error: too many arguments to function 'tab->type->hash'; expected 0, have 1\\n  327 |     st_hash_t hash = (st_hash_t)(tab->type->hash)(key);\\n      |                                 ~~~~~~~~~~^~~~~~~ ~~~\\nIn file included from regint.h:930,\\n                 from st.c:106:\\nst.h:70:18: note: declared here\\n   70 |     st_index_t (*hash)(ANYARGS /*st_data_t*/);        /* st_hash_func* */\\n      |                  ^~~~\\nst.c: In function 'find_entry':\\nst.c:180:40: error: too many arguments to function '(int (*)(void))tab->type->compare'; expected 0, have 2\\n  180 | #define EQUAL(tab,x,y) ((x) == (y) || (*(tab)->type->compare)((x),(y)) == 0)\\n      |                                       ~^~~~~~~~~~~~~~~~~~~~~~ ~~~\\nst.c:182:35: note: in expansion of macro 'EQUAL'\\n  182 |     ((ptr)->hash == (hash_val) && EQUAL((tab), (key_), (ptr)->key))\\n      |                                   ^~~~~\\nst.c:189:15: note: in expansion of macro 'PTR_EQUAL'\\n  189 |         res = PTR_EQUAL(tab, ptr, hash_val, key);                   \\\\\\n      |               ^~~~~~~~~\\nst.c:889:9: note: in expansion of macro 'DO_PTR_EQUAL_CHECK'\\n  889 |         DO_PTR_EQUAL_CHECK(tab, &entries[i], hash_value, key, eq_p, rebuilt_p);\\n      |         ^~~~~~~~~~~~~~~~~~\\nst.c: In function 'find_table_entry_ind':\\nst.c:180:40: error: too many arguments to function '(int (*)(void))tab->type->compare'; expected 0, have 2\\n  180 | #define EQUAL(tab,x,y) ((x) == (y) || (*(tab)->type->compare)((x),(y)) == 0)\\n      |                                       ~^~~~~~~~~~~~~~~~~~~~~~ ~~~\\nst.c:182:35: note: in expansion of macro 'EQUAL'\\n  182 |     ((ptr)->hash == (hash_val) && EQUAL((tab), (key_), (ptr)->key))\\n      |                                   ^~~~~\\nst.c:189:15: note: in expansion of macro 'PTR_EQUAL'\\n  189 |         res = PTR_EQUAL(tab, ptr, hash_val, key);                   \\\\\\n      |               ^~~~~~~~~\\nst.c:931:13: note: in expansion of macro 'DO_PTR_EQUAL_CHECK'\\n  931 |             DO_PTR_EQUAL_CHECK(tab, &entries[bin - ENTRY_BASE], hash_value, key, eq_p, rebuilt_p);\\n      |             ^~~~~~~~~~~~~~~~~~\\nst.c: In function 'find_table_bin_ind':\\nst.c:180:40: error: too many arguments to function '(int (*)(void))tab->type->compare'; expected 0, have 2\\n  180 | #define EQUAL(tab,x,y) ((x) == (y) || (*(tab)->type->compare)((x),(y)) == 0)\\n      |                                       ~^~~~~~~~~~~~~~~~~~~~~~ ~~~\\nst.c:182:35: note: in expansion of macro 'EQUAL'\\n  182 |     ((ptr)->hash == (hash_val) && EQUAL((tab), (key_), (ptr)->key))\\n      |                                   ^~~~~\\nst.c:189:15: note: in expansion of macro 'PTR_EQUAL'\\n  189 |         res = PTR_EQUAL(tab, ptr, hash_val, key);                   \\\\\\n      |               ^~~~~~~~~\\nst.c:978:13: note: in expansion of macro 'DO_PTR_EQUAL_CHECK'\\n  978 |             DO_PTR_EQUAL_CHECK(tab, &entries[bin - ENTRY_BASE], hash_value, key, eq_p, rebuilt_p);\\n      |             ^~~~~~~~~~~~~~~~~~\\nst.c: In function 'find_table_bin_ptr_and_reserve':\\nst.c:180:40: error: too many arguments to function '(int (*)(void))tab->type->compare'; expected 0, have 2\\n  180 | #define EQUAL(tab,x,y) ((x) == (y) || (*(tab)->type->compare)((x),(y)) == 0)\\n      |                                       ~^~~~~~~~~~~~~~~~~~~~~~ ~~~\\nst.c:182:35: note: in expansion of macro 'EQUAL'\\n  182 |     ((ptr)->hash == (hash_val) && EQUAL((tab), (key_), (ptr)->key))\\n      |                                   ^~~~~\\nst.c:189:15: note: in expansion of macro 'PTR_EQUAL'\\n  189 |         res = PTR_EQUAL(tab, ptr, hash_val, key);                   \\\\\\n      |               ^~~~~~~~~\\nst.c:1086:13: note: in expansion of macro 'DO_PTR_EQUAL_CHECK'\\n 1086 |             DO_PTR_EQUAL_CHECK(tab, &entries[entry_index - ENTRY_BASE], curr_hash_value, key, eq_p, rebuilt_p);\\n      |             ^~~~~~~~~~~~~~~~~~\\nst.c: In function 'st_general_foreach':\\nst.c:1626:19: error: too many arguments to function 'func'; expected 0, have 4\\n 1626 |         retval = (*func)(key, curr_entry_ptr->record, arg, 0);\\n      |                  ~^~~~~~ ~~~\\nst.c:1655:27: error: too many arguments to function 'func'; expected 0, have 4\\n 1655 |                 retval = (*func)(0, 0, arg, 1);\\n      |                          ~^~~~~~ ~\\nmake[2]: *** [Makefile:997: st.lo] Error 1\\n~~~\\n\\nCan be easily reproduced with:\\n\\n~~~\\n$ dnf install -y git-core make gcc automake libtool cmp gawk && \\\\\\ngit clone https://github.com/k-takata/Onigmo && cd Onigmo/ && \\\\\\nsh autogen.sh && ./configure && make CFLAGS=\\\"-Wno-incompatible-pointer-types\\\"\\n~~~\", \"comments\": [{\"author\": \"mikelolasagasti\", \"body\": \"It can be built with:\\n\\n~~~\\n CFLAGS=\\\"-std=gnu17\\\" ./configure && make CFLAGS=\\\"-Wno-incompatible-pointer-types\\\"\\n~~~\\n\\nGCC15 has C language with gnu23 by default and has stricter checks.\"}, {\"author\": \"nuclearpidgeon\", \"body\": \"This is causing build failures over in Fluentbit if you use GCC15 too - see fluent/fluent-bit#10463 . A quick fix is to update the `CMakeLists.txt` with `set_property(TARGET onigmo-static PROPERTY C_STANDARD 17)`. But it would be better to actually just fix all the function pointer call type signatures ;-)\\n\\nAlso for what it's worth, I think the \\\"expected 0 args\\\" stuff may stem from this specifically: https://gcc.gnu.org/gcc-15/porting_to.html#c23-fn-decls-without-parameters\"}]}"}]}}
{"custom_id": "k-takata_Onigmo_issue_170", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-5-mini", "temperature": 1, "response_format": {"type": "json_schema", "json_schema": {"name": "RegexIssueClassification", "schema": {"type": "object", "properties": {"number": {"type": "string"}, "is_real_bug": {"type": "boolean"}, "is_fixed": {"type": "boolean"}, "found_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "fixed_pointer": {"type": "array", "items": {"type": "object", "properties": {"type": {"type": ["string", "null"], "enum": ["Version", "Commit Hash", "Pull Request Number", "Other", null]}, "value": {"type": ["string", "null"]}}, "required": ["type", "value"], "additionalProperties": false}}, "bug_kind": {"type": ["string", "null"], "enum": ["SEMANTIC", "CRASH", "DIFF", "PERF", "MEMORY", "DOC", "OTHER", null]}, "how_found": {"type": ["string", "null"], "enum": ["FUZZING", "STATIC_ANALYSIS", "MANUAL_REVIEW", "DIFFERENTIAL_TESTING", "OTHER", null]}, "reproduction_pattern_and_input": {"type": "array", "items": {"type": "object", "properties": {"pattern": {"type": ["string", "null"]}, "input": {"type": ["string", "null"]}}, "required": ["pattern", "input"], "additionalProperties": false}}, "log": {"type": ["string", "null"]}, "summary": {"type": "string"}}, "required": ["number", "is_real_bug", "is_fixed", "found_pointer", "fixed_pointer", "bug_kind", "how_found", "reproduction_pattern_and_input", "log", "summary"], "additionalProperties": false}, "strict": true}}, "messages": [{"role": "system", "content": "You are a **software engineering and cybersecurity researcher** specializing in **regular expression (regex) engine analysis**.\nYour research project aims to **systematically evaluate and categorize bugs** in regex engines by mining and interpreting historical issue reports.\n\nYou are currently analyzing the **Onigmo** regex engine, developed by **k-takata**.\n\nFor each task, you will be given **one issue report** in the following JSON format:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"title\": \"Issue Title\",\n    \"author\": \"johndoe\",\n    \"labels\": [\"bug\", \"feature\"],\n    \"description\": \"Issue Description\",\n    \"comments\": [\n        {\n            \"author\": \"johndoe\",\n            \"body\": \"Comment Body\"\n        }\n    ]\n}\n```\n\n---\n\n# **Your Goal**\n\nYour task is to decide whether the issue describes a **real bug** related to the Onigmo regex engine and to **extract structured information** about the bug.\nYou must rely **only on the content explicitly stated or strongly implied** in the issue description and comments.\n\nIf the issue is **not** about an actual bug (e.g., question, misunderstanding, expected behavior, usage error, unsupported feature), then you must produce the **null-filled output** described later.\n\n---\n\n# **What Counts as a “Real Bug”**\n\n\nA real bug includes **any confirmed or strongly evidenced defect**, including:\n\n* **Semantic bugs**: incorrect match results, wrong interpretation of patterns.\n* **Crashes**: segmentation faults, aborts, panics.\n* **Performance bugs**: timeouts, catastrophic backtracking, unexpected slowdowns.\n* **Memory bugs**: leaks, buffer issues, tool-reported memory errors (ASan, UBSan, etc.).\n* **Differential bugs**: behavior differs between versions or across engines.\n* **Documentation bugs**: incorrect, misleading, incomplete, or inconsistent documentation associated with regex behavior or API usage.\n\nDo **not** classify as a bug:\n\n* misuse of the API\n* misunderstandings of regex semantics\n* invalid input or unsupported features\n* documentation or enhancement requests\n* behavioral questions with no confirmed fault\n\nWhen the existence of a bug is unclear, respond with **all null values**.\n\n---\n\n# **Output Format**\n\nYour output must be a valid JSON object with the following structure:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": true | false,\n    \"is_fixed\": true | false,\n    \"found_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"fixed_pointer\": [\n        {\n            \"type\": \"Version\" | \"Commit Hash\" | \"Pull Request Number\" | \"Other\" | null,\n            \"value\": \"Value\" | null\n        }\n    ],\n    \"bug_kind\": \"SEMANTIC\" | \"CRASH\" | \"DIFF\" | \"PERF\" | \"MEMORY\" | \"DOC\" | \"OTHER\" | null,\n    \"how_found\": \"FUZZING\" | \"STATIC_ANALYSIS\" | \"MANUAL_REVIEW\" | \"DIFFERENTIAL_TESTING\" | \"OTHER\" | null,\n    \"reproduction_pattern_and_input\": [\n        {\n            \"pattern\": \"Pattern\" | null,\n            \"input\": \"Input\" | null\n        }\n    ],\n    \"log\": \"Log\" | null,\n    \"summary\": \"Short summary of what the issue is about and the LLM's reasoning for the classification.\"\n}\n```\n\n### **Field Definitions**\n\n#### **is_real_bug**\n\n* Whether the issue is a real bug.\n* Set to `true` if the issue is a real bug, `false` otherwise.\n\n#### **is_fixed**\n\n* Whether the bug was fixed.\n* Set to `true` if the bug was fixed, `false` otherwise.\n\n#### **number**\n\n* The issue number.\n* You already know this from the issue report input, but you need to output it as well.\n\n#### **found_pointer**\n\n* The version, commit hash, or pull request number where the bug was observed.\n* The primary aim here is to pinpoint the locations so that we can rollback and reproduce the bug.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was found is explicitly stated.\n\n#### **fixed_pointer**\n\n* The version, commit hash, or pull request number where the bug was fixed.\n* If multiple of those are mentioned, you can add them all to the array.\n* Must come directly from the issue text or comments.\n* Return `[]` if not any kind of pointer to at which point the bug was fixed is explicitly stated.\n\n#### **bug_kind**\n\nChoose exactly one:\n\n| Value        | Meaning                                                                   |\n| ------------ | ------------------------------------------------------------------------- |\n| **SEMANTIC** | Incorrect matching, parsing, or interpretation of patterns                |\n| **CRASH**    | Crashes, panics, segmentation faults, unrecoverable errors                |\n| **DIFF**     | Behavioral differences (across versions or engines)                       |\n| **BUILD**    | Build issues or compilation errors when building the engine               |\n| **PERF**     | Performance issues, backtracking blowups, unexplained slowness            |\n| **MEMORY**   | Memory errors, leaks, invalid access, sanitizer outputs                   |\n| **DOC**      | **Documentation issues: misleading, incomplete, incorrect documentation** |\n| **OTHER**    | A genuine bug that does not fit any other category                        |\n\n\nFor `DIFF` bugs, behavioral differences can be observed in the two different versions of the same engine (e.g., new version vs. old version)\nand between different engines (e.g., Onigmo vs. other engines). The behavioral difference can be in the acceptance of a pattern, \nthe span of the match, the captures, the number of matches, flag behavior, etc.\n\n#### **how_found**\n\nIdentify how the bug was discovered, if stated or there is enough evidence (e.g., usage of ASan for fuzzing):\n\n* FUZZING – found via fuzzing tools\n* STATIC_ANALYSIS – found via automated static analysis\n* MANUAL_REVIEW – found manually (e.g., user investigation)\n* DIFFERENTIAL_TESTING – found by comparing results with other engines\n* OTHER – explicitly stated custom method\n* `null` – if no discovery method is stated or implied\n\n#### **reproduction_pattern_and_input**\n\n* Extract all reproducible test cases provided.\n* Store each `(pattern, input)` pair separately (there can be multiple pairs).\n* Use `null` values only when the pattern or input is missing.\n* Sometimes, the provided pattern or input string is too long to be fit in the output format (e.g., excessive repeats of the same character or pattern).\n  * For example, the issue author might state a regex pattern or input similar to \"()()()...()\" (10000 times \"()\"). \n  * In this case, you can output a shorter representation like \"()()...()\" (50 times \"()\"). Mention that truncation in your summary.\n\n#### **log**\n\n* Include any crash logs, sanitizer output, stack traces, or diagnostic logs.\n* Store **exactly** what is provided, do not invent or summarize.\n* Use `null` if not present.\n\n#### **summary**\n\nA **2–6 sentence** explanation summarizing:\n\n* What the issue reports.\n* Whether and why it qualifies (or does not qualify) as a real bug.\n* Your reasoning for the chosen bug category and extracted fields.\n\nThis is the **only place where your reasoning may appear**.\nAll other fields should contain **no justification—only extracted data**.\n\n---\n\n# **If the Issue Is NOT a Real Bug**\n\nOutput the structure with all fields set to null or empty as below:\n\n```json\n{\n    \"number\": \"1234567890\",\n    \"is_real_bug\": false,\n    \"is_fixed\": false,\n    \"found_pointer\": [],\n    \"fixed_pointer\": [],\n    \"bug_kind\": null,\n    \"how_found\": null,\n    \"reproduction_pattern_and_input\": [],\n    \"log\": null,\n    \"summary\": \"Explanation of why this issue does not represent a real bug.\"\n}\n```\n\nThe number and summary must still be present; all other fields must be null or empty.\n\n---\n\n# **General Constraints**\n\n1. **Do not guess.** Only extract what is explicitly stated or can be strongly inferred from the issue description and comments.\n2. **Do not modify or correct the issue's content.** Extract it faithfully.\n3. **Only JSON output, no extra text.**\n4. **Ensure JSON is valid, syntactically correct, and uses only the allowed values.**\n5. **Never fabricate version numbers, logs, or test cases.**\n6. **Be consistent and precise.**\n"}, {"role": "user", "content": "{\"number\": \"170\", \"title\": \"regex that matches without IGNORECASE doesn't match with it\", \"author\": \"bcrowell\", \"labels\": [], \"description\": \"The following is my attempt to produce a minimal example of what looks to me like a bug in the ruby Regexp class:\\n\\n    e = '(?<![[:alpha:]])οὖν.*(?<![[:alpha:]])καὶ.*(?<![[:alpha:]])γ'\\n    \\n    r1 = Regexp.new(e)\\n    r2 = Regexp.new(e,Regexp::IGNORECASE)\\n    \\n    s = 'π οὖν καὶ γ'\\n    \\n    print r1.match?(s),\\\"\\\\n\\\"\\n    print r2.match?(s),\\\"\\\\n\\\"\\n\\nThe strings contain ancient Greek characters in unicode. The output I get in ruby 3.2.3 is this:\\n\\n    true\\n    false\\n\\nThe output should be \\\"true true.\\\" Since IGNORECASE makes regexes easier to match, the fact that r1 matches means that r2 should also match. Both the source code of the regex and the string being tested are entirely lowercase.\\n\\nThanks for your work on Onigmo! I hope this is the right place to report this. If not, then please let me know.\", \"comments\": []}"}]}}
